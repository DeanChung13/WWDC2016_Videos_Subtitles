介绍SiriKit
晚上好
我叫Robby Walker
今晚我将与Brandon Newendorp和Corey Peterson
一起讲解SiriKit
首先我会讲讲SiriKit是什么
它怎么在高层次工作的
接着Brandon会讲 创建一个
或两个扩展将你的应用与SiriKit连接
然后Corey会讲如何创建和设计
一个很棒的会话体验会大大不同于
设计一个很棒的图形用户界面
但首先 我们先来讲讲Siri
Siri是谁？
Siri是你的虚拟助手时刻准备帮助你
不管是通过增加一点幽默
还是更经常帮你做事
并主动提醒你潜在的冲突
我们来讲讲一个整合了Siri的应用例子
我们开发一个虚拟的应
我们要用什么假的东西给它命名
但我们又觉得它很宝贵 所以我们想
用很有价值但听上去是假的东西来给它命名
于是我们叫它独角兽快信
然后因为我们想让它看上去更宝贵
我们给它一个很甜美的图标
于是你可以想象有人在这样说
“嘿 Siri 发一条独角兽快信信息”
Siri可能会回答 “给谁？”
然后你可能说“Celestra”那是我一个同事在独角兽快信应用里的名字
然后Siri会问
“你想对Celestra说什么？”然后我可能会这样说
“我们多加点闪亮的过渡效果”
因为众所周知独角兽喜欢闪亮的过渡效果
不过还有更多的方式对Siri说同样的事
有人可能会只用两个步骤这样说
“独角兽快信发送一条信息给Celestra”
然后当然Siri会问一个问题
然后用户会说明白其意图
其他用户可能会只用一句话做同一件事
“独角兽快信 Celestra加多点闪亮过渡”
有人会用中文说同样的想法
但我说不来
其他用户会很有礼貌又啰嗦
可能会这样说
“嘿 Siri" 可以帮我打开独角兽快信应用
发送一条文本信息吗多加点闪亮过渡”
尽管用了27个字来描述一个简单的想法
他们实际上忘了说要把信息发给谁
然后他们可能会很啰嗦
比如这样说“我最好的朋友Celestra”
那么我想说的是
对Siri说同一件事有很多种方式
Siri也会用很多种方式回应
比如 如果你握着手机
你按Home键
Siri会提供更多视觉回应而更少大声说话
但如果你是用“嘿 Siri”召唤
就像我们的朋友CookieMonster或你在车上
Siri会说得更多而显示得更少
而且Siri的体验也仔细优化过
以满足用户的便捷化需求并应对大量不同的辅助设置
所以最终
有相当于组合爆炸的方式
大家使用Siri 不仅是
大家如何对Siri说话
还有Siri如何回应
那么问题来了
我们要怎样确保为用户创造一种高品质的体验？
我们要怎样确保它真的在不同应用之间保持一致
在同一个领域中？
还有最重要的是对在座的每一个人来说
我们要如何确保它好看又易用
这样越来越多人
才会以对话的方式使用更多他们喜爱的应用
那么答案就是让Siri处理对话
你的应用只处理功能
我接下来再具体讲讲那是什么意思
Siri做的首先是
理解用户说什么
所以我们听取声音然后将它变成文字
然后我们读取文字
并将它变成结构化的表示
对于用户想做什么也就是我们所说的意图
基于该意图 Siri再作出行为
执行用户想完成的任务
然后Siri提供回应正如我所说的 图文和言语回应
而且这方面还有很多
这四个步骤要花费很多工作
有很多深度学习技术
有卷积神经网络
有LSTM 有CRF有SVM 有很多东西
我们要确保作为应用开发者
你能真的专注于你的应用已经在做的事
有三个部分可以做到
第一个是词汇
这是你的应用如何告诉Siri它需要知道的词
Brandon稍后会再讲解
第二个是应用的逻辑
这是你的应用的功能
然后最后一个 当然了是很棒的用户界面
那么再来看看这个例子
具体了解它怎么实现的
假设有人说“嘿Siri 请发送独角兽快信信息给Celestra”
你的应用执行的第一条规则是帮Siri理解这句话
Siri在它的数据库中没有Celestra这个名字
但你的应用有
那么透过与Siri共享信息 你确保
Siri明白用户说了什么
这也有助Siri确定Celestra是个联系人
因为当你提供这类词汇时
你会说明这些是联络人的名字
或在另一个例子中 可能是相册的名字
现在Siri在发信息的领域中明白
要发送一条信息你实际上需要的不只是收信人
你需要一条信息
所以Siri会迅速地和你的扩展核对后询问
“你实际上是在要求这条信息的内容吗？”
如果你的应用说是
那么Siri会问一个跟进问题
所以实际上你的应用要做的一切就是
在单独的参数的基础上明确你的限制是什么
下一步就是Siri将所有的
信息结构化成一个对象
不是要去应对
语言和用词的多变以及我们之前讲的那些东西
你的应用实际只是获得这个漂亮简单的对象
然后它将其传送给你的应用去协助
处理意图和实施行为
然后当然 同时
Siri为用户提供用户界面
你可以选择提供第二个扩展
去定制用户界面让它看起来更像独角兽
那就是SiriKit非常高级的功能
目的是令它使用极为简便
但仍使你感受到对话交互的力量
接下来给大家具体讲解这一切如何实现的
是我的同事Brandon Newendorp对我来说他就是Celestra
谢谢Robby
我非常激动地向大家
具体讲讲SiriKit如何工作
还有你们将如何讲Siri的语言
当你们将SiriKit用于你们自己的应用上
现在请仔细听因为这切实关乎“意图”
首先
我想讲讲SiriKit如何就世界的事物进行沟
在高级层面 Siri用领域的概念思考一切
领域是一个广泛类别的事物
是Siri所理解的 从而知道怎么说
比如 类似发信息 打VoIP电话
发送支付都是领域的好例子
当中一些领域今年我们会和SiriKit一起开放
在领域中 我们有意图
意图描述一个已知的行为
是Siri理解的并且能向你的应用沟通的
现在我想把意图再分解一下
用另一个例子来具体说明
补充刚才Robby所讲的
在这个例子中我们有独角兽支付应用
嘿 Siri 给Buttercup转85块用独角兽支付付彩虹美甲
现在Siri明白这是个支付领域的请求
具体来说 我们知道这是个发送支付的意图
每个意图都有参数的意义
参数是具体的项目是Siri可以认出 理解
并向你的应用沟通的项目
发送信息的意图中有诸多参数
我们知道这个应用是独角兽支付
用户想要转账给某个人名叫Buttercup
我们还知道金额是85
然后Siri会变很聪明
会明白当用户说“块”时
很有可能是指美元
而且Siri可以使用很多强大的能力
来理解我们认为用户在此类情况下所表达的意思
根据诸如用户的定位
其Siri的区域及其他对系统可用的信息
最终 我们知道用户是在要求
发送彩虹美甲的付款
所以有了这种我们为SiriKit创造的共同语言
关于意图的共同语言来描述行为和意图的回应
用于描述从你的应用返回到Siri所产生的结果
我们再来具体讲讲意图
我说过 意图是一种行为
是我们要求你的应用执行的行为以及我们可以沟通的东西
在Apple和你的应用之间
每个意图会有零到多的参数
并且会根据个别意图和领域而变化
以及Siri在该领域中所理解的
还有我们认为向你的应用沟通所相关的
无论如何 一个意图始终会被归入一个领域
所以这是你得思考的事情
当你准备在你的应用中采用SiriKit时
要看作为SiriKit的组成部分的领域
并思考哪一些会
最切合你的应用
我们还有意图回应
这些是你如何告诉Siri关于意图的结果
你的应用刚刚执行的结果
你始终要用到这些中的一个去沟通结果
因为始终有一个意图回应发起者的意图
意图回应也可有附带的参数
用于描述你的应用实际用那个意图做了什么
有时那些参数会和意图的参数一样
其他时候会不同
因为有某些东西是仅仅通过
从应用返回Siri而实现沟通
我们也接受意图回应附带的回应代码
这些是用于告诉Siri在更广泛的层面
你的应用是否能完成请求
也有默认的比如成功或失败
或需要开启应用的失败
有些意图和领域有更具体的错误代码
有一点非常重要
是你告诉Siri一个确切的回应代码返回到你的应用
因为我们会使用这个去驱动对话
并为你的所有用户创造更好的用户体验
最后 我们附上NSUserActivity
到意图回应
如果你已经在你的应用中支持handoff
你就熟悉NSUserActivity
我们使用NSUserActivities来启动你的应用
如果用户需要离开Siri体验并转移到你的应用上
现在通过默认 Siri会生成我们自己的用户活动
利用意图和意图回应给你的应用
这样你就能准确地在你从Siri离开的地方继续开始
如果你想要你可以提供你自己的用户活动
扩充用户资料词典
借助对你的应用独一无二的信息
只要确保你创造最佳的体验
当用户离开Siri转移到你的应用上
以上就是意图 以及意图回应
它们是Siri和你的应用沟通的基本语言
并理解你的应用能代表用户执行什么
下一个我想讲的是
你的app和Siri如何就意图进行沟通
在沟通意图的时候
有三个步骤我们要求你了解
第一步是解析
我们会要求你的应用解析意图的每个参数
事实上 我们会对每个参数多次发起解析
有时对相同的参数发起多次
直到你和用户同意它们的请求
第二步是确定
对你的应用是个机会
来确保它将能够处理意图
并告诉我们预期的结果
最后 也是最重要的步骤是处理
你执行用户要求你做的具体行为
我们先具体来说说解析步骤
解析步骤的目的
是让你协助Siri理解用户说了什么
更为重要的是用户表达什么意思
当他们开始对你的应用发起请求
这也是你的应用的最大的机会去影响Siri的行为
并对我们正在进行的对话作出某些控制
借助你的应用的用户
为此
你的应用会提供一个解析回应
有很多种不同的解析回应
对于Siri理解的每一种数据
并会要求你的应用协助我们理解
那么让我们回到刚才的例子
向Buttercup转些钱用独角兽支付付彩虹美甲
具体地说 我要你们注意收款人一栏
这是用于描述我们转钱给谁
而且重要的是Siri、用户、你的应用
均理解用户说Buttercup时是什么意思
现在希望从你的应用得到的最普遍的解析回应是成功的
这意味着你确切理解用户所说的 所指的
然后你要告诉我们你成功理解了
再将目标提供回给我
告诉我们你解析了什么你成功配对了什么
在这个例子中意味着独角兽支付完全明白谁是Butter cup
有时候 你的应用会做一些聪明的选择
但它要确保
用户所表达的真的是你认为你已作出聪明选择的那个意思
所以我们有一个确认的要求选项
这时候你可以要求Siri
让用户再三核对你的解析结果
然后提供是或否的回应
此例中 对于独角兽支付Siri只是确保
用户说Buttercup时指的是Sir Buttercup
另外一些时候你的应用会需要
要求用户从一小列选项中挑选
Siri称之为消歧
如果你想叫用户从一列选项中挑选
我们建议五个到最多十个
你可以提供一个消歧清单给Siri
然后我们会展示你告诉我们的选择
在独角兽支付这个例子中
我们问用户是指Sir Buttercup
Buttercup the Bold还是Sunrise Buttercup？
Siri最强大的部分是代表你处理与用户的互动
你不必担心这个部分
用户可以使用自然的方式来通过选择这些选项当中的一个
他们可以点击清单中的一个项目
他们可以说出名字“Sir Buttercup”
或者他们可以仅指出一个然后就说“第二个”
无论用户如何想要跟Siri互动
我们会为你的应用免费处理它
另外有些时候你需要从用户那儿取得更多信息
可能它们还不够具体
或者可能你的应用有80个人叫做Buttercup
你不想提供80个Buttercup的选择给用户
在这些情况下你可以说你需要更多具体信息
Siri会提醒用户更具体一点
等用户提供更多资料后我们就再发起解析方法
如果用户不指定一个值
而你需要一个值才能继续你可以告诉Siri你需要一个值
在此情况下 我们会告诉用户
“喂 你需要对此说点什么 因为
独角兽支付需要知道你是要转钱给谁”
你也可以告诉我们你不明白
用户提供的资料而你需要一个全新的值
对此 我们有unsupportedWithReason
只要告诉我们你不支持这个值
Siri会要求用户提供一个新的
最后 如果有一个值当中如果给定参数
你的应用不需要它 那就告诉Siri
￿῿
如果用户恰好指定一个值
我们会直接忽视它们
以上就是解析步骤
这是我们如何确保Siri、你的应用、用户
都理解他们叫你的应用做什么在我们继续之前
下一步是确定
确定步骤是真正关于两件事
首先 它给你机会告诉Siri
处理意图的预期结果
我们会要你提供这个回应
即我们可以告诉用户即将发生什么
它对于你的应用也是个机会
去核对任何要求的它所需的状态
以便完成用户所要求的请求
无论如何
你要提供一个意图回应是从确认步骤返回的
而且我们要你扩充尽可能多的信息
在该意图回应中这样我们能将其
非常有效地沟通给用户
有时候 Siri会叫用户提供信息
关于某些意图和某些领域当中我们决定是重要的
例如 像是发送支付或请求搭车之类的事
Siri会和用户确定
在我们继续下一步之前
那么让我们想想我们要在独角兽支付的例子里确认什么
独角兽支付得能够对我们的服务沟通
确保用户登录以及其他一些东西
以便完成请求
那么我们要在确认步骤核对所有那些
我们会说 “我们可以到达独角兽支付的服务器吗？
用户登录独角兽支付了吗？”
当然了 这是很贵的彩虹美甲
所以我们要确保用户在其帐户中有足够的钱
在我们发出这个支付之前
一旦我们确定我们的应用能够处理这个请求
我们生成一个意图回应
带有一个成功的结果代码然后传回给Siri
那么我们继续到最后一步
那就是处理意图的确认步骤
最后的步骤是处理
这是在处理意图时最重要的一环
因为此刻
你将要做用户要求你做的事
你要代表用户执行行为
而且正如在确认步骤那样
重要的是你提供尽可能多的可用信息
返回Siri
因为我们要所有那些信息以便我们能创造
最佳的用户体验为了你的应用的所有用户
有时我们会以图文形式展示这些信息
其他时候我们会将其作为对话的一部分
并将它说回给用户这样他们就明白你的应用做了什么
现在我们明白有时候你的应用可能需要一点时间
来代表用户完成一个请求
网络通话可能会耗费点时间
或者在你的服务的另一端有一个人
正在处理交易或者什么
我们一边等待回应从你的应用返回
一边会展示一个等待的用户界面给用户
说你的应用正在处理他们的请求
我们真的要你提供一个回应
在几秒钟以内两到三秒最多
理想情况下 你可以在很短的时间内成功返回到我们
不过 如果你知道你的应用要费点时间
获得结果并返回用户
我们想要你发送一个正在进行中的回应代码
这样可以让Siri告诉用户
你的应用已收到请求
你已经告诉我们足够的信息
即便他们离开Siri应用也将持续处理请求
在独角兽支付的例子中
我们一到达处理阶段就要告诉我们的服务器
我们要发送支付了
然后给Siri一个意图回应附上成功代码
那样Siri就能告诉用户他们的钱正在安全发送中
那就是我们如何用SiriKit与你的应用沟通时所涉及的
我们有意图 有意图回应
在你的应用和Siri之间创造这种共同语言
接下来我们要讲的
是添加SiriKit到你的应用中会涉及什么
借助iOS10中的SiriKit
我们创建两个新的扩展点
意图扩展和意图用户界面扩展
我已经告诉你这是关于意图的东西
我们还添加了一些API
帮你协助Siri识别用户对你的应用说了什么
我们用我们所谓的应用词汇和用户词汇的形式来实现
我想开始讲讲意图扩展
它会执行解析、确认
和处理的方法这些我们刚讲过
那么 从其核心
意图扩展是SiriKit最重要最基础的部分
基于它我们创建所有的互动
在Siri和你的应用之间
你的意图扩展可以支持一个或多个意图
我们留给你决定什么最切合
你的应用以及你想怎样执行你的扩展
我们鼓励你将扩展的数量减到最少
这样我们就不会开启太多进程
如果用户对你的应用作出多个要求
但要做最适合你的
同样重要的是明白
你的意图扩展将在后台运行
而Siri是在前台
这让Siri保持与用户的对话
并仍然跟你的应用交流以来回获取数据
并沟通关于用户的请求
我说过
你的意图扩展是执行解析、确认
以及处理的方法为你的应用支持的每个意图
当我们开发SiriKit时我们花了很多时间思考安全性
因为安全性是我们在Apple所做的一切的基石
Siri的部分内在行为是我们要限制某些行为
在设备锁定时不让它发生
例如 我们要确保用户验证
设备 并解锁它在发送支付之前
或在请求搭便车之前
那是我们对某些意图作出的内在行为
我们也明白有些行为
是你的应用想要增加安全性的
默认情况下 Siri会允许
像发送信息这类事不受锁屏限制
但如果你的应用想确保
用户首先登录他们的设备
你可以告诉Siri你想要增加默认的安全性
并限制锁屏时你的意图
这个直接通过信息关键清单就能实现
我们还努力确保
本地验证框架可用于你的意图扩展
以便你可以要求用户作额外验证
即使设备已经解锁
如果你不熟悉本地验证框架
2014年有一个很棒的讲座当中有具体讲解
最后 我们已确保Apple Pay可用于你的意图扩展
如果你想要用Apple Pay与你的用户完成交易
那已可用于你的意图扩展
Apple Pay表单将显示于Siri正上方
如果你想对此了解更多
很高兴有人用Apply Pay
我对此很兴奋
你们可以听“Wallet和Apple Pay的新特性”演讲
是在昨天举行的
那么以上就是你的意图扩展
这是SiriKit的基本部分
关于我们如何与你的应用沟通
以完成用户的请求
下一个是你的意图用户界面扩展
我们来具体讲讲它究竟是什么
意图用户界面扩展
让你有机会将你的应用界面带入Siri体验
让Siri真的感觉像是你的用户在使用你的应用
你可以带入你的品牌你的视觉识别
以及其他信息植入Siri的transcript
你可通过添加这些视图到我们所谓的Siri页面摘要来实现
你的意图用户界面扩展始终会返回一个用户界面视图控制器
你可以添加你喜欢的任何东西到那个视图控制器内
要不要意图用户界面扩展是完全选择性的
按照默认 Siri对于每个意图有一个界面
我们在SiriKit中支持意图
我们认为那些会有效沟通
你的用户想要知道的一切信息
但如果你喜欢创造更为独特和更具品牌的体验
这就是你的机会
我们也让意图用户界面扩展可用于某些意图
当中我们认为适合对用户展示界面
借助意图用户界面扩展你能做很多事
你用它展示额外信息
超出所描述的
在意图和意图回应中
也许某些信息对你的应用来说是独一无二的
你也可以用它向用户提供长期运行的意图的状态的最新信息
那么如果你已经提供一个正在进行中的回应代码
如前所述 你可以继续
向用户提供你的意图用户界面扩展中的那个意图的状态的最新信息
无论如何 我们始终显示
你的意图用户界面扩展和其他Siri内容一起
我们始终会展示你的应用图标
你的应用名称 在窗框顶部
我们可以选择显示一些按键
以及其他信息在页面摘要的底部
以及其他信息
你的视图控制器始终是Siri页面摘要的部分
有几个案例呈现
你的应用代替我们要在Siri中
默认显示的内容
这是比如信息或地图之类的东西
我们觉得你应该有机会
代替默认的信息或地图体验
透过那个你感觉最适合你的应用和你的用户的
那么你可以告诉我们你显示一张地图或一条信息
透过你的意图用户界面扩展
然后我们会省略某些Siri的界面元素而采用你的
同样重要的是要记住
正如新的通知扩展
意图用户界面扩展是非互动性的
你可以画任何你喜欢的东西你可以放动画
你可以播放任何你喜欢的视图
但我们不鼓励你将控件放进你的用户界面扩展
因为用户不能和它们互动
以上就是意图用户界面扩展
这两个扩展点是你所需的一切
将你的应用的能力添加到Siri
将你的体验和你的用户界面带进Siri
为你的所有用户打造更好的体验
SiriKit接下来的两个部分
和你的应用息息相关
那我们来讲讲接下来那些都涉及的
你的应用所担负的一切责任在于词汇
你的应用有独特的方式与你的客户交流
你的客户借此了解你的应用的功能
而Siri需要你的一点帮助
来理解用户要对你的应用说的东西
以及他们习惯谈论的东西
这些表述中的一些成了你的应用的部分
它们是你的应用的每个用户知道并理解的
其他表述对个别用户是独特的
而且我们有API来支持二者作为SiriKit的部分
而二者对于打造伟大的体验都很重要
我们先来研究一下应用的具体词汇
这些词汇或表述是你的应用的一部分
它们对于你的应用的每个用户来说都是熟悉的
它们是类似体育运动的名称或交通工具的类型
每个人用它们来指你的应用的某些功能
由于它们是你的应用的一部分
你在plist中定义这些plist是你主要的应用bundle的部分
而且 因为它们是你主要的应用bundle的部分
我们鼓励你将它们本地化
这样它们就可以得到支持在你的应用支持的每个区域
以及Siri将会使用的每个区域
我们来讲讲有什么进入那个词汇plist
因为有若干部分组成词汇plist
其一
是用户如何与你的应用对话的例子
这些有点像我们所谓的 比如你的应用的经典用例
拿我们的新的独角兽健身应用来说
比如用户会说启动独角兽健身应用开始运动
这些是你认为用户会对你的应用通常会说的内容
除此之外还有某些参数
你可以提供你自己的词汇类型
对于独角兽健身应用
我们要指定我们自己的独特的运动名称
某些独特的东西对独角兽健身是独特的
但对我们的用户来说是熟悉的
我肯定你们都是独角兽健身的狂热用户
但如果你不是
拿我们来了解一下Colorlicious这个词
它是个特别的运动名称
它描述一个事件你跑来跑去
抓住掉下来的闪闪发光的东西越快越好
它是个很棒的运动
你们都应该试试
它是个新宠
我们要告诉Siri“Colorlicious”这个短语
它对于我们的应用是个独特的术语
有时这些短语不是那么容易发音
它们看上去不是很明显
那么你也要给Siri一些发音信息
只是简单的语音拼读关于那个词
或短语 是你要告诉Siri的
还有 举例说明你将如何在你的应用中使用那个短语
“在独角兽健身中做一个Colorlicious”
会是这个特定词条的一个例子
其他类型的词汇是用户特定的词汇
这些是对你的应用的个体用户是独特的
而且正因为如此
我们要求你要提供它们在运行你的主应用时
我们要求你提供它们以一个术语顺序集的形式
那么你可能会想
一个顺序集是类似一个奇数数据结构
为什么我们要选择用那个？
我向你保证当中有充足的理由
我们非常非常想要你——
我们会非常鼓励你为你的用户将词汇按优先顺序排列
最重要的术语
或你认为用户会直接说的最多的东西放在最上方
我们讲在独角兽支付的情境下
当中我们有个地址簿记录我们可以发送支付的每个人
我们要你给Siri提供你应用中的所有联系人的名字
以便如果用户说那些名字我们能够识别它们
不过 独角兽支付记录我们最近支付过的人
所以我们要把我们最近的联系人放在
我们应用中的所有其他联系人的前面
此外 独角兽支付有一套收藏
即对用户来说最重要的人
所以我们要将那些优先放在首位
从我们的收藏开始我们的顺序集
然后是我们的最近联系人
然后放在最后的是其他联系人
通过这样优先排序
你帮助Siri更好地理解你的用户
并创造一个更好的体验为透过Siri使用你的应用的所有人
有几类东西是我们通过用户词汇支持的
诸如联系人名字
运动名称 相册或照片关键词
作为你的应用的一项附加价值
如果你依赖系统的iOS地址
你根本不需要担心这个部分对于联系人名字
因为Siri对系统地址簿有内在理解
所以你只需要提供联系人名字
如果你的应用有自己的专用地址簿
你还要思考你要给Siri什么信息
作为这个词汇机制的一部分
并且只告诉我们信息
是你的用户会期待Siri识别和了解的
我们不要你给我们诸如电话号码之类的东西
或你的词汇数据中的电子邮件地址
只给我们简单的普遍的东西比如你的联系人名字
是用户会期待看到来自Siri的东西
那么 重要的是你及时更新Siri随着数据发生变化时
因为用户习惯对Siri那样说
一旦他们将数据导入电话中
例如 如果用户创建一个新的联系人在你的应用中
确保你告诉Siri这件事在他们点击保存按键的那一刻
那样的话我们就能提取数据并准备识别它
一旦用户按住home键对Siri说话
更为重要的是
你要从你的Siri的词汇中及时删除信息
因为你的用户会非常不高兴
如果他们从你的应用中删除了某些东西
但是Siri仍然会在几天或几周后识别它
因为你忘记告诉Siri
用户已经删除那条特定的信息
最后 确保你从Siri中移除你的所有词汇数据
如果用户选择重置你的应用 或退出
那么和SiriKit相关的另一件事是许可
正如iOS的许多其他部分
用户得同意授权让你的应用对Siri说话
我们通过标准的TCC提示来实现这个
类似你习惯看到的相机或麦克风的提示
你的应用现能提供一个string
进入这个提示 告诉用户什么样的信息是你的应用
将要发送给Siri的
这也是一个很好的机会教你的用户了解你的应用是做什么的
有什么很酷的新功能是你刚为他们所有人打造的
我们还鼓励你从你的应用请求许可
在用户初次使用它时在他们升级到iOS 10之后
我们要你那么做这样用户会了解Siri
并同意使用Siri在他们作出第一个请求之前
所以一旦他们尝试和Siri说话和你的应用说话
就已经获得同意 而且他们会有很棒的初次启动体验
以上是添加SiriKit到你的应用中所涉及到的
这两个新的扩展
以及两种词汇机制
我要讲的最后一点
是SiriKit如何适应iOS这个更大的领域
现在Siri是操作系统一个必不可少的部分
用户通过home键时刻都能使用它
或通过耳机的麦克风说 嘿 Siri
以及其他多种不同方式触发Siri
SiriKit也是操作系统必不可少的部分 和Siri自身一样
那么Siri的整合
是我们今年创建的这个更大的意图框架的一部分
全都是关于沟通这些共同的 共享的行为和意图
在你的应用和iOS之间
这个意图框架将不仅限于今年的Siri整合
它是联系人整合的一部分
你可以捐赠信息给系统
提升你的应用到默认发送信息
或打电话的机制为某些联系人
我们也对CallKit做了非常深度的整合
以打造非常棒的VOIP体验
这其中最大的整合就是地图
地图中加入了拼车服务到iOS 10
你可以在地图应用中直接预约搭便车
我们和地图团队密切合作
打造一个共同的扩展点
这个意图扩展和拼车意图
用于Siri和地图以打造相同的体验
如果你采用SiriKit和意图扩展
你就会免费获得地图整合
我们认为这是很棒的方式节省一些时间
打造更好的开发者及用户体验
我想讲的最后一部分
是用户如何与你的应用对话
非常重要的是 作为我们iOS的安全性和私密性模型的一部分
让你的客户对你的应用和数据放心
重要的是他们理解当...
他们要对你的具体的应用说话
以及当他们的数据进入你的应用
要确保你的所有用户对此知悉
用户需要说出你的应用的名称
当他们对Siri作出请求时
具体来说 我们要看你的bundle显示名称
这显示在主屏幕上在你的应用图标下面给你的用户看
Siri全是关于自然语言
以及和用户进行舒适流畅的对话
为了确保那样那就是这个作用的部分
用户能够说出你的应用的名称用很多种词性
在说话的开头、结尾或中间
不管哪里只要自然地融入
因为Siri要创造自然流畅的体验
对你的应用说话为你的用户
用户利用SiriKit时最常做的一件事是
我们所说的将应用名称动词化
或者把你的应用名称用作一个动词来描述一个特定的行为
举个例子 他们会说
“独角兽快信 Celestra请订购5个彩虹卷”
在这里 他们把独角兽快信用作动词
描述他们要求我们采取的行动
这个当然用Siri能做出相当好的效果
事实上 有多种方式用户可以用Siri对你的应用讲话
可能性是无穷的
这就是为你的用户实施很好的Siri体验时所涉及到的
但不仅仅涉及工程植入
在打造良好的Siri体验时
要和大家具体讲讲关于如何设计很棒的Siri体验
我想邀请Buttercup我的同事Corey上台
谢谢
大家好
我是Corey Peterson是Siri的设计师
很激动来跟大家讲讲用SiriKit创造神奇的体验
我今天要讲三点
首先是Siri为你们做的一些事
帮助你让与你的用户对话更便利
其次
我们会讲一些设计指南
你在开始用SiriKit时就要牢记
然后 我会给你们一些建议可以怎样优化设计
让你的应用更上一层楼
那我们就开始讲
用户界面
当我说用户界面时
你可能在想类似这样的东西
一个按键
屏幕上显示的视觉界面的一部分
视觉界面已经很好地理解行为和模式
还有...
每个人对使用那些都很熟悉
它是应用的一部分
应用给了你语境关于你想...
用户想做什么
他们可用的选项以及关于那些因素的细节
而且有大致一种方式和一个按键互动
但是 当你开始使用对话
事情就变了
最大的一个不同就是按键没了
屏幕上没有信息会感觉很奇怪
那我们怎么解决这个？
由于用户可以想说什么就说什么
或者他们甚至不知道要说什么
那么我们想把它当作一个对话界面
事件的语境
透过对话建立
在人、Siri和你的应用之间
没有视觉参照的话
用户或人必须在脑中牢记这个信息
于是Siri努力呈现
仅仅相关的关键信息以完成任务
不会用其他信息覆盖过它们
并且 这个界面是由问题和回应形成的
二者来自于人和Siri
重要的是要思考Siri是如何问与答
你的应用有这个能力形成这个对话
我们稍后再讲那个
我们来看个例子看这个是怎么实现的
假设有人创建了一条信息
Siri可能会这样说
准备发送？
在这里人们可能会有很多不同的说法
可能会直接说 “发送”
或者可能决定不要
或者可能完全忽视问题
说他们想说的任何话
那样也行
这些事实际上恰当的回应在这个情境下
有一点很棒的是Siri会为你处理这个
发送正确的信息回到你的应用上
而且更好的是
Siri会处理成千上万种
人们说同一件事的其他方式
之前
Robby讲了所有不同的方式当人们开始与Siri对话
我要集中讲讲当中的几种
大家都熟悉的是拿起设备
按home键
开始对话
但是 另一种我们有的重要模式
是所谓的免提
你不必用身体触碰设备来开始对话
只要用“嘿 Siri”发出你的请求
你就能从房间另一头做事
或者 嗯 在房间另一头
如果你抽不开手或正在做其他事
我给大家看几个例子
关于对话界面如何改变以适应这些情境
这里 我们说
我正握着我的手机 按按键
那么我说
“我有任何提醒事项吗？”
你有五条提醒事项
于是你听到了Siri给出一个很快的回复
然后在屏幕上给出视觉信息
由于我握着手机我可以看一下
那么 听一下这个会怎么变化当我激活免提时
嘿 Siri我有任何提醒事项吗？
我找到五条提醒事项
第一个是讲关于辅助功能
然后让Siri对Cupertino里的人打招呼
然后到下一页
你要我把剩下的读给你听吗？
不用了 谢谢Siri
所以正如你所听到的Siri大声读出该信息
它给出更少量的信息
让我更容易明白
最后
Siri问我下一步这样我是控制着对话
以及接下来要发生什么
我们也在其他地方使用这些相同的原则
在CarPlay中 你要盯着路面
对需要辅助的人来说也很有帮助
Siri很棒 因为你可以要求它执行一个任务
而且它能够做到
你无需找到一个应用
在视觉用户界面中浏览以完成任务
但Siri能做到更多
Siri明白当你连接设备时
比如一副耳机或一个蓝牙助听器
然后它适应...
噢 另外一点就是它能识别设置例如voiceover
这是Apple的技术用来读出屏幕上的视觉元素
而且 适应它的行为
以协助用户完成任务
以上是关于Siri如何协助你
接下来有几点是你可以协助Siri的
确保你测试正如你开发你的应用一样
多种不同的请求
测试不同的情境特别是试验免提的东西
通过整个过程
确保你的应用提供信息返回Siri
以便Siri能将其再提交给用户
在免提情境中那样尤为重要
好了 接下来我们讲一些设计指南
我要你们把它视为与你的用户的对话
和任何重要的对话一样你需要确保你有所准备
倾听
问问题
并回应请求
那么 我们怎么准备？
首先是明白
你的用户并不完全像你一样
什么意思呢？
你花了非常多的时间开发和设计你的应用
你拥有一定的知识
比其他任何人将会拥有的要更棒
而那会影响你如何与Siri对话
你需要出去找到一些真人
可能是朋友、重要的其他人也可能甚至是做市场营销的人
问他们会跟Siri说什么？
那我就用今天的主题
来讲讲一个应用叫独角兽搭车
对于这个假的应用
我们去和一些真实的用户谈他们给了我们一些回应
有些人会说“搭个车”
在此情况下 Siri会问用户他们想要用哪个应用
然后继续完成剩下的任务
有些人可能会提供更多信息
有些人可能会提供非常具体的信息
其中一些不太可能
因为我们都知道
在Pegasus上挤两个人非常困难
一旦你有了所有这些回应
确保你的应用是个好的倾听者
听取用户提供的所有信息并使用它
但他们不一定提供所有你需要的信息
所以 你要找到方法获取它
一种方式是选定一个好的默认
假设我请求搭便车
我没说在哪被接独角兽搭车选好的默认
我可能想要就在这里被接
或者在楼下的马路牙子
你还可以作出有根据的推测
基于你对用户的了解
但要避免糟糕的惊喜
你不想要选最贵的选项
或某些其他默认 或某些其他推测
会让用户之后变得不高兴
所以如果你有问题而且你不确定有人会不会不高兴
也许更好的办法是向用户提问题
但这样的话 你要确保简单化
没人想玩一个20个问题的游戏
当他们只想完事
所以 只要求绝对有必要的东西
而且人们可能提供的信息你的应用不能处理
那么你需要将那些错误发回给Siri
以便Siri可以提交给用户并继续执行任务
有两种类型的问题我想具体讨论一下
Brandon之前也有讲过
第一种是确认
当你有一个项目时你想要和用户核实
这可以做到因为你作了一个有根据的推测
或者有一个项目会产生非常大的影响
如果有人习惯作出小额购买
或小额付款 通过你的支付应用
而突然间他们作出一个支付是数额大得非常多的
你可能要和他们确认确保那是他们的意思
下一个是消歧
这个很棒当你有多个选项时
你需要用户选一个
那么这个可以用在当你有一个简短的清单时
比如可用的搭便车类型在某个既定的时间
或者 如果你有一个长很多的清单
假设我要发信息给Eric
我有一些人在我的联系人中
我可以将其筛选至只剩对于Eric可能的匹配
然后让用户来选
Siri可以显示这个清单以视觉的方式也可以通过说话
然后用户可以回应通过点击或说出回应
那么在你执行任务之前
Siri会和你的扩展核实以确保一切准备就绪
它要从你的扩展取回所有的信息
以便它将其提交给用户
Siri会以语音的方式提交这个
然后它会在屏幕上提供一个用户界面来展示这个信息
如果用户决定继续
如果用户决定继续
你应该执行行为
然后将那些结果返回给Siri
以便Siri可以将其呈现给用户并告诉用户
以用户作出请求的同样的方式
他们开启对话而Siri可以在对话中回复
其中很棒的一点是它随处可用
可以用在CarPlay免提也可以用
当有人触摸设备时也可以用
而Siri会再次提供一个视觉用户界面来协助
但是 如果你想要的话
你的应用可以提供一个定制的用户界面将你的app的那种感觉融入Siri
我想要你作出限制限制你展现的东西
用户想完成一个任务
你不要分散他们的注意力给他们不需要的信息
你还要确保你设计这个用户界面
适用于不同的屏幕尺寸从最小的电话到最大的iPad
这里有另外一个定制用户界面的例子来自独角兽快信应用
正如Brandon所说你应该使用我们的API
来隐藏任何冗余信息
你这样做的时候需要确保
你的定制用户界面以视觉方式呈现一切
而且你将所有信息发回给Siri
以便当用户看不见这个用户界面时免提的请求仍然可用
在一些情况下
Siri会打开你的应用来完成一个请求
对于搜索相片的请求我们会那么做
我们会在你的应用中显示结果
这点很棒 因为你的应用可以提供跟进行为
任何时候 用户从Siri进入你的应用
你不要给他们惊喜
不要在中间放任何插屏信息或提醒
并确保你只执行用户请求的行为
好 接下来我们来讲讲润色你的设计的几点建议
之前Brandon讲了应用特定的词汇
以及你可以提供的例子
用户可以找到那些信息
通过去找Siri然后只要问
“你能做什么？”
Siri会展示许多它能做的不同的事情
包括你的应用以及你提供的例子
那么我想给你们一些建议关于如何写好的例子
确保你的例子包含你的应用名称
以便用户可以找到你的应用使用你的功能
把你的例子保持简短并集中于你的应用能做的事
你应该提供多个例子对于你支持的每个意图
并确保你优先处理
你的意图以及那些意图里的例子
如果你的应用在多个语言和区域中使用
确保你提供本地化的例子
在适当的地方
最重要的是确保它们有作用
要避免几件事
你无需在你的例子中称呼Siri
也无需任何不必要的客套话
只要专注于你的应用的功能
最后一点我想讲的是迭代体验
你要确保你有时间去研究
并试验如何促成对话
确保你和真实的人交谈
不仅仅是他们一开始会说什么
而是完成某事的整个过程
而且 在不同情境中尝试
免提
或出去转转而不只是在桌子上测试
而且全程要确保你在问“它感觉对吗？”
如果你需要 就做出改变并迭代
因为我们要争取
为你的用户打造很棒的Siri体验
那么 我们来回顾一下今天所讲的内容
Robby先向大家介绍了SiriKit
把Siri的力量和你的应用带入对话中 为你的用户
Brandon讲了创建扩展
以及它们如何与Siri沟通透过意图和意图回应
以及解析、确认和处理的方法
还有 你的应用需要提供词汇
即用户会对你的应用说的普遍的东西
然后我们讲到设计
引入对话交互
对话界面
以及你可选的选项在你开发你的应用时
从而为用户塑造对话
最后我们讲了迭代从而...
我们能够获得一种Siri体验让我们感觉轻松而又神奇
我们在网页上有关于这个讲座的信息
我们本周有一些相关的讲座
我要特别强调“以SiriKit来拓展你的应用”
是在明天
我们的部分同事会具体讲解API
向大家展示整合SiriKit案例的代码
非常感谢大家
我们迫不及待想看到你们的作品