国际用户界面的新功能
早上好！欢迎大家！
感谢大家来参加本场演讲我是Sara Radi
国际软件工程师
今天和同事Joaquim Lobo Silva
一起讨论一下国际用户界面
现在我们开始
Apple软件支持40多个本地化版本
每一种语言对我们来说都是挑战
今天我们主要讨论
软件支持的两种从右向左书写的语言
它们是阿拉伯语和希伯来语
这种语言是巨大的挑战
在开发应用时
这是因为书写方向与众不同
那么为什么我们要单独讨论这两种语言呢？
在中东有超过4亿的人口
这是一个巨大的正在成长的市场
就在去年 我们在阿拉伯联合酋长国开了两个Apple Store
图片是Apple Store的开业分别位于阿布扎比和
迪拜...
仅几周前 我们在阿拉伯联合酋长国首次开放了Apple.com
网站的阿拉伯语版本
这确实非常令人激动那么这对你来说意味着什么呢？
作为开发者你在这个市场获得了更多的机会
为用户开发语言本地化的应用非常重要
因此在这个演讲中我们主要谈论从右向左书写的语言
如果你想了解更多的关于语言本地化应用的设计
请查阅这两个演讲
“兼收并蓄的应用设计”主要探讨
应用的人机交互界面
以及“国际化最佳实践”
如果你想学习有关应用国际化的知识
去年 在iOS 9上
我们扩大了国际化支持
全面支持从右向左书写语言
在那以后
在watchOS 2.1中加入了希伯来语和阿拉伯语的本地化语言支持
今年...
我很高兴的宣布我们一直在致力于为这个市场重新设计macOS
现在我想带你们浏览一下
在这个演讲中我们要经过的议程
首先Joaquim要简要叙述一下APIs
它们是在去年引入的
然后他要讨论一下在iOS 10中的图像处理的最新进展
以及如何评估布局方向
最后他会探讨watchOS支持的新功能
然后我要讲述macOS的新功能
在文本支持中的最新进展和你如何
在应用中正确显示混合文本
现在让Joaquim来讲讲iOS
Joaquim
好 谢谢Sara
早上好!谢谢大家的光临!
我叫Joaquim 首先让我
讲讲iOS
刚才Sara讲过去年在WWDC...
我们宣布了在iOS整个平台上全面支持从右向左语言的界面
当这些语言的用户运行应用时
他们希望用户界面适应这些语言的特点
UIKit为你做了大量的工作它的控制层和视图层
使从右向左语言的应用运行正确
在视图中管理界面设计可以通过自动设计来实现
而且还有高层次的组件
例如iOS 9中新添加的UIStack视图在去年也发布了
它可以让你很容易地为用户界面建模和维护你的界面
它可以容易实现嵌套使用多个水平和垂直视窗
栈视图的优点是
它可以为你管理自动布局约束
尤其对于从右向左语言来说
它可以管理开头和结尾的约束
它包括左和右两个属性
文本可以自动左右调整
当在从右向左的语言中运行的时候
重要的是要注意
正是因为这些语言是从右向左书写和阅读的
这意味着并不是应用的每一个控制都是
严格遵守这些语言的书写方向
还有细微的差别和例外情况
在为这些语言设计应用时要铭记在心
一个例子是和重放有关的重放用户界面
例如视频、音频和时间轴的快退和快进
它们的布局方向应该保持一致
另一个例子是我们称之为空间界面
它可以是一组控制
它们没有与它们有关的特定方向性
像左右这样的文本对齐
在所有的语言中显然都应该保持一致
还有一个例子是指南针
那些在实体或者地理上有对应物的东西
应该保持不变
东西南北不会根据左右而改变
iOS中有语义内容属性有助于你管理
并且确定和调节
每个视图和子视图的设计流程
它是枚举类型 正如我刚才说的它是建立在UIView上的属性
它包括我刚才讲到的所有的情况
有重放、空间用户界面
还有自动的强制方向转换
另外还有未确定 它是默认值
这可能是大多数视图所属的类别
因此如果你想更详尽的了解它们
或者你是从右到左用户界面设计的新手
我建议你查看去年的演讲
对国际用户界面的最新UIKit支持
它详细介绍了这些概念
并且讲解了一些新的API
或者不很新但是是我们新添加到iOS 9中的API
用于从右到左用户界面
刚才简要介绍了iOS的布局中现有的功能
下面我要介绍图片
用于从右向左语言的图片很有趣
它们可以分为三类
第一类是通用图片
这可能是大多数图片所属的类别
它们包括插图和图标
它们不需要考虑语言书写的方向
任何情况下它们都是一样的这对你来说当然是很熟悉的
例如常规用户界面图片或者在图片查看器和Interface Builder上为图片命名
第二类是有方向和它们关联的图片
无论它是导航箭头
例如导航条中返回按钮
或者详细展开按钮
或者界面布局表格的单元格上的展开箭头
或者像本例中 简单的文本展示
这些图片应该按照从右向左来展示仅仅翻转这些图片
就会生成用于从右向左布局的正确结果
现在让我们翻转图像现在圆圈处在了正确的位置
在iOS中你可以通过使用imageFlippedForRightToLeftLayoutDirection来实现
我们把它称为基于界面图像的方法和它的返回对象
当在用户界面图像视图中展示的时候它会自动纠正从而正确显示
如果这个应用在从右向左语言中运行
最后...
第三类是和方向密切相关的图像
它们要更加复杂
仅仅翻转图像会产生
错误的从右向左结果
在本例中是和前面相同的项目列表
但是项目符号是对号而不是圆圈 当我翻转图像的时候
对号现在处于正确的位置
但是对号也被翻转了
而在这个从右向左的例子中对号应该和原来保持一致
此时我需要的是两个单独的图像
每个图像用于一个布局方向
我可以为从右到左语言调节图像
现在它显示正确了现在我有两个不同的图像
到现在为止你在iOS上
实现了在运行时正确的展示图像实际上是进行了运行时检查
你要使用语义内容属性API
来检查布局方向
并且在运行时从文件库中加载正确的图像
在iOS 10中我们稍稍改变了一下
我们不赞成
为从右向左布局进行图像翻转
为此我们引入了一个新的概念
就可以让这三种图像正确显示
我们使用常规用户界面图像或者Interface Builder中的图像命名
在Xcode 8中引入全新的方向图片资源库
它位于资源目录中
谢谢！
这意味着什么？
在Xcode中有你的图像资源库
现在你有了新的概念和新的属性你可设置它们
它被称为方向属性你可以设值不同的值
对应前面的幻灯片中提到的概念
一张图片可以有一个固定的方向
你可以指定一张图片用于一种布局方向
也可以翻转适用于另一种布局
由从左到右布局到从右到左布局转换或者相反
或者你也可以简单的指定两张不同的图片
在你的资源目录中两张图片适用于不同的方向
这些是图片资源库你可能已经熟悉了
其它种类的图片转化技术
例如不同的像素密度或者用于不同平台的图片
实际上它们是同一个概念你所要做的只是
在Interface Builder中设置图像或者使用用户界面图像加载指定的图像
现在我想给你们做个演示
好...
这是一个很简单的应用...
让我运行一遍展示一下它的界面
它的名字叫旗...
国际模式当然它是一个猜国旗的游戏 耶
这个游戏比较直接多人玩很有趣
在这里你只看到一个非常简单的用户界面
这是要猜的国旗
底部有一个显示按钮
谁知道这是哪个国家？
我知道现在是星期五早上9点是吗？
对 好的 我听到了
我听到很多人说法国 很好
好 谢谢你！
上面有两个箭头 一个向前
指向下一个问题一个箭头返回
这是通过自动布局约束实现的
这也是一个垂直栈视图
谁知道这是哪个国家？
噢 哇 好 很棒 听听 好
好极了 是这是我的祖国 葡萄牙
好 现在你们明白了 对吗？
现在我要给这个应用添加对从右向左语言的支持
现在我不会讲这种
从右向左书写和阅读的语言
然而如果我想看应用的界面是什么样的 不必一定要会说这种语言
Xcode允许我
在自身模拟一个从右向左的环境
所以我要做的仅仅是编辑一下方案
在这儿 顶部有编辑方案
出现了下拉的列表 已经选择了运行
在顶部有选项标签
这儿是应用语言重载
这儿列举了本应用支持的本地化语言 现在只有英语
但是我也能选择从右向左的假语言设置
下面运行应用
用我的开发语言 英语
但是它让用户界面认为
它运行在从右向左的语言环境中
让我这样设置一下 关闭
重新运行应用
好
让我们再次运行这个游戏
我们很快就能看到一些变化
导航条是正确的
后退按钮的位置正确
并且我的用户界面看起来和以前大致相同
除了你可能已经注意到了
箭头的方向看起来不对它们指向彼此
它们的位置是正确的前进按钮在左面
对从右向左语言来说是正确的
但是图像本身没有适应变化做出改变
现在我需要改变这种情况
在Xcode 8中 我需要做的是到我的图像资源库中
我需要继续在此选择它们
注意 我有两个不同的图像
一个是后退箭头 一个是前进箭头
我要到检查工具中
选择新的方向属性
把它从固定图像改为从左向右图像
翻转为相反的布局方向
同样...
前进箭头你可以看到
是从左向右图像的翻转而不是固定方向
现在再次运行我的应用
让我们看看它的界面怎样
酷 开始游戏
好 这就是我要做的
它完整的支持从右向左语言环境
不需要额外写任何代码
就实现了从右到左用户界面的设计
自动布局、栈视图和现在的图像资源库
为你的程序运行做了大大的提升
对了 还有一个重要的组件
页面视图控制器会提供支持
它会管理前进和后退的姿态
因此我也不必为此多费心思
这就是关于图像资源库的演示让我们回到幻灯片
太酷了！
刚才简要介绍了新的提供方向支持的图像资源库
现在你也可以完成这一切
如果你的图像没有直接储存在文件库中
比如你从远端的服务器上获取内容
并且它们具有方向性
而且它们要在你的用户界面上显示出来
对于没有储存在本地的图像
你可以使用UIKit中的特征集合来关联这些图像
我们也有基于用户界面图像的方便方法
让你指定一个图像是另一个图像的相对物
并且它应该被翻转以后
再添加到图像资源库中
这被称为imageWithHorizontallyFlippedOrientation方法
如果我用代码展示给你的话可能更简单一些
这就是我要做的就是创建图像资源库
在这个例子中我得到了一个从左向右图像
从远端资源 比如服务器
并且我的从右向左图像是同一个图像
但是被水平翻转了我使用了用户界面图像上的新方法
然后要注册两个图像
对应每个布局方向
使用从左向右和从右向左的特征集合
你可能已经使用或者编写过相似的代码
你正好得到了和特征集合兼容的图像
用于图像视图
你不必做出改变因为再说一遍 它们是相同的概念
我们只是在它之上建立了一个新的方向属性
这就是方向图像在Xcode 8和iOS 10中的新概念
同样在watchOS和macOS中也是这样
正如你前面看到的 我们有了一个新的属性 叫做布局方向
这是UIKit中新的UITrait集合
因为它是新的属性不要忘记以下几点
在评估iOS中的布局方向时
用这个新概念
举个简单的例子我有一个UIView子类
在布局子视图上进行定制布局
用这个简单的蓝盒子来表示
由语义内容属性告知
它是应该是从左到右还是从右到左
这时你可以使用我们的API
现在如果没有指明语言环境
语义内容属性服从应用的环境
它可能属于特征环境
特征环境是一个特征集合
或者可能是这个应用的通用用户界面布局方向
现在实际上你的用户界面视图应该仅仅关心
它是应该从左到右还是从右到左 就是这样 好
这相当复杂但是也确实很快
我很高兴的告诉大家在iOS 10中你只要这样做就可以了
通过使用基于用户界面视图的新属性
它是一个计算属性叫做effectiveUserInterfaceLayoutDirection
它会考虑所有的这些概念
并且立即告诉你应该
以从左向右还是从右向左布局
如果你在布局中根本没有使用UIKit或者UIView
例如你使用SceneKit视图或者SpriteKit视图制作游戏
但是你仍然想利用这些视图控制器概念
你可以做到的使用这些基于用户界面视图新的类程序
给你同样的
和语义内容属性有关的同样的布局评估
这就是在iOS中的新进展的简要介绍
我们看到了全新的方向图像资源库
可以和Interface Builder以及常规用户界面图像一起使用
不需要额外写任何对从右向左语言支持的代码
对另外一些图像也是如此
这些图像没有直接储存在文件库中
结果是我们不赞成在
iOS 10中使用imageFlippedForRightToLeftLayoutDirection
我们也讲解了基于用户界面视图新的方便属性
用于决定定制布局中的布局方向
还有一个类程序
使你在其它语言中达到了同样的效果
这就是iOS的情况现在我要讲讲watchOS
watchOS 2.1中
添加了阿拉伯语和希伯来语作为备选系统语言
对于你的应用来说这意味着watchKit现在能够识别从右向左语言
所有watchKit元素能正确的运行
在选择阿拉伯语或者希伯来语的时候
它的API和iOS的相似
使你能够调整每个组或者界面对象的实例
重要的是也要注意 刚刚说过
很自然的人们认为
我们在iOS中看到的很多设计概念也应用于Watch
推送和弹出界面控制器也有方向
应也为从右向左语言环境下做出改变
你应该记住这一点如果你的用户界面
也要这样显示
在水平布局中某些元素的优先级更高要优先显示
或者按顺序排列表格视图单元格中的图像
或者标签有顺序都应该改变以适应这些变化
对于Watch来说有一个特别的事物那是时间的思想和概念
具体来说就是顺时针和逆时针
再回到那些细微差别和例外情况
如果你有辐射状的、顺时针或者逆时针的用户界面
在布局方向中它们应该没有变化
这是需要谨记在心的一点
除了刚才我们讨论过的概念以外
你用API如何实现这个呢？
因此正如我刚才说的
运行在从右向左的语言环境下时所有界面对象显示正确
这包括按钮、滑块和开关
除此之外
方向和排列的概念也是自动改变的
这就是说水平界面的方向
和它们的排列以及
和父类有关的WatchKit中对象的排列也相应的改变
在上面的例子中 有一个简单的应用
上面是水平排列的图片 左对齐 向左
底部是垂直排列的图片 左对齐
如果我在希伯来语中运行这个应用左面都转移到了右面
注意水平界面的元素的排列顺序也发生了变化
我们有语义内容属性和iOS一样
在我刚才讲过的实例中
帮助管理各个界面、界面对象或者对象组
它的功能和其它属性的功能一样简单
在WatchKit对象中你可以设置这些属性
如果你没使用WatchKit来规划你的用户界面
而是使用SceneKit或者SpriteKit在WatchOS 3中它们还是很新的
你仍然能够评估
布局方向 如果你记住语义内容属性的话
在这儿我只是使用一个类程序就得到了方向
用于界面设备 一旦我有了它
我只是检查一下它是从左向右还是从右向左
这是对watchOS 2.1中新添加的特性的简要介绍
它和iOS的思想和原则是一样的
所有watchKit元素做得很好使界面显示正确
而不需要额外的工作
任何在定制的用户界面或者元素中你也应该考虑到这一点
当然要记住我刚才提到的微小差别和例外情况
以及你可以使用语义内容属性
在运行时帮助决定布局方向
现在我要把时间交给Sara
讲解一下macOS和如何处理双向文本
非常感谢！希望你们度过一个愉快的周五 谢谢！
谢谢！
首先谈谈macOS
正如其它平台iOS和watchOS
对于macOS来说概念是完全一样的
如果你使用标准AppKit控制层
你会得到视图的准确呈现
当你在从右向左环境中运行你的应用时
现在我想带你们浏览一下系统的一些实例
展示一下动态控制是如何运行的
首先从我们称之为系统层控制开始
我们把它称之为系统层控制是因为布局
遵循用户运行的系统语言
而不是你的应用布局方向运行的
让我们看一些实例可能更清楚一些
让我们看一下这儿的菜单条
我的系统在从右向左环境中运行
正如你看到的
上面的菜单条从窗口的右边开始
而且菜单内的元素也是从右向左扩展的
这个概念...
也适用于NSWindow
通过设计
我们决定使窗口控制保持一致
在所有应用中不管你的应用有没有进行本地化
如果你有自己的逻辑并且你进行自己的定制控制
你需要考虑到这一点并且升级你的逻辑
即使你的应用不支持阿拉伯语或者希伯来语本地化
下一个 应用层控制
这是应用层控制
应用的布局方向遵循你的应用语言
例如NSTableView
这是一个任务监控应用的截屏
我们使用栈表视图
你可以看到表视图的列自动改变了方向
当我们在阿拉伯语中运行应用时
另一个例子NSCollectionView
来自搜索应用
集合视图布局遵循从右向左语言
还有一个例子
NSScrollView用了相同的概念
我们也转换了滚动视图中滚动条的位置
这将避免和应用的内容重叠
注意如果你在应用中使用页面视图
它的滚动条的工作方式略有不同
WebKit会查阅你的网页内容
然后评估它的HTML属性
然后基于此来确定滚动条的位置
例如我运行了Safari的英文版
我进入了英文版Apple.com
看看我的网页内容
我会得到
方向的属性被设置为从左向右
我们把滚动条设置在右边
如果我采用同样的设置
但这次我进入了阿拉伯语版的Apple.com
看看它的内容
现在我的内容是阿拉伯语看看这儿的方向属性
它被设置为从右向左
现在我们转换了滚动条的位置
这些是WebKit控制和AppKit控制的例子
现在我想谈谈API
我们在上一个例子上看到
WebKit控制和AppKit控制略有不同
在WebKit中我们提供了新的API
叫做userInterfaceDirectionPolicy
我刚才提到过网页的内容被设置为默认值
但是如果你愿意你可以改变这个值
例如 你的滚动条遵循系统语言
而不是网页的内容
你可以使用系统而不是内容来改变它的值
下面让我们谈谈AppKit API
首先简述一下
如果你使用标准AppKit控制层你什么也不用做
所有的工作都是自动完成的
现在你可能有特殊的设计
你想自己布局你的视图
我们强烈建议你使用StackViews和GridViews
GridViews是macOS新添加的
这些工具都非常强大
因为它们在底层为你建立自动布局约束
它们也使用开头和结尾约束
它会自动翻转视图
当你在从右向左环境下运行应用时
如果不使用StackViews或GridViews 就使用自动布局
如果你对此感到很陌生前几年关于这个有很棒的演讲
今天下午还有一场演讲
叫做自动布局的最新进展去看看吧
最后如果你使用基类方法中的storyboards
我们也为你做好了文本的翻转
此外 在NSView中有一个API
让你获取和设置视图的布局方向
举个例子 我有一个横幅滑块
它有两个值 左和右
我想让滑块和本地化语言保持一致
这样做是合理的左应该总是待在左边
右应该总是待在右边
这完全没有问题 如果我设置
滑块的布局方向总是从左向右
我刚才说过在NSView中有一个API
让你能够这样做
默认值设置给NSApp.userInterfaceLayoutDirection
但是你可以重新设置为左或者右
取决于你想怎样设计视图
现在谈一下图像
在刚才的Joaquim的演示中
我们引入了方向图像资源库
它位于资源目录中
在macOS中也有资源目录
它们和iOS以同样的方式工作
在这儿我就不详细讲解了
但是有时
在应用文件库中没有相应的图像
而你想从远端 例如服务器中得到相应的图像
在NSImageRep中有一个API
让你能够实现这个功能用代码注册你的图像
让我举个例子看看它是如何工作的
我刚才说过
有时你的图像储存在另一个地方
你想注册它们
首先你需要做的是创建从左向右图像
通过使用NSImage API
有了图像以后
你需要把布局方向设置为从左向右
对于从右向左图像来说也是如此
但是这一次你需要使用NSImageRep API
当你有了两个图像以后
你需要注册从右向左图像展示
和从左向右图像展示这可以通过使用其它展示API来实现
当你注册了两个图像以后
在运行时加载正确的图像就可以了
无论你运行应用
在从左向右还是从右向左环境下
最后
我们为普通AppKit控制层设计了新的方便初始化工具
为一个附件 例如它会设置...
对齐属性和自动布局属性
完全正确无需你操心
对于NSButton
它会翻转图像 复选框的位置
单选按钮的位置这一切都是自动进行的
现在我为你们做个演示
来总结一下本次演讲的内容
好
太酷了！我从Joaquim的演示中得到启发 创造了一个记分牌的应用
当我们进行比赛的时候可以用它纪录分数
这儿有一个简单的...
应用 你可以在视图控制器中看到它
这儿仅仅是一个表格视图
我已经设置好了自动布局约束
在表格视图单元格中有一张图片
一个文本域 一个下一个按钮非常简单
这儿我用StackViews
来布局表格视图单元格中的元素
我不需要关心设置自动布局约束
因为文本视图已经为我做好了
在底部
有一个标签我可以在那儿更新最高分
和最好玩家很简单
现在我需要做什么呢？
我将模拟从右向左环境
这可以在我的应用上直接进行看看是什么样子
好 我要进入Scheme Editor
进入应用语言
选择从右向左的假语言
而不是系统语言
我要重新编译运行我的应用
现在正在编译 好
你可以看到没有写一行代码
仅通过使用storyboard、StackViews和自动布局就实现了它的功能
就是这样
现在我的应用在从右向左环境中看上去很好
下面我要做什么呢？
我要回到我的代码
并且...
我要运行我的应用 这一次
用系统语言而不是从右向左的假语言
这次要在英语环境中运行应用因为系统语言是英语
现在再次运行我的应用
为什么我要这样做我只是想向你展示
国际用户界面的另一个功能
我的应用在英语中看起来也很棒
现在我要加入游戏
我要先添加一个游戏者
我要点击这儿 添加新的游戏者很有趣
我想用我的母语写我的名字
继续 修改键入的语言
使用阿拉伯语而不是英语
好 我用阿拉伯语键入我的名字...
好
我其实也很擅长猜国旗
我会在游戏中取胜我不会浪费时间
现在我要更新我的分数
好的...
好 看看发生了什么
仅仅是更新我的名字
我的标签就彻底打乱了因为它跳到了右面
现在标签上是“ ！得了最高分12 Sara”
这看上去不对
下面
我要展示如何解决这个问题
你怎样才能使文本方向正确呢？
让我们回到幻灯片
刚才我们在演示应用中看到了仅仅是用阿拉伯语输入我的姓名
就打乱了文本的呈现
现在看看如何才能修复这个问题
在应用中呈现文本非常重要
无论你的应用是否支持某种语言的本地化都没有关系
即使你的应用只支持英语
你的用户仍然可以用其它语言阅读和书写内容
当涉及到文本的时候
重要的是要记住文本排列
和文本方向是两个不同的概念
例如在这儿 有一段英文片段
它是右对齐排列 很好它看上去不错
因为你可能需要那样设计
这没有打乱文本的展示
同样在这个例子中这一次是左对齐排列
但是我把书写顺序改为从右向左
这就会打乱文本的呈现
在本例中你会看到感叹号的位置不对
让我们再展开一点
在我们所有的平台中默认都是横向对齐
如果你没有更改它的值
在大多数情况下我们会得到正确的显示
我们讲讲文本方向它更复杂一点
这儿我要简要
介绍一下文本引擎的算法
如果你想了解更多的关于Unicode的算法
你可以查阅Unicode.org中的详述
我们从最简单的基础开始
Unicode字符有三种类型
一种是严格从左向右字符
例如
我们所熟悉的有拉丁语、汉语或者日语
一种是严格的从右向左字符
例如阿拉伯语、希伯来语、波斯语或者乌尔都语
还有一些字符根本没有方向
我们把这些称为中立或者非严格字符
例如 空格
文本引擎是如何决定
某个片段的方向性的？
文本引擎判断首先出现的严格Unicode字符是什么类型
就是这样
如果是严格从右向左字符
整个章节就遵循从右向左方向
如果是严格从左向右字符
整个章节就遵循从左向右方向
让我们举个例子看看它是如何工作的
现在我把演示应用中的标签单独取出来
%@得了最高分
我不知道在运行时%@会被什么代替
因为用户可以用键盘输入任何字符
让我们把问题变得简单些
假如%@被拉丁名字代替
此处第一个字母是A
它是拉丁字母 严格从左向右字字符
因此章节的方向也是从左向右显示正确
现在假如这个变量被阿拉伯名字代替
第一个严格字符是阿拉伯字符
使整个章节变成从右向左
这就是为什么文本的呈现被打乱了
这是错误的
那么现在什么是正确的显示呢？
我希望文本这样显示即使我的名字是阿拉伯人名
我希望它在左面并且章节的其它部分
也从左向右显示
所以最好的情形是这样的
它能读取变量并且把它隔离开
让名字自己按照一定的方向排列
而不会影响章节的其它部分
用Isolates支持这是可能的
Isolates是最新的双向Unicode字符
在Unicode 6.3中引入
并且在我们所有的平台中的文本引擎都支持
我刚才讲过
Isolates允许部分文本隔离开
使首先出现的严格字符遵循一定的方向
而不影响周围的文本
我高兴告诉大家你不需要
自己插入字符就像具体问题具体分析
因为如果你使用localizedStringWithFormat
它们能自动实现这个功能
因此localizedStringWithFormat会自动隔离%@
在运行时它会做出正确的选择
现在 回到演示应用
仅仅通过一行代码就能解决前面的问题
让我们试一下
好 太酷了
现在我要回到这个视图控制器
在这儿我更新了我的标签
为了节省时间
我已经写好了代码使用带格式的本地化标准字符串
而不是用正常的字符串
我打算继续给这个正常的字符串加上注释符号
对于使用localizedStringWithFormat的一行则取消注释
再次运行我的应用
看看问题是否解决了
好 正如你们看到的 问题解决了
现在我的名字在句子的左边
我可以正确地读出它
再看看对于英文名字是否起作用
看看 如果我把名字改为Rana它起作用了
再看看阿拉伯名字 也没问题
这就是我们的平台的Isolates支持
让我们回到幻灯片
好 总结一下
在本次演讲中我们引入了方向图像资源库
现在它能更容易的支持不同的图像
用于从左向右或者从右向左本地化设置
在iOS watchOS和macOS中我们为你设计了新的API
自动布局是非常友好的
如果你想布局你的视图或者支持其它语言的本地化
我们也改善了文本引擎
通过支持Isolates的Unicode字符
有了这些改进
作为开发者的你能更容易的开发软件 开拓新的市场
如果你需要更多的信息请参阅developer.apple.com
那儿有我们的演讲谢谢你们的到来！
如果你错过了一些演讲那儿还有相关的演讲
请查阅它们 它们很棒
祝你们度过愉快的一天
希望大家在WWDC余下的演讲中过得愉快 非常感谢！