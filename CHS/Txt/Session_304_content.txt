构建商业和教育应用的最佳实践
下午好
我叫David O'Rourke
谢谢大家
我们本周的会议已经进行到了一半
大家感觉怎么样？
没浪费大家的时间吧？
我在上台前有人跟我说了话所以就没有压力
不过很明显你们在这个展示上点了太多次的收藏
所以
非常感谢希望值得大家的每分每秒
也确实如此 我们在这上面投入了很多功夫
我想讲一下这次展示将要说的内容
我们会涉及到最佳实践
这次会议对大家来说会是很容易的
你可以把笔记本放下来这里不会有很多的示例代码
本次会议是给你启发
像是在你未来应用的哪方面投入
让你的应用程序拥有更多的销售以及适用人群
目标市场越多越好
本次展示中我们注重两个市场
那就是商业和教育
透露一下 我们会讲很多关于Shared iPad的内容
所以开始吧我们进入日程
我们会讲讲现代应用设计实践
客户可以期待什么样的内容
之后我们会再快速概述一下Shared iPad
它在后台是如何工作的？对你的应用会有怎样影响？
你需要采用哪种技术？
这是我的第三点
我们会推荐一些特定技术
幸运的是对你来说大多数技术
已经在本次会议之前说了或在本周晚些时候才讲
所以你能以本次演讲为起点
直接去听那些高大上的细节
如果你受到启发去修改你的应用
这里有新的机会去增强你的应用
其中一个我很期待是在展示的结尾
我认为你也会跟我一样因为它也会
给你巨大的机会将应用用在你未曾预料过的方面
我们来谈谈让你的应用程序现代化
这差不多是客户的最基本期待
我们跟很多客户谈过他们给了很多反馈
很奇怪的事是他们会过来说
为什么某某应用没有使用这个Apple技术？
这不是深入的见解不过我只想提醒大家
你要跟上潮流保持最新
因为客户会从其他有技术的
开发者那里下载其他的应用而且这会带来一点不连续
或者不好的比较
如果你的应用没在使用Apple提供的最新最棒技术
我认为我不需要跟在座的任何开发者讲
这就是为何你们参加 WWDC 来探寻新功能
不过作为一般生态系统问题
保持最新对你和客户都有利
而且这是你客户的期待
一些示例技术这决不是
大家可采用技术的完成列表
自动布局
这还是一项比较新的技术已经出现在数个iOS版本中了
但这真会帮助你做出通用的应用二进制文件 可以在iPhone
iPad上使用 而且很有助于布局旋转
如果投入时间自动布局会替你解决很多的事情
这还有助于从左到右文字
我以前管理桌面通讯录然后我们转移到自动布局
我们免费实现了从左到右书写这是长期的问题
或从右到左 或不同的语言方向 免费做到的
这在桌面通讯录应用上是个很长期的请求
自动布局在内部帮助了我们 它也会帮助你们的
无障碍性
我在午饭之前跟之前的同事谈过话
确保你的应用是无障碍的
这会帮助那些原本无法使用你的应用的人
当他们知道终于能使用应用时他们会相当有感触的
因为你将应用提供给那些人
在有无障碍性之前是无法使用这个应用的
本周晚些时候会有一些优秀的无障碍实验室
如果你想深入研究
Swift
这是最新 最安全最快速的运行时
如果着眼于Swift思索如何采用Swift
本周请到Swift实验室我相信你会为之震撼
对这个语言让我惊叹真的很震撼
我不需要告诉在座的人去采用Swift
不过这是另一项新技术
你应该在上面投入一些
AirPlay 尤其在教育和商业环境
会议室主持人后面的大屏幕
人们想分享内容
如果你的应用有空间采用AirPlay 那就这样做
如果使用AirPlay 你可以让你的应用看起来更有趣
当你在会议室进行分享时能够隐藏一些屏幕上的元素
考虑AirPlay时 你要将大屏幕作为应用程序的目的地
你可能会想稍微修改一下UI
或者有一种模式让用户添加内容
或者你就直接投影AirPlay
最后是3D Touch
这可能是最新的技术最新的硬件
会带来非常多的机会我每天就使用3D Touch
真的让OS变得更迅速更快捷
无论什么时候我进入应用用力按 然后没有
什么东西在我用力按的时候出现
这就有点不连续了会稍微扰乱我的节奏
所以要留心
我想强调一下这些不是完整的技术集合
只是一些最新技术的例子
有些应用会在这上面落后然后这会影响
你的应用在商业和教育上的营销和销售
所以我们谈谈
一项与我有很大关系的功能我与一支优秀团队
共同创建的 在iOS 9.3中推出了Shared iPad
这对于开发者和教育领域来说这是极为重大的改变
原因是我们可以在学校中部署最好的移动平台iPad
现在可以有多名学生分享一个iPad
在一整天的不同课程中
这给在座的开发者带来了巨大的市场
因为若你能让应用在Shared iPad环境运行更好
你的应用会大量地在学校中授权使用
多到你之前无法想象的程度
我们谈谈Shared iPad
这是在iOS 9.3上推出将会继续在iOS 10中支持
其主要目标是让学校购买推车
多少人见过iPad推车？
有点炫酷 我在18个月之前第一次见过一个
他们将60个iPads装在小推车中
推进教室 学生将iPad拿出来 使完 放回去
之后推车又去了另一间不同教室
iOS 9.3之前版本没的功能
就是让学生将个性化的体验
带到每个iPad上
这可通过Shared iPad实现且做得更加有效
学校买更少的硬件并将更多的钱用于软件
我想重复一遍他们可以花更多的钱
在你的软件上 因为他们从我们这里买更少的硬件
所以
你的登录方法是使用新的AppleID叫Managed ID
这是由学校所管理的
他们设置自己的用户名单他们将设备绑定到自己的组织上
只有他们的账户可以登录iPad
非常炫酷
如果在我的会议之前你没看Todd的会议
我推荐你通过视频源回顾一下
他讲了很多ManagedApple ID的内容
最后
本次展示的主旨可能是
Shared iPad使用环境需要数据存在云端
我们有推车大家都明白推车吗？
学生在周一将推车推出来拿出iPad 使用iPad
而在周二 当推出推车时他们拿出的可能不是相同的iPad
如果他们的数据没有通过你的应用推送到云端
他们不会获得与周一相同的体验
他们在周二会有新的iPad体验而这会让他们感到沮丧
所以我们会谈很多Apple所提供的技术
及Shared iPad的工作原理
让我给你简短概述一下
我推荐你回顾Todd的演讲
有很多与此有关的现场演示
我有一些静止幻灯片显示着登录的样子
所以学生将iPad从推车上拿出 会看到年级
我将演示的学生是Mia她是第四
在底部的第四排
过去几周中与Mia相处了很长时间
将这个幻灯片做好所以Mia按下她的图片
Mia写上密码
当她完成填入正确的密码之后
iPad就在准备
如果她之前使过这个iPad这个屏幕会
更快地出现
如果她第一次使用这个iPad
这可能会时间更长因为要从云端
下载数据来做好准备
当完成从云端下载数据或者初始设置数据
Mia会在整节课上使用iPad
她使用Pages和Garage Band
而且整节课她将iPad作为自己的在使用
当Mia用完了
Mia登出
iPad会用这个机会将数据推送到云端
发送任何在课程中没有推送到云端的数据
我们会稍微谈谈能做到那样的Apple技术
Mia的所有数据必须在云端才能让这一切运作
Mia使用的iPad可能是不同班级传过来的
我的孩子一天有六节课
他们可能先是科学然后是数学
可能每节课都会配有不同的推车
因此他们的数据需要存储到云端
这样每个iPad才会有用
即使他们使用相同的iPad
在全天的课程中或是整周的课程中
数据可能会被iPad删除因为它可能要将用户
从iPad删除给新用户留出空间
在整周的课程中登录使用
所以iOS提供
四项你可以采用的核心技术我会在之后展示
我会告诉你第五项技术
你应该采用如果你不使用
任何iOS Cloud技术
不过我们首先
先回顾iPad的预期
所以
有很多Apple内部以及此次会议的工程师问我
我们跟很多人谈过所以什么是Shared iPad？
直白简单来说用户切换
我们不允许多个用户同时登陆到iPad上
在任何时候都只能有一个活动的用户会话
如果一个用户要登入iPad那另一个用户就要登出
所以就是用户切换
这对应用开发者来说意味什么？
你会看到就是一次性设备
你不知道处在Shared iPad环境中
你不需要知道
对于应用开发者来说没有什么变化
你不需要加入其中不需要做任何定制
只是将你的数据移入云端
注销
这就等同于
将iPad关机
你的应用关掉了没有在前台运行
这就像未使用分享的iPad
当用户将iPad关上
如果应用运行正常
在电力循环之间
你的应用会在用户登录和登出时在Shared iPad环境中运行良好
用户数据缓存在设备上
在内部 我们就跟大家讲
这就像易失性缓存
当用户登录后就不是易失性了
而是在用户登出之后
所以数据可能在任何时候从iPad上删除
不过当你登录上了这就是一次性iPad
数据不会从你眼皮底下消失
而且缓存有一些很明显的性能上优势
离线也能工作
我们预计这些iPad会在户外教学中用上
而且当iOS认为必要时数据会被iOS清除掉
我们希望你将数据移动到云端 这样Mia
在全天中使用不同iPad的时候
一整周使用不同iPad时
在所有这些不同的设备上这一学年的体验都是一致
我们提供的iCloud技术
或者我们提供的四项关键技术分别是CloudKit
iCloud Drive
NSUbiquitousKeyStore
KeyChain
作为附属的NSURLSession
我们会在稍后的展示中谈谈它在名单上的原因
你确信Shared iPad的市场十分巨大
应该何时传输数据应该何时去做
这里的目标是你将数据传输到云端
当应用还在前台运行时
随着Mia作出变更你就将变更写入CloudKit
更新你的云端文档
做任何合适的事情
你可以在登出过程中同步数据
且你应该在收到应用程序前同步数据
退出活动事件
不过
一般我们不想将所有的数据同步
放在登出进行
这会使登出耗时过长
所以你应该时刻同步你的应用
不应该将数据打包起来之后再同步
因为如果Mia登出了那就没有之后了
如果你采用iOS技术那这是可以的 例如CloudKit
Cloud DriveNSUbiquitousKeyStore KeyChain
Mia的数据在她没有登入时就可以同步
不过
我们希望她能干净退出没有任何废数据
我们来稍微谈谈CloudKit
我想CloudKit是在iOS 8上推出的 记错的话请指出来
你可以同步数据这是自动处理好的
如果你采用CloudKit一些非常
重要的东西就是LongLivedOperations
这些是CKOperation类别的子类别
开发者资料的链接在屏幕上
这很重要的若你想让CloudKit同步数据
当应用不在前台运行时
我们有过这个功能而且不是Shared iPad上特有的
不过我们利用了该功能
使其还成为同步数据所使用的机制
当Mia未在设备上登录时
所以若你将CloudKit文档移到LongLivedOperations
你可以使用CloudKit同步数据即使你的应用未在运行
或在前台运行或当Mia已经登出之后
所以
如果你要应用CloudKit而且你要使用它
我极力推荐你投入进去并与CloudKit的工程师协作
在这一周的时间里来了解LongLivedOperations
采用LongLivedOperations并让你的应用程序
兼容LongLivedOperations
云端文件也许是最易采用的API
对于基于文档的应用程序例如Keynote或Pages
你需要做的很少每个Managed ID都有iCloud Drive
iCloud Drive自动同步
如果你已经是基于文档的应用程序
你就可以踏入教育领域了你要做的一切都已经完成了
Mia会在你的应用上拥有所有文档
在每次设备访问时都可使用
简单容易
如果你是基于文档的应用程序那这是首选的做法
这两项技术都是按需同步这是非常重要的
Mia可能会有几GB的数据存储在CloudKit中
不过她只会将她所访问的数据下载到设备上
所以设备不需要下载Mia所有的2GB云端数据
才能让她使用你的应用如果你的应用只访问
存储在CloudKit中几个MB大小的数据
只有你的应用数据会被下载到设备上
当你的应用第一次在那个设备上启动时
这是非常有效的如果你从大规模考虑这件事
美国的教室平均有30到40名学生
你有30台iPad要获取数据
如果全部都在登录时获取完整的2GB数据
这对大多数学校的网络连接来说都很难应付
所以这是一些最佳的技术
它们只会缓存你使用的数据
以及本地存储的数据
它们是世界顶级的云端技术
你可以整合到你的应用中并让应用打入这些重要的市场
CloudKit还适合大型数据集
我不知道这个大的定义是什么
我推荐与CloudKit那些人协作
看看你的数据集是不是太大
我认为他们不会推荐使用iMovie
可能吧
可能对于更小的数据集会没问题
我特别从CloudKit主管工程师那里得到了这句话
这个会与下个幻灯片中的技术形成对照
就是NSUbiquitousKeyValueStore
这是专门用于更小的数据集
除非你在做视频编辑应用程序
你不需担心放入CloudKit中的数据集大小
这不意味着你可以无拘无束
为性能做一些傻事
不过大多数应用程序会存储的数据
是大小合理的CloudKit完全能够胜任
我们来谈谈NSUbiquitousKeyValueStore
你需要有授权才能使用它
它是NSUserDefaults的直接替代
若你已在使用NSUserDefaults
你已经准备好了 很容易过渡到NSUbiquitousKeyValueStore
其中 你的数据是存储在云端的
应用启动 将键值对保存在NSUbiquitousKeyStore
应用退出 重新启动数据从云端返回
在不同设备上的应用会得到基本上
相同NSUserDefaults包当应用在其他设备上启用时
它以NSDictionary为原型
跟CloudKit工程团队谈话
他们最初做了NSUbiquitousKeyStore之后转移到CloudKit
请注意只允许较小载荷
这个数据不是按需获取的是在登录时获取
我们预期的是用于容量较小的数据集
用在应用程序内部这更适合NSDictionary
若你放入NSDictionary放入NSUbiquitousKeyStore
若太大无法放入一个NSDictionary
你可能想将其放入CloudKit
我之前提过 数据获取是账户登录的一部分
这会出现副作用
我们会在稍后的展示中谈谈
这也会让你的应用由应用管理进行管理
最简单的总结就是谈谈大规模部署应用程序
如果我是IT管理员 将在一家世界500强公司中部署1000台iPad
我希望你的应用在默认环境下设置好
在我部署的第一天他们通过应用管理进行
我们会在稍后的展示中谈的
你可以将初始应用状态通过
NSUbiquitousKeyValueStores发布到所有的iPad上
我想说几个使用案例关于NSUbiquitousKeyStoreValue
或NSUbiquitousKeyValueStore这真是拗口
我们来想想Mia访问一个iPad
在新学年的第一天
她启用你的应用应用有一些设置数据
你要挑选她最喜欢的颜色
可能让她挑选头像的照片
你不希望在她每次使用iPad时都遇到这样
整个学年都是
NSUbiquitousKeyValueStore的理想使用案例
是保存应用的初始设置数据
这样当你的应用在不同的iPad上运行时
Mia在你应用上的
初始偏好设置就保存于NSUbiquitousKeyValueStore
而且她不会在每次使用新iPad时看到应用程序设置
我们Apple内部的使用案例是
Stocks和Weather的团队告诉我
我们用NSUbiquitousKeyValueStore来保存滚动栏
列表 然后我们还用它存储你在Weather中保存的所有位置
Keychain
有多少人在自己的应用程序中使用Keychain？
不少
我有极好消息告诉大家没你们什么事了
什么都不需做 接下来几分钟你可以查看一下邮件
你什么不需要做你已经万事俱备了
每个Managed Apple ID都有一个Keychain
而且那个Keychain与他们登录的每个设备同步
很明显Keychain是用于保护用户数据的
有相同的API相同的使用约定
事实上 作为应用
你无法分辨出Shared iPad Keychain与
普通iCloud Keychain的不同
相同API相同使用模式
有几点事
有些人在Keychain上做一些少见的仅应用商店设备可用数据
在Shared iPad Keychain上面没有仅设备可用数据
而且我们推荐你只按每个用户保存
你必须设置可输出标记或者分享标记
否则你的数据不会分享过去
不过你应该将用户凭证
或者用户敏感信息保存在Keychain中
你不应该使用Keychain保存批量数据
与NSUbiquitousKeyValueStore的规则差不多相同
不要用它保存批量数据
如果你想安全保存批量数据请到实验室来
我们可以建议不同的做法来解决这个问题
不过 如果你已经在使用Keychain 那很好
如果你的应用有用户敏感信息需要用密码保护
或比放在数据存储中更安全的方式
例如CloudKit或NSUbiquitousKeyValueStore
将其放入Keychain中是易于采用的
这让数据安全并且便携性极强
最后 关于可以采用的云端技术
在座有多少人已经有自己的云端技术了？
用的不是CloudKit我看到了不少 非常好
你要确保你的代码
或你使用的代码使用NSURLsession
NSURLsession是iOS上进行所有联网活动的首选
你应该使用它因为它的本领非常多
我在Apple干了很久具体多久我就不说了
我认为比之前会议上来的Todd要更久一些
它能为你做非常多事情
你甚至都没有意识到
它用IPv6 进行所有的度量 控制以及核算
进行数据节流无缝网络过渡
这一点是我在做幻灯片时才了解到的
Cisco Fast Lane支持有多少人知道这是什么？
这是关于服务质量的能允许
网络管理员划分网络流量的优先级
若你的应用没在使用NSURLsession 你必须亲自去做
这就要你花时间去学习它
而NSURLsession已做好
若你不使用CloudKit或iCloud Drive
不用Keychain 而且不用NSUbiquitousKeyValueStore
但是你就是想让你的应用进入云端
要确保你使用或编写的框架
使用NSURLsession进行所有的联网
然后你要选取最佳种类的网络行为
要稳健 有弹性
所以
像是
CloudKit中的LongLivedOperations
使用NSURLsession的另一个优势是...
我们回到用户切换你的应用没在前台运行
NSURLsession流程不运行除非你将它们标记成后台
或者采用后台配置
所以你有自己的云端技术你目前没用NSURLsession
不过你将过渡到NSURLsession
当你这么做时
你可以查看开发者资料上面写着
如何让NSURLsession数据在后台运行
这对于应用开发者来说有两个优点
优点一你的数据可以继续同步
到你专有的云端存储
当你应用没在前台运行时
优点二
你的数据会在Mia登出后甚至不再你平台上活动时同步
如果你没在使用NSURLsession 开始用吧
你开始使用NSURLsession时
检查后台使用确保你的应用可以同步数据
当应用没在前台运行或者用户没在活动时
我们回顾一下
现在我应该让你确信 基于云端的数据对你的应用至关重要
在iOS 9.3中推出的新Shared iPad环境中
这是世界范围的大市场我们知道它在澳大利亚使用
我们知道它在美国使用
正在登陆到欧洲
这允许ManagedApple ID在设备之间移动
我们想提供尽可能无缝的体验
而且你们应用开发者要发挥好作用
将你们的应用数据移到云端上
Apple认为 而且我相信我们提供完整的解决方案
如果你目前还没有用上这一些
没必要再等下去了
iOS拥有你需要的全部基础技术将你的数据移动到云端
如果你觉着有问题请到实验室来 我们会帮你
如果你自己做联网任何种类的
无论是否基于云端请使用NSURLsession
采用这些技术的话你会获得大量的优势
你会得到一大批的功能
不过我们不谈论未来功能像是本次会议中的Pod
不过对NSURLsession的研究并未结束
我们需要更多的联网这都会添加进去的
而且已经在上面的应用就会直接跟上潮流
迎接下一轮的NSURLsession功能提升
除了云端之外
在Shared iPad上还有其他需你考虑的事
这更多是关于转变你的思维
而不是你要采用的特定技术
首先 用户之间的账户数据分隔
这应该很明显有些人可能会想“这还用说”
不过我想谈一谈因为一些应用
iOS 9.3是首个支持用户分享的iOS版本
这代表之前有九个iOS版本不支持
所以一些应用需要支持用户分享
他们基本上是在应用中编写了自己的用户选取器
所以首先我们有真正的数据分离
Mia无法看到Liam的数据Liam无法看到Mia的数据
当她们在设备上活动时
因此 应用开发者可以使用这个工具
这样就不再需要有自己的多用户选择器了
这里有一些应用程序当你启动时
它会问你是Mia还是Liam然后你能设置多个用户数据
那个时代已经过去
如果你做多用户应用
你的应用应在单个设备上以用户分享模式运行
你可以免费得到数据分离并且撤掉那些
用于多用户管理的代码
这会避免Liam和Mia之间的数据混合
这有时候会是潜在的隐私问题
如果两名不同的学生可以看到对方的数据
Shared iPad有定额
Todd有一个精彩地动画我忘记用在展示中了 抱歉
iPad会实施定额
在iPad上有两种定额类型
登录在上面的账户数量
六个 八个还是十个的
然后是每个账号可以保存的数据量
为什么这会影响到你们开发者？
你会在你用的任何文件系统操作中见到新错误
这会有EDQUOT错误作为ENOSPC处理就行
你不会占满容量而会得到定额错误
如果你的应用拥有恢复机制 你需要在
当你没有磁盘空间时用同样方法处理
这是新的错误代码你可能会经常见到
当在Shared iPad环境中运行时
另一项非常有趣的技术
就是Shared iPad中的On-Demand Resources
如果你的应用有On-Demand Resources
或者有尚未转移到AppleOn-Demand Resources上的资源
不过你按需下载
如果你将它们下载到用户目录中
在有八个用户的iPad上
你现在就将那个应用资源复制了八次
除此之外你将资源下载了八次
这会给学校网络带来负担将它再乘上30台iPad
现在你就下载240次了
所以你真的应该考虑使用On-Demand Resources
如果你的应用转移到On-Demand Resources
你在每个设备上只会下载一次On-Demand Resource
这会下载在设备上的当前和将来的所有用户
更重要的是不会被删除或清除
当某个用户账户被操作系统清除掉
来为新用户留出空间
所有如果你有大量资源或者你有恰好的资源
或者你给应用瘦身
然后你之后下载这些资源
采用ODR 你就会在iPad上获得你所需的资源
就在你需要的时候然后你会最小程度地影响
那个iPad上的本地存储和用户定额
以及学校或机构的网络
这是开发者资料上的截图
关于On-Demand Resources
我在幻灯片的结尾会有不过先预览一下
我认为周四是深入探讨On-Demand Resources
极力推荐你参加那场演讲如果你有大量的资源
需要从应用捆绑包中移走
而不是下载到用户的目录中
远程通知
iPad的情况以及分享环境
与之前相比稍微不同
但改变不大
对于单用户iPad通知的作用是一样的
所以Shared iPad是如何工作的？
就像单用户iPad一样
不过登录像是给iPad开机
而登出像是给iPad关机
在iPad登录之前你是不会得到通知的
而且当iPad登出或者关机时你不会得到通知
这对登录和登出是一样的
所以这个就相当于你的应用在设备上打开或关闭
当设备开机或者关机时
只有当你的应用在每个设备上至少运行一次 那远程通知才会准备好
如果Mia只是第一次接触这个设备
而你的应用依靠推送通知或者远程通知发挥作用
除非她在那个设备上至少运行一次
她是不会看到通知的
这就像非Shared iPad但我认为会出现得
更频繁 因为现在Mia能更容易地更换设备
而且注销就像关机我之前说了
你不会收到远程通知
为什么我们讲它用了一整个幻灯片？
一些应用可能不会如你所想那样
顺滑流畅地运作如果没有推送通知的话
如果你应用中的工作流程或者用户案例十分依赖于
远程通知来触发某些事件之类的
好好考虑一下评估你的应用
看看你能做出什么改变
因为随着Mia在不同设备间切换
她是不会收到推送通知的除非她将应用运行一次
如果你有什么可以帮助她的
或甚至给管理员发送文件
让他们制定应用的部署决定这会是非常有帮助的
所以检查你的远程通知使用
并想想你的应用的运行情况如果Mia一直使用
一个iPad一整周都在使用
然后她突然得到新的iPad
你的应用在她第一次启动之前是否有同样的效果
Managed Apple ID
这是新一类的Apple ID是由机构设置而成
该机构控制名字密码
不过这里还有一组不同的能力
与托管iPad有关
最重要的能力是没有商务功能
极少的学校会想让学生
当在部署应用的时候用他们的信用卡购买音乐
所以我们关闭了商务应用
商务之类的东西
对于一些开发者的影响是我看到一些应用程序
要付费才能使用功能
或者将功能放入应用内购买中
学校不会想授权那样的应用程序
他们会部署的环境是
每个Apple ID都没任何商务功能
没有信用卡绑定账户
你的应用无法在那种环境下运作
我不是说你应该在一般的应用上也这样做
你可能需要为授权的学校做另一款应用
不需要应用内购买就能完全运作的
你应该合适地调整你的授权以及定价
不过学校部署的应用本身应该是功能齐全的
所以不要等商务活动的发生
在你的应用完全运作之前
查看你需要的特定框架和功能
不要假设因为他们有iCloud身份
他们就什么都有了
我们梳理过操作系统哪里禁用了
那些框架会返回适当的错误
一个具体例子是StoreKit
若你以Managed Apple ID登录然后试着使用StoreKit
你会碰到适当的错误写着StoreKit离线或不可用
所以不要假设都有或是都没有
如果有这个那就有所有其他服务了
去检查你所需要的每个框架都在不在
如果那些框架返回来错误
你的应用应该怎么办
然后仔细为那个使用案例考虑
一般来说 你可以顺着你一直遵循的现有实践
如果你已经兼容VPPVolume Purchase Plan
以及基于设备的授权如果你的应用符合VPP授权
以及基于设备的部署
那你就基本上大功告成或已经大功告成了
对于那些不知道VPP和基于设备授权的开发者
到实验室与我们合作我们能让你了解最新情况
这会让你的应用更便于上手并为你打开新的市场
最后简短感谢一下网页开发者
我们投入很多心思这里有Keychain
我喜欢Safari AutoFill功能 可以保存密码
同步在iCloud Keychain中这会在部署时非常有用
不过我们在想
Mia登录到Shared iPad
然后登录到个人账户
我们不想将那个密码保存在存储Keychain的地方
所以我们让学校有能力列出特定的网站
将其密码保存在Keychain中
考虑到转移到原生应用这是绝对是最佳的解决方案
这是我们的客户和你们的客户所期待的解决方案
然而 如果你还是基于网络的开发者 并维持基于网络内容
最起码 要有一些资料更新
你可能要提醒你的客户将你的域名添加到
Safari域名白名单中
这样在学生第一次设置你的网站时
Safari会提醒他们保存密码
然后就保存到他们的ManagedApple ID Keychain
当他们下次访问不同的iPad
并登陆你的网站那他们就不需要再次
提供他们的凭证
如果不将你的网站或域名加入域名白名单上
Mia就要在每次遇到新iPad时被迫登陆
对于Mia和学校来说会是令人沮丧的体验
最起码 要有资料更新
最多 你可以把它当做提醒你是时候考虑
将应用转变成平台原生的了
我谈了Shared iPad
我谈了商业
我谈了这会开启的新市场
不过我还想指出
这些不是在Shared iPad上独有的
我的主张是
虽然Shared iPad需要基于云端的数据才能正常运行
将应用转移到云端会让所有用户获益
我的妻子两周前把她的iPad摔了
我们拿到Genius Bar让他们修好了
她得到了新iPad她开始设置她的应用
那些没有云端数据的应用没有重新安装到应用上面
她没有时间
而且这也让他们很容易地更换设备
这些你投入的改变
不只是为Shared iPad投入
这会将更好体验带给你的所有用户
所有拥有云端数据的用户
所有拥有iCloud文档的用户所有拥有Keychain的用户
所有拥有NSUbiquitousKeyStore的用户
将你的应用程序数据转移到云端
会更加有利于你的整个生态系统
除此之外 这会更加适合用于商业和教育
所以云端也受商业青睐他们更换设备
更换员工将新设备
在周一和周二都发放给不同员工
如果你可以让账户设置更加快速
然后让那个员工的数据
上线并很快能在那个iPad上获取到
公司会将你的应用视为部署的最佳之选
所以我的论点是云端是长期的趋势
如果你还没有考虑将你的数据移动到云端中
可能今年你的这个想法就再也站不住脚了
如果你已经使用云端检查你的使用情况
确保一切都运行正常
因为我们凭借Shared iPad为你打开了巨大新市场
如果你都做好了
你将用户安全数据转移到Keychain中
你使用了CloudKit存储批量数据
因为你没使用NSUbiquitousKeyStore去保存
你用了NSUbiquitousKeyStore存储应用的初始设置
你将所有的自定义联网转移至NSURLsession
你调出后台任务这样当应用
不在前台时也会运行
现在你需要测试
确保一切都正常运作这里有一些高级别推荐
关于如何测试应用
这里基本上有三种测试方法最后归结成
相同的方法不过我们会一个个讲
两台设备
iPad A和iPad B
你在iPad A上安装应用设置iCloud身份
运行应用
经过保存数据的周期
可能你是股票应用你保存滚动栏信息
做完所有这些事情
等待同步
启动iPad B
用相同账户登录
启动应用程序 看看你的数据会不会出现在iPad B上
如果没有 启用调试周期
如果有 那太好了大功告成
这会允许你...
基本上 两台不同设备拥有相同的iCloud身份
就足够测试了
来验证你的应用能在Shared iPad环境中运行
如果你没有两台设备
或者你懒得在两台设备上做
你可以做同样的测试通过添加你的应用
设置所有的数据等待应用同步数据
删除应用然后重新将应用安装回去
这会将所有的数据下载回来
NSUbiquitousKeyValueStore
CloudKit 云端文档所有的数据都会回来
如果所有的数据都回来了
你就可以在方框上打上对勾
写着你已经将数据转移到云端了
在极端情况下
在座的大多数人会意识到这只是变化一下
如果你真的想知道你的确做好了
你可以在测试过程之间擦除iPad
我不认为这是必要的不过我只是想写得完整
这种测试差不多就很严峻了
设置你的iPad在上面放上大量数据
相信你的云端会奏效
相信Apple保存了那些数据将设备擦除干净
再从头设置是否所有的数据会回来？
这就妥了
如果你的应用可以通过那样的测试
你就成功实现Shared iPad的案例了
并且你就会给客户提供更好的体验
验证应用的所有功能确认没有数据丢失
确认离线有效所以让iPad进入飞行模式
然后验证用户CloudKit
之后当你从飞行模式退出后所有的数据会同步
验证你的应用不会再次出现设置屏幕
非常简单的测试
安装应用 通过设置屏幕删除 重新启动
设置屏幕出现了吗？这还没完
测试很重要转移到云端不可小视
一旦出现了你就会对结果非常满意的
如果你想要更多的帮助或者协助
会议结束之后会有实验室
我们会在那里为你回答问题
这有一个请求
很多都是来自内部开发者的
登出实际上会试着将每个人的应用
进行有序关机
如果你溢出UI后台任务登出就无法完成
这会让人很不爽
Liam无法登入直到Mia的登出会话结束
如果你溢出UI后台任务
你的应用无法终止它终究会超时的
终究会被关闭
但这对谁都不好
确保你没有溢出UI后台任务
因为这会阻挡登出
所以这就是你需要采用的技术
你需要作出的更改
所有改变让Shared iPad和商业使用案例有更好体验
如果你想在那些环境中有用这些改变是最低要求
你要做的工作
对于消费者使用案例也是有用的
好消息是这种投入
不仅是为了商业和教育这还是为了消费者使用案例
这会成为你的应用程序的基线
你现在有机会超越最低要求
将你的数据放入云端然后你真的可以让你的应用
成为世界顶级的首选应用
对潜在的授权人来说
通过超越采用云端
并采用今年的一些更新的技术
第一项最令人激动的技术...
本次会议有多少人之前听了Todd的演讲？
很好 人数不少那个Classroom应用
最令人激动的应用之一
听起来有点傻不过作为“神”的感觉真酷
坐在这里用着Classroom应用通过iPad控制整个实验室
真的是非常强大的
其中一项在Classroom应用中
利用的关键技术就是通用链接
通用链接不是iOS 9.3的新特性而是在iOS 9上推出的
它提供一项功能允许你将外部链接
分享回你设备上的应用
它还允许共享和查找
在你设备上的应用里
采用通用链接会有巨大的优势
今年的新功能是
我们基于通用链接作为基本的了解
有许多的应用支持它
通用链接是其中一项关键功能
使用在Classroom中
在课堂的情境下引导应用 控制应用
若你的应用支持通用链接
世界各地的老师都能断定你的应用是世界上最酷的
而且她可以把你的应用结合到她的课程中
在课程中她就会与Classroom应用一同使用你的应用
这会让你的应用成为世界一流
是App Store上最受欢迎的应用
用于学校授权
若你无法使用通用链接 这会更难
让老师把你的应用结合到他们的课程中
且更难与Classroom应用一起用
因此 对你来说这是很好的机会去惊喜
你的客户 因为你的应用在课堂的情境下效果非常好
关键是通用链接如云端技术
无论是不是在共享使用案例的环境下 这都对你的应用有益
但这里有更多的证明
在这些核心技术上累积
让你的应用尽可能的有用
iOS 9.3.2的另一项新功能
一些应用开发者做自动评估应用
学生用这些应用进行标准测试或评估
他们进入全屏模式 然后锁定
我们做一些改变使其更加无障碍
最大的变化是你现在可以进入自动评估应用
不需在受监督的iPad上面
你会得到授权你可以请求
尤其是现在你可以调用API
来请求不同的键盘功能
你可能不想让允许自动校正的拼写应用
出现在学生的拼写测试评估中
现在应用可以控制它
它们可以要求授权
更重要的是
这不再只局限于
受监督的iPad这可以在任何iPad上运行
所以如果你是基于评估的应用程序
或者考虑成为基于评估的应用程序
iOS 9.3.2为你开创了更多机会
来实验室这里我们可以给你更多细节
不过那是iOS 9.3.2的一部分
托管应用配置
这是在iOS 7上推出的
它的作用是允许管理员
将初始应用设置发送给成千上百
或者上万个的iPad
所以每个应用都是以初始配置启动
这非常容易采用
只是NSUserdefaults里面的一个附加键
如果你看到那个键它指向
开发者所控制的特定应用字典
设置这些东西的管理员
会为你的应用提供默认的字典
问题是MDM供应商可以选择不同方式
发送此信息 配置它然后将其打包
所以今年的新情况是这里有一个社区
不隶属于Apple不过我们参与其中
所有不同的MDM
移动设备管理服务器供应商都在给有效负载设立标准
标准化工作都记录在这个屏幕上显示的URL上了
最大的优势是你现在可以有单个的应用
支持多个MDM供应商
当我在给这次展示做研究时
在过去的18个月里我是初到设备管理领域
我惊奇的发现事情就是如此
现在App Store中有一个应用 就是今天
我们不是在瞎编有这么多的SKU
他们没使用自动布局
这也是为何它们在iPhone和iPad应用上有不同屏幕
不过你看到的六个你看到
六个中的每个图标都代表不同的MDM服务器
他们都必须支持
你可以想象到对他们来说维护就像是噩梦
通过转移到新应用上托管应用联盟
他们应该能把应用转变成这样
他们可以有支持所有MDM供应商iPhone版本
他们还可以有支持所有MDM的iPad版本
所以单是这个就是巨大的优势
若它们转移到自动布局
使用Apple的所有最新技术
他们应该能做到这样
在App Store中只有一个SKU
支持所有不同的屏幕尺寸
而且也可以在所有主要的MDM服务器供应商那里托管
如果你想要进入这个市场而且你想要你的应用托管
通过应用程序管理深入了解新的联盟
与他们合作学习采用他们的成果
总之
与Shared iPad一起
我希望能留下的信息是
无论你想打入什么市场iOS生态系统是多元的
充满活力 有利可图
对所有人开放
但要求也非常高
客户会期望很多
他们期望自动布局期望有无障碍性
他们期望你使用Swift他们要AirPlay和3D Touch
而今年就在这里SiriKit
这是另一项技术
你的应用通过Siri可以做出革命性的事情
若在教育商业环境下采用SiriKit
让你的应用保持鲜活充满活力
采用云端技术
你做的是让你的应用为消费者提供更好体验
更好地用于商业和机构领域
尤其是教育
我感谢大家抽出时间
我很享受与大家交谈我也很乐意回答问题
之后在实验室中可以回答
那里有我的同事我会给大家一些引导
这会有链接
本次会议中的所有连接都在这个链接里
这有一个小流程图
如果你错过了可以回顾视频
还有即将开始的
我们有“Apple设备管理的新特性”
如果你没有看过你要在视频中回顾了
“以现代最佳实践改进现有应用”
这是下午3点的本场演讲之后马上就是
这会是更加深入探讨了
应用的最佳现代实现技术
“优化按需加载资源”的使用是在周四
“通过SiriKit扩展应用”是在周四
“CloudKit的新特性” 周四
“CloudKit最佳实践”
如果想把应用移到云端这些工程师
会细枝末节地告诉你怎么去做
感谢大家的宝贵时间感激大家的参与