00:00:19.319 --> 00:00:25.626
Game Center的新特性

00:00:28.228 --> 00:00:29.596
大家早上好

00:00:29.663 --> 00:00:30.931
谢谢来这里

00:00:31.765 --> 00:00:35.536
我是Megan Gardner
我是Game Center软件工程师

00:00:35.602 --> 00:00:39.406
今天我们讨论Game Center
的新特性

00:00:40.908 --> 00:00:42.876
若你还不知什么是
Game Center

00:00:43.143 --> 00:00:45.712
Game Center是
Apple社交游戏网络

00:00:45.779 --> 00:00:50.851
它允许开发者定义排行榜
你的用户可以向它提交分数

00:00:51.251 --> 00:00:53.887
还定义
你的玩家可以获得的成就

00:00:54.087 --> 00:00:55.355
我们还有挑战

00:00:55.622 --> 00:00:58.358
它利用排行榜和成就

00:00:58.425 --> 00:01:01.228
来添加多人游戏元素到你的单人游戏

00:01:01.562 --> 00:01:05.732
我们还有两个多人游戏API
是实时的和基于回合的

00:01:06.233 --> 00:01:10.037
iOS macOS和tvOS上
都可以使用这些功能

00:01:10.103 --> 00:01:12.439
今年我们宣布了watchOS

00:01:13.006 --> 00:01:13.974
那么有什么新特性？

00:01:14.508 --> 00:01:15.976
我们今年有一些新东西

00:01:16.310 --> 00:01:19.913
首先我们有一个很好的发送多人游戏
邀请的方式

00:01:20.480 --> 00:01:23.050
接着我们有Game Center
应用的大新闻

00:01:23.116 --> 00:01:24.585
如果你们已经发现了

00:01:25.118 --> 00:01:27.888
我们有全新的API

00:01:27.955 --> 00:01:31.024
针对持续游戏会话
我们对此感到兴奋

00:01:31.425 --> 00:01:33.760
我们宣布Apple Watch支持

00:01:34.027 --> 00:01:36.496
我们没时间在本次演讲谈论
Apple Watch

00:01:36.563 --> 00:01:38.131
但如果你对这感兴趣

00:01:38.198 --> 00:01:39.600
我强烈建议你去

00:01:39.666 --> 00:01:44.304
看Apple Watch游戏技术
在这间房间 今天下午晚些时候

00:01:45.906 --> 00:01:49.676
让我们谈谈基于消息的多人游戏
邀请

00:01:49.943 --> 00:01:52.980
现在你可以和任何能发消息的人
一起玩

00:01:53.847 --> 00:01:57.684
我们的Game Center
多人游戏看起来像是这样

00:01:58.018 --> 00:02:00.420
这是我们的
GKMatchmakerViewController

00:02:00.487 --> 00:02:03.323
你们中的大多数用它来设置你们的匹配

00:02:03.390 --> 00:02:05.325
这是我们完成的内置UI

00:02:05.659 --> 00:02:08.395
它允许你的用户邀请他们
Game Center好友

00:02:08.461 --> 00:02:11.198
和使用自动匹配的立即游戏功能

00:02:11.265 --> 00:02:14.268
你们中的一部分实现了
GKMatchmaker

00:02:14.334 --> 00:02:16.003
这是我们的编程API

00:02:16.069 --> 00:02:19.540
它允许你实现你自己的UI并设置
你自己的邀请

00:02:19.606 --> 00:02:22.409
但若你一直用
GKMatchmakerViewController

00:02:22.776 --> 00:02:24.178
现在它看起来是这样

00:02:24.912 --> 00:02:28.148
这是我们新集成的消息视图控制器

00:02:28.215 --> 00:02:30.150
你会注意到一些区别

00:02:30.217 --> 00:02:32.986
没有气泡
但这不是最重要的部分

00:02:34.354 --> 00:02:37.691
现在它直接和消息集成

00:02:37.758 --> 00:02:40.727
这允许你的用户可以发送消息

00:02:40.794 --> 00:02:42.629
给联系人里的任何人

00:02:42.696 --> 00:02:44.464
然后可以和他们一起玩游戏

00:02:44.831 --> 00:02:46.466
让我们看看它是什么样子的

00:02:46.667 --> 00:02:49.536
这是Doodle Jump中的
多人游戏视图控制器

00:02:49.603 --> 00:02:53.340
你可以点击立即游戏并且自动匹配
会和以前一样工作

00:02:53.407 --> 00:02:57.611
然而我们对点击邀请好友时会
发生什么更感兴趣

00:02:58.212 --> 00:03:01.481
这会带来这个新的消息视图控制器

00:03:01.548 --> 00:03:04.251
你可以看到我们有这个漂亮的
富链接

00:03:04.318 --> 00:03:06.820
在角落里有小的
Doodle Jump图标

00:03:06.887 --> 00:03:09.656
我添加了一点文本来告诉你的用户

00:03:09.723 --> 00:03:13.961
关于这个链接会让他们做什么

00:03:14.161 --> 00:03:16.029
这完全基于iCloud技术

00:03:16.096 --> 00:03:18.131
所以你的所有用户需要登录

00:03:18.198 --> 00:03:19.666
iCloud使它能够工作

00:03:21.235 --> 00:03:23.537
你可以在收件人域里开始输入

00:03:23.704 --> 00:03:27.608
这会用联系人自动完成或者你
可以键入

00:03:27.908 --> 00:03:31.211
一个电子邮件地址或者电话号码
属于你知道的任何人的

00:03:31.278 --> 00:03:32.613
或者你刚刚见到的任何人

00:03:34.147 --> 00:03:37.918
或者你可以点击加号按钮
这会带来联系人

00:03:37.985 --> 00:03:39.586
这是我的所有联系人

00:03:39.653 --> 00:03:42.756
我有他们的消息信息

00:03:43.156 --> 00:03:45.392
你在中间还能看到一个最近标签

00:03:45.459 --> 00:03:48.061
这里会有
你的Game Center好友

00:03:48.128 --> 00:03:53.600
以及你的用户最近在Game
Center里一起玩过游戏的人

00:03:53.667 --> 00:03:56.336
附近的功能是同样的

00:03:56.403 --> 00:04:00.174
在本地网络中查找玩家

00:04:00.240 --> 00:04:02.176
也在玩同一个游戏的玩家

00:04:02.843 --> 00:04:06.046
所以我会点击Alisha 邀请我的
朋友Alisha一起玩

00:04:06.313 --> 00:04:07.414
然后点击添加

00:04:07.481 --> 00:04:10.517
会把她填入收件人域

00:04:12.019 --> 00:04:14.855
然后你可以
这和消息的功能是一样的

00:04:14.922 --> 00:04:16.223
这基本上就是消息UI

00:04:16.290 --> 00:04:20.260
你的用户可以添加额外的文字然后
这会被发送到所有这些玩家

00:04:20.327 --> 00:04:22.262
若我点击一个
Game Center玩家

00:04:22.329 --> 00:04:24.064
他们的名字会被显示成灰色

00:04:24.331 --> 00:04:26.600
他们会收到Game Center
通知

00:04:26.667 --> 00:04:30.137
他们不会得到一些奇怪的Game
Center iMessage

00:04:31.672 --> 00:04:34.942
它会做为通知进入
所以如果我们点击发送按钮

00:04:35.309 --> 00:04:38.445
这会被发送给Alisha

00:04:38.512 --> 00:04:41.014
在Alisha的屏幕上看起来是这样

00:04:41.315 --> 00:04:44.117
她可以点击链接来接受邀请

00:04:44.184 --> 00:04:46.753
这会直接把她带入游戏

00:04:46.820 --> 00:04:49.156
并开始连接

00:04:49.223 --> 00:04:51.825
就像她点击通知会发生的事一样

00:04:51.959 --> 00:04:55.929
我们还有的功能是
如果她没有Doodle Jump

00:04:55.996 --> 00:04:58.699
这会把它带到商店
她可以下载

00:04:58.765 --> 00:05:01.969
并玩游戏就像她可以在通知做的

00:05:02.636 --> 00:05:05.239
我说过我们不需要做什么

00:05:05.305 --> 00:05:06.940
来实现这些

00:05:07.007 --> 00:05:09.510
我们只替换了视图控制器

00:05:09.576 --> 00:05:11.845
所以如果你一直在用这个视图
控制器

00:05:12.012 --> 00:05:14.481
那么你已经能够得到这些功能

00:05:14.548 --> 00:05:16.583
一旦iOS 10发布

00:05:16.650 --> 00:05:20.521
你的所有用户都能这样做来邀请
他们知道的任何人

00:05:20.587 --> 00:05:23.390
他们不再被限制在
Game Center好友中

00:05:23.457 --> 00:05:26.727
然而我们有一个东西
如果你想你可以定制化

00:05:26.894 --> 00:05:28.028
那就是富链接图像

00:05:28.095 --> 00:05:30.497
就在这
目前是Game Center图标

00:05:30.764 --> 00:05:33.267
如果你想把这换成一些别的

00:05:33.333 --> 00:05:36.403
你觉得更适合代表你的游戏

00:05:36.670 --> 00:05:40.607
或者更适合用来表明这是一个
游戏邀请

00:05:40.674 --> 00:05:42.943
或者一个有趣的事
人们会想点击它

00:05:43.744 --> 00:05:44.778
那么你可以...

00:05:44.945 --> 00:05:49.583
你要做的是添加这个文件
GKMessageInvite到你的程序包中

00:05:49.650 --> 00:05:51.885
用同样的方式
然后我们会提取它

00:05:51.952 --> 00:05:54.788
如果你想要定制你的通知声音

00:05:54.855 --> 00:05:58.225
我们也可以提取它
并定制你的富链接

00:05:58.559 --> 00:06:02.062
这和Safari使用的富链接技术是
相同的

00:06:02.129 --> 00:06:05.499
所以这被用来使用各种各样的图像

00:06:05.566 --> 00:06:08.202
这对Game Center
好友说明什么？

00:06:08.502 --> 00:06:11.772
我们不再需要好友
因为我们可以和任何人一起玩

00:06:11.839 --> 00:06:13.807
所以我们会冻结好友列表

00:06:15.676 --> 00:06:18.478
但是你仍然可以查看任何
你的Game Center好友

00:06:18.545 --> 00:06:20.681
在最近玩家标签页中

00:06:20.747 --> 00:06:24.117
你还是可以获得好友
好友还是存在的

00:06:24.184 --> 00:06:26.119
我们不是要删除他们
他们还在那

00:06:26.186 --> 00:06:29.857
但是你将不能发送 接收 回复

00:06:29.923 --> 00:06:32.159
任何好友请求
因为

00:06:32.226 --> 00:06:36.496
GKFriendRequestCompose
ViewController现在被弃用了

00:06:38.932 --> 00:06:40.868
它也并没有被使用很多

00:06:41.768 --> 00:06:44.705
这对Game Center
应用意味什么？

00:06:44.771 --> 00:06:49.476
如果你下载了包围这款游戏
你可以注意到一些改变

00:06:50.811 --> 00:06:52.613
Game Center作用是什么？

00:06:52.846 --> 00:06:55.482
在iOS 9中它被用来管理你的帐户

00:06:55.549 --> 00:06:56.583
管理你的好友

00:06:56.884 --> 00:07:00.220
你可以浏览游戏列表
你可以查看你的排行榜

00:07:00.287 --> 00:07:03.857
查看你的成就和挑战

00:07:03.924 --> 00:07:06.426
发送挑战
查看你的回合

00:07:07.227 --> 00:07:11.164
但是这些你都可以在系统的其他
部分里完成

00:07:11.231 --> 00:07:13.233
更重要的是
在你的应用中

00:07:13.600 --> 00:07:18.672
所以我们移除了
Game Center应用

00:07:21.642 --> 00:07:23.343
那我们在哪做那些事？

00:07:29.082 --> 00:07:31.351
要管理你的帐户
你可以在设置里这么做

00:07:31.418 --> 00:07:34.755
如果你想要管理好友
你仍然可以在设置里这么做

00:07:34.988 --> 00:07:37.391
要浏览你的游戏
我们有App Store

00:07:37.457 --> 00:07:39.026
你可以看你的主屏

00:07:39.393 --> 00:07:44.464
你查看排行榜 成就和挑战
从GKGameCenterViewController

00:07:44.731 --> 00:07:48.068
如果你不用这个视图控制器
你可以有你自己的UI

00:07:48.135 --> 00:07:49.469
如果你现在没有

00:07:49.536 --> 00:07:52.873
在你的游戏中
显示挑战或者排行榜和成就

00:07:52.940 --> 00:07:55.309
我们强烈建议你从现在开始这么做

00:07:56.476 --> 00:07:59.847
你还可以查看和进行你的回合
从GKMatchmaker...

00:07:59.913 --> 00:08:02.749
GKTurnBasedMatchmaker
ViewController

00:08:03.851 --> 00:08:06.620
所以我们移除了这个应用

00:08:06.687 --> 00:08:10.991
所有功能都存在在其他地方
更重要的是在你的应用里

00:08:11.058 --> 00:08:12.826
我们想要我们的用户花费

00:08:12.893 --> 00:08:14.895
你的用户花费更多时间在你的应用中

00:08:15.028 --> 00:08:17.965
我们有手机的其他部分
我们不需要他们的更多时间

00:08:19.032 --> 00:08:20.801
所以我们移除了这个应用

00:08:22.135 --> 00:08:24.304
让我们谈谈会话

00:08:24.371 --> 00:08:29.376
这是我们全新的API
我们对它感到很兴奋

00:08:29.443 --> 00:08:32.111
这是一个全新的多人游戏方式

00:08:33.413 --> 00:08:36.250
所以Game Center多人游戏
它现在看起来是什么样子？

00:08:36.750 --> 00:08:40.988
我们有两个主要API
针对实时和回合制

00:08:41.955 --> 00:08:44.458
实时会连接两到四名玩家

00:08:44.791 --> 00:08:49.196
这些连接要求立即握手

00:08:49.263 --> 00:08:53.634
如果任何人离开连接
整个连接都会失去

00:08:53.800 --> 00:08:55.802
你只是来回传送数据

00:08:55.936 --> 00:08:58.639
游戏一结束那些数据马上消失

00:08:59.406 --> 00:09:02.643
回合制可以连接16名玩家

00:09:02.910 --> 00:09:08.248
我们有一个很正式的API来传递
和交换回合

00:09:09.383 --> 00:09:11.585
你需要遵守这些规定

00:09:11.652 --> 00:09:15.155
你需要确保你的游戏适合那个结构

00:09:15.222 --> 00:09:17.624
所有游戏被保存在
Game Center服务器中

00:09:17.691 --> 00:09:19.393
直到它们过期

00:09:20.594 --> 00:09:21.595
什么是会话？

00:09:22.029 --> 00:09:24.865
会话是我们新的基于iCloud的
多人游戏

00:09:25.132 --> 00:09:29.403
我们有通用接口
来保存和共享游戏数据

00:09:29.770 --> 00:09:32.439
这是一些易于分享的小的数据

00:09:32.506 --> 00:09:36.210
人们可以分享给
他们想一起玩游戏的人

00:09:36.276 --> 00:09:39.580
这是一个完全灵活的游戏结构
我们不强加任何东西给你

00:09:39.646 --> 00:09:41.215
你可以做任何你想做的

00:09:42.049 --> 00:09:46.887
我们有非常稳定可靠的实时流
你可以在会话中建立

00:09:47.254 --> 00:09:50.357
这允许你和任何人一起玩

00:09:51.425 --> 00:09:52.993
一个会话看起来是怎样的？

00:09:53.227 --> 00:09:56.029
我们有两个主要的东西

00:09:56.230 --> 00:09:59.199
我们有游戏数据
可能是更重要的部分之一

00:09:59.333 --> 00:10:01.568
但是还有同样重要的就是玩家

00:10:01.735 --> 00:10:03.504
这就是你所需的全部

00:10:03.570 --> 00:10:06.840
你得到一个会话所需要的全部基本

00:10:06.907 --> 00:10:08.909
是一个玩家和一些游戏数据

00:10:09.209 --> 00:10:11.345
你可以有多个玩家

00:10:11.411 --> 00:10:14.114
如果你想和其他人一起玩这很有用

00:10:14.414 --> 00:10:17.718
我们还能在那些玩家间发送消息

00:10:17.784 --> 00:10:20.454
这些消息会做为
Game Center通知到达

00:10:20.521 --> 00:10:24.024
你可以有那些消息在玩家间来回
发送

00:10:24.091 --> 00:10:28.061
或者多个玩家可以同时群发消息

00:10:28.762 --> 00:10:31.932
和这些消息一起的
我们可以加角标

00:10:32.399 --> 00:10:34.902
所以你可以发送这些消息并给
那些玩家加角标

00:10:34.968 --> 00:10:38.038
让他们知道会话中发生了一些事

00:10:38.105 --> 00:10:39.873
他们可能需要处理

00:10:40.240 --> 00:10:41.975
现在我只显示四个玩家

00:10:42.676 --> 00:10:47.147
但是在一个会话中我们可以最多
有100个玩家

00:10:47.447 --> 00:10:50.083
比以前能有的多了很多

00:10:50.484 --> 00:10:54.087
我们能有多个不同类型的会话

00:10:54.154 --> 00:10:56.790
你可以有只有一或两个玩家的小型
会话

00:10:56.857 --> 00:10:59.593
你也可以有4个 100个 7个玩家

00:10:59.660 --> 00:11:03.664
那些玩家可以被分到不同组中

00:11:03.730 --> 00:11:07.234
所有这些会话可以同时运行
并且你的玩家可以

00:11:07.301 --> 00:11:10.370
同时在所有不同的会话中

00:11:11.538 --> 00:11:14.308
我们还有实时流
如果你在会话中

00:11:14.374 --> 00:11:18.579
你想要快速在不同玩家间传送数据

00:11:18.645 --> 00:11:21.715
那么你的玩家只需要设置他们的
连接状态

00:11:21.982 --> 00:11:24.885
我们会在后台建立管道

00:11:24.952 --> 00:11:29.089
这允许玩家开始互相通信

00:11:30.224 --> 00:11:36.563
让我们进入实际的API看看
一个会话是由什么组成的

00:11:36.964 --> 00:11:39.933
我们有一些类
我们有GKGameSession

00:11:40.000 --> 00:11:43.971
它允许你的玩家和会话数据

00:11:44.037 --> 00:11:45.539
以及其他玩家互动

00:11:45.606 --> 00:11:48.375
我们有GKCloudPlayer
是会话中的一个玩家

00:11:48.609 --> 00:11:52.279
GKEventListener
帮助你知道发生的重要事

00:11:52.346 --> 00:11:54.681
在你的玩家所在的任何会话中

00:11:55.015 --> 00:11:57.284
我们还有GKGameSessionError

00:11:57.351 --> 00:12:00.053
给你更具体的错误

00:12:01.088 --> 00:12:04.691
当你和会话一起工作时有可能遇到

00:12:05.425 --> 00:12:07.661
让我们谈谈
GKGameSession

00:12:08.428 --> 00:12:10.464
这是你主要的驮马

00:12:10.531 --> 00:12:13.066
每个会话的几乎所有工作都是
在这完成的

00:12:13.133 --> 00:12:16.336
它基本上允许你做任何事
你可以创建一个会话

00:12:16.403 --> 00:12:19.139
离开会话 载入和保存游戏数据

00:12:19.206 --> 00:12:20.741
分享会话

00:12:20.807 --> 00:12:22.576
添加和删除玩家

00:12:22.643 --> 00:12:25.145
查看谁正在玩
发送通知

00:12:25.212 --> 00:12:26.713
设置和清除角标

00:12:26.780 --> 00:12:29.316
加入流
在那些流上发送数据

00:12:29.383 --> 00:12:33.320
基本上你将要做的所有事都需要
和GKGameSession互动

00:12:34.955 --> 00:12:36.623
关于它的更多细节

00:12:37.591 --> 00:12:41.662
你可以最多储存512KB的游戏数据

00:12:42.196 --> 00:12:44.798
数据会被储存在用户的iCloud上

00:12:44.865 --> 00:12:49.369
这不是关联到你的游戏
用户会在其iCloud上有这些数据

00:12:49.436 --> 00:12:52.005
这会计入他们的iCloud限制

00:12:52.272 --> 00:12:54.041
它会遵守CloudKit惯例

00:12:54.107 --> 00:12:57.611
关于谁拥有那些数据
数据是怎样分享的 隐私

00:12:57.678 --> 00:12:59.813
当数据被删除时发生了什么

00:13:00.214 --> 00:13:03.483
消息和角标 像我说过的
Game Center通知一样进来

00:13:03.550 --> 00:13:05.052
它们被这样加角标

00:13:05.118 --> 00:13:07.988
现在可以更直接地控制角标

00:13:08.055 --> 00:13:09.289
被你 作为开发者

00:13:10.290 --> 00:13:11.558
我们会更深入一些

00:13:11.625 --> 00:13:13.694
但是角标数字来自哪里会很清楚

00:13:13.760 --> 00:13:17.931
而且你应该能够理解它为什么是
这样 它是什么 并能改变它

00:13:17.998 --> 00:13:19.199
成为任何你想要的

00:13:21.335 --> 00:13:24.371
我们还有这些实时流

00:13:24.438 --> 00:13:26.773
利用已有的Apple基础设施

00:13:26.840 --> 00:13:30.577
这和FaceTime和
iMessage运行在同样的技术上

00:13:30.644 --> 00:13:34.448
所以它很强大 稳定
它被建造来处理大量数据

00:13:35.616 --> 00:13:38.051
所以若我们想要创建一个会话
我们需要做什么？

00:13:38.252 --> 00:13:42.890
首先我们需要一个标题
用来描述这个会话

00:13:42.956 --> 00:13:45.759
你可以定义它
或者从用户那得到它

00:13:45.826 --> 00:13:47.194
你需要容器标识符

00:13:47.261 --> 00:13:50.931
你为你的应用设置的iCloud容器

00:13:50.998 --> 00:13:54.668
并且设置一个可以在多个
应用之间使用的容器

00:13:54.735 --> 00:13:58.338
如果你想多个游戏可以访问相同
的数据

00:13:58.405 --> 00:14:00.674
比如你有免费版本和付费版本

00:14:00.741 --> 00:14:05.546
或者你的游戏的其他版本
如果你的设置正确

00:14:05.612 --> 00:14:09.583
他们仍然都能访问相同数据

00:14:10.017 --> 00:14:13.020
你还可以设置流玩家的最大数量

00:14:13.086 --> 00:14:17.524
有一个硬限制是最多16名玩家
可以在一个实时流中

00:14:17.758 --> 00:14:20.727
但是如果你想要使它更低
或者不同

00:14:20.794 --> 00:14:23.564
你可以在创建会话时降低限制

00:14:24.031 --> 00:14:25.966
但是你需要在创建时决定它

00:14:27.000 --> 00:14:32.539
然后你用所有相关信息调用
createSessionInContainer

00:14:32.606 --> 00:14:37.377
它会给你一个会话
你可以开始操作和使用它

00:14:39.146 --> 00:14:41.381
你需要对会话做的第一件事

00:14:41.448 --> 00:14:43.784
是找到如何保存和载入你的数据

00:14:44.318 --> 00:14:46.787
任何会话中的玩家都可以访问
那些数据

00:14:46.854 --> 00:14:49.256
这只是一个每个人都在使用的
二进制大对象

00:14:49.456 --> 00:14:52.426
还有一点会话的元数据

00:14:52.492 --> 00:14:55.562
帮助你避免和解决冲突

00:14:55.629 --> 00:14:57.931
那是最后修改日期和最后修改玩家

00:14:57.998 --> 00:14:59.867
这样你知道谁最后修改了它

00:15:00.634 --> 00:15:03.770
它是否对你很重要需要保存

00:15:03.837 --> 00:15:06.039
或者你的数据很有可能是最新的

00:15:06.240 --> 00:15:08.275
你可以调用
loadDataWithCompletionHandler

00:15:08.342 --> 00:15:09.743
它会把数据提供给你

00:15:11.745 --> 00:15:13.447
你可能还想保存数据

00:15:13.547 --> 00:15:15.649
我之前说过 512KB

00:15:16.450 --> 00:15:18.852
但是你可以对那个数据做任何你
想做的

00:15:18.919 --> 00:15:23.524
它可以是任何东西
只要在大小的限制内

00:15:23.690 --> 00:15:26.293
以completionHandler
来调用saveData

00:15:26.727 --> 00:15:28.028
如果有冲突

00:15:28.095 --> 00:15:30.964
如果其他人在间隔里进行了保存

00:15:31.031 --> 00:15:35.135
你会得到错误和冲突的数据

00:15:35.202 --> 00:15:37.404
我们等会会谈到更多关于这的内容

00:15:38.272 --> 00:15:40.174
任何时候有人保存数据

00:15:40.240 --> 00:15:42.809
会伴随一个事件监听器

00:15:42.910 --> 00:15:46.880
如果你设置事件监听器来监听
一个会话中的玩家保存数据

00:15:46.947 --> 00:15:49.650
那么你会知道什么时候其他人
保存了数据

00:15:49.716 --> 00:15:53.253
这样你很有可能需要更新和解决

00:15:53.320 --> 00:15:55.756
数据的任何本地冲突

00:15:57.357 --> 00:16:00.327
像我说的
保存冲突可能发生

00:16:00.661 --> 00:16:05.365
这发生在两个玩家尝试在几乎
相同的时间保存数据

00:16:05.933 --> 00:16:08.669
因为没有正式的经过一回合

00:16:08.735 --> 00:16:12.339
很有可能两个玩家在同时进行了
一轮

00:16:12.406 --> 00:16:15.943
如果你是这么设计和实现你的
游戏的

00:16:16.443 --> 00:16:19.813
假设我们有玩家2和3都在同一时间
保存

00:16:19.880 --> 00:16:22.983
他们中的一个会赢
我假设是玩家2

00:16:23.483 --> 00:16:27.654
这表明当玩家3尝试保存时
他会得到一个错误

00:16:27.721 --> 00:16:30.190
而且冲突数据会被返回

00:16:31.258 --> 00:16:34.795
现在你需要找出如何解决这个冲突

00:16:34.962 --> 00:16:39.032
因为我们没有指定数据格式

00:16:39.099 --> 00:16:41.401
我们也不知道数据的意思

00:16:41.468 --> 00:16:43.770
所以你需要自己设计数据结构

00:16:43.837 --> 00:16:46.073
用一种方式
使你容易

00:16:46.139 --> 00:16:49.042
找出那些冲突是什么并解决它们

00:16:49.109 --> 00:16:51.478
然后重新调用saveData

00:16:52.346 --> 00:16:54.448
使那些数据被保存

00:16:54.581 --> 00:16:58.185
如果你不重新调用saveData
你的数据不会被保存

00:16:58.252 --> 00:17:00.387
你需要继续调用saveData

00:17:00.554 --> 00:17:02.890
直到不返回冲突

00:17:04.758 --> 00:17:06.727
然后所有东西都是最新的

00:17:06.792 --> 00:17:09.997
所有东西对你的用户都是一样的

00:17:10.063 --> 00:17:11.865
然后你可以继续

00:17:15.669 --> 00:17:18.372
然后每件事都很完美

00:17:20.307 --> 00:17:22.943
我们已经谈过了多人游戏
你怎么获得

00:17:23.510 --> 00:17:25.444
额外的玩家到你的会话中？

00:17:26.579 --> 00:17:29.650
任何在会话中的玩家可以邀请其他
玩家参加

00:17:29.716 --> 00:17:34.855
你会获得一个URL
你需要把它发给其他人

00:17:34.955 --> 00:17:38.659
你可通过iMessage 电子邮件
Twitter Facebook发送它

00:17:38.725 --> 00:17:40.928
打印 粘到一颗树上
这可能不是个好方法

00:17:42.362 --> 00:17:45.165
但是只要你把这个URL给其他人

00:17:45.365 --> 00:17:49.336
他们可以点击它
然后可以加入那个会话

00:17:51.672 --> 00:17:53.607
最简单的方法是通过分享表

00:17:54.408 --> 00:17:57.411
因为它就在这弹出
然后你可以发送消息

00:17:57.477 --> 00:18:00.180
这可能是最简单的这么做的方法

00:18:00.247 --> 00:18:02.182
如果玩家1

00:18:02.249 --> 00:18:07.688
如果他从会话中得到URL

00:18:08.522 --> 00:18:11.091
他们用分享表设立iMessage

00:18:11.959 --> 00:18:14.194
来发送给玩家2
他们添加了一些文字

00:18:14.261 --> 00:18:18.765
“嘿 你想和我一起玩吗？”
结果是这个iCloud URL

00:18:18.999 --> 00:18:21.535
它会被发送给玩家2
他们会点击它

00:18:21.602 --> 00:18:23.770
一旦他们这样做
玩家2就加入了

00:18:24.705 --> 00:18:27.007
为了获得这个URL

00:18:27.074 --> 00:18:29.443
你只需要调用
getShareURLWithCompletionHandler

00:18:29.510 --> 00:18:32.446
它会给你一个URL
你可以对它做任何你想做的

00:18:33.814 --> 00:18:37.251
然后无论何时一个玩家加入了会话

00:18:37.317 --> 00:18:41.088
事件监听器didAddPlayer
将被调用

00:18:41.321 --> 00:18:44.625
这会让你知道其他人加入了你的
会话

00:18:44.691 --> 00:18:48.395
并且相应地继续进行游戏

00:18:49.196 --> 00:18:53.267
我们一直在说玩家
他们到底是什么？

00:18:53.567 --> 00:18:55.335
我们有GKCloudPlayer

00:18:55.769 --> 00:18:59.706
这和你以前使用的
GKPlayers不同

00:18:59.773 --> 00:19:03.944
GKCloudPlayer
只在会话中使用

00:19:05.546 --> 00:19:07.014
它有两部分数据

00:19:07.080 --> 00:19:11.385
一个对你的应用来说独特的
玩家标识符和显示名字

00:19:11.652 --> 00:19:18.192
这是用户想用来显示的名字

00:19:19.126 --> 00:19:21.628
这完全不是一个GKPlayer对象

00:19:21.695 --> 00:19:24.064
如果你尝试把它用于排行榜
或成就

00:19:24.131 --> 00:19:26.166
其他多人游戏 或任何事

00:19:26.233 --> 00:19:28.836
它并不工作
所以请不要这么做

00:19:30.103 --> 00:19:31.772
每个人都会很失望

00:19:33.874 --> 00:19:35.876
所以怎么获得我们的云玩家

00:19:37.110 --> 00:19:39.446
我们可以获得当前登录的玩家

00:19:39.513 --> 00:19:44.051
会话中的大部分都会从你的
当前玩家中被调用

00:19:44.117 --> 00:19:47.120
虽然并不需要确保你有这个玩家

00:19:47.187 --> 00:19:50.157
你说 哦这个玩家正在保存数据

00:19:50.224 --> 00:19:52.559
这些都在后台为你处理了

00:19:52.626 --> 00:19:56.396
但是你可能想知道谁拥有会话？

00:19:56.463 --> 00:19:59.700
你可能想知道如果会话被删除了

00:19:59.766 --> 00:20:01.034
如果其他玩家拥有它

00:20:01.101 --> 00:20:03.337
这将会删除每个人的数据

00:20:03.403 --> 00:20:06.139
你可能还想要清除你的角标

00:20:06.206 --> 00:20:10.010
发送消息
知道更多的这些

00:20:10.077 --> 00:20:12.646
你还可以获得会话中的其他玩家

00:20:12.713 --> 00:20:14.848
这只是会话的一个属性

00:20:15.082 --> 00:20:20.053
这是你把消息发送给其他玩家的
最好方式

00:20:20.120 --> 00:20:22.189
特别是设置和清除角标

00:20:22.456 --> 00:20:25.025
说到消息和角标

00:20:25.392 --> 00:20:26.527
让我们谈谈那些

00:20:29.096 --> 00:20:30.797
这些消息
我们称之为消息

00:20:30.864 --> 00:20:33.267
但它们作为
Game Center通知传入

00:20:33.333 --> 00:20:37.037
像我说的 所有玩家都可以发送消息
在任何时候给任何玩家

00:20:37.104 --> 00:20:39.139
这些消息很容易本地化

00:20:39.673 --> 00:20:43.243
你还可以和消息一起发送一点数据

00:20:43.310 --> 00:20:46.980
如果有相关信息

00:20:47.047 --> 00:20:50.450
你可能想传给其他玩家关于这个
消息是什么

00:20:50.517 --> 00:20:53.287
或者有什么特殊的东西是他们
应该看的

00:20:53.854 --> 00:20:58.025
并且你还可以选择性的给消息
接收者加角标

00:20:58.091 --> 00:21:01.161
这样任何收到消息的人也会收到
一个角标

00:21:01.929 --> 00:21:03.163
和消息

00:21:03.230 --> 00:21:04.831
那代码是怎样的？

00:21:06.099 --> 00:21:10.504
sendMessageWithLocalizedKey
你有了所有参数 发送给谁

00:21:10.571 --> 00:21:12.506
你是否想给那些玩家加角标

00:21:12.573 --> 00:21:14.741
被调用的事件监听器是

00:21:14.808 --> 00:21:17.811
会话didReceiveMessagefromPlayer

00:21:17.878 --> 00:21:21.448
会在任何一个通知到达时被调用

00:21:21.515 --> 00:21:25.619
让玩家知道有东西到达

00:21:25.686 --> 00:21:29.256
他们可能想知道或处理

00:21:31.525 --> 00:21:32.426
角标

00:21:32.526 --> 00:21:35.662
我说过角标可以被包括在消息中

00:21:35.929 --> 00:21:39.366
基本上任何时候你发送一条消息

00:21:39.433 --> 00:21:43.971
你可以为那名玩家启用角标状态

00:21:44.271 --> 00:21:46.340
你每个会话获得一个角标

00:21:46.406 --> 00:21:50.644
这表明是否有事需要你来处理

00:21:50.978 --> 00:21:55.449
这些角标可以在任何时候设置和清除

00:21:55.949 --> 00:21:59.119
所以如果你发送一条消息然后

00:21:59.453 --> 00:22:02.556
像是 嘿我在游戏里需要帮助
我们正在做这件事

00:22:02.623 --> 00:22:05.893
然后没有人出现
你可以清除角标

00:22:05.959 --> 00:22:07.895
像是 没关系 我不想和你说话

00:22:09.863 --> 00:22:14.134
所以你可以保持所有数据相关并
最新

00:22:15.102 --> 00:22:17.137
应用图标会显示总计数

00:22:17.204 --> 00:22:20.207
如果你有三个会话并且都有角标

00:22:20.274 --> 00:22:22.242
应用图标会显示3

00:22:22.609 --> 00:22:26.113
如果只有一个有角标
图标会显示1

00:22:26.380 --> 00:22:28.382
我们会帮你合计它们

00:22:28.448 --> 00:22:32.953
但是会话设置角标是基于什么应该
很清楚

00:22:33.020 --> 00:22:34.855
角标数字来自哪

00:22:36.857 --> 00:22:40.093
所以让我们谈谈管理会话

00:22:40.394 --> 00:22:44.331
我们创建了一个会话
我们保存了它 我们载入了它

00:22:44.398 --> 00:22:48.101
我们载入了数据
我们把它发送给一些玩家

00:22:48.902 --> 00:22:54.575
你的用户关闭了你的应用
他们完成了一些别的事

00:22:54.641 --> 00:22:57.244
你回来
你想要载入那些会话

00:22:57.311 --> 00:23:00.547
并确保你获得所有相关数据

00:23:00.614 --> 00:23:02.216
这样他们可以再次开始游戏

00:23:03.584 --> 00:23:08.088
你要做的第一件事是调用载入会话
loadSessionsInContainer

00:23:08.155 --> 00:23:11.959
这个容器和开始的应用容器是同一个
你在里面创建了会话

00:23:12.192 --> 00:23:14.461
这会载入准系统数据

00:23:14.528 --> 00:23:17.497
为你的本地玩家参与的所有会话

00:23:19.032 --> 00:23:21.869
然后根据那些数据

00:23:21.935 --> 00:23:25.806
你会想要找出你要载入哪个会话

00:23:25.873 --> 00:23:29.209
会话有两个主要部分用来识别它

00:23:29.276 --> 00:23:32.546
一个是你给我们的标题
但是标题并不是独特的

00:23:32.613 --> 00:23:34.481
你可以用任何你想用的

00:23:35.182 --> 00:23:39.052
所以这不足以用来载入一个会话

00:23:39.319 --> 00:23:43.023
当创建会话时我们会给你一个
标识符

00:23:43.090 --> 00:23:46.960
你要用它来载入特定会话

00:23:47.794 --> 00:23:51.999
调用loadSessionWithIdentifier
这会给你会话的所有信息

00:23:52.065 --> 00:23:54.368
包括你需要知道的所有事

00:23:54.434 --> 00:23:56.637
用来开始载入数据

00:23:56.703 --> 00:24:00.207
发送消息给其他玩家
继续游戏

00:24:01.508 --> 00:24:03.911
你可能会想删除会话

00:24:04.244 --> 00:24:07.047
如果你调用
removeSessionWithIdentifier

00:24:07.114 --> 00:24:09.516
这和我们刚刚说到的是同样的标识符

00:24:11.318 --> 00:24:13.353
如果玩家不拥有会话

00:24:13.420 --> 00:24:15.822
这只会把他们删除出会话

00:24:16.023 --> 00:24:18.358
并不会删除任何数据

00:24:18.659 --> 00:24:25.199
但是如果你删除那个玩家创建的会话

00:24:25.632 --> 00:24:27.401
这会删除数据

00:24:27.467 --> 00:24:30.571
不仅仅是对这个玩家
而是玩家中的所有人

00:24:30.637 --> 00:24:34.441
这时你可能想看看谁是本地玩家

00:24:34.508 --> 00:24:37.811
找出他们是不是要对每个人这么做

00:24:37.878 --> 00:24:40.113
也许发送

00:24:41.181 --> 00:24:43.817
警告给用户 嘿你会为每个人删除它

00:24:43.884 --> 00:24:45.552
这样他们知道他们是在做什么

00:24:48.589 --> 00:24:51.358
任何时候一个玩家被删除了

00:24:51.425 --> 00:24:53.894
事件监听器didRemovePlayer
会被调用

00:24:53.961 --> 00:24:55.963
这样你就知道有人离开了

00:24:56.129 --> 00:24:59.366
你可以相应地继续更新你的游戏

00:25:01.768 --> 00:25:03.937
让我们谈谈游戏会话流

00:25:04.004 --> 00:25:06.006
这是会话中的实时元素

00:25:06.073 --> 00:25:09.309
目前为止的其他内容听起来都
是基于回合的

00:25:09.376 --> 00:25:11.612
你保存 发送消息

00:25:11.879 --> 00:25:16.416
我们还可以在游戏中有实时元素

00:25:16.950 --> 00:25:18.318
游戏会话流

00:25:18.385 --> 00:25:21.788
你可以连接当前在会话中的任何玩家

00:25:21.855 --> 00:25:23.257
每个在会话中的人

00:25:23.323 --> 00:25:25.726
如果他们愿意开始互相发送数据

00:25:25.792 --> 00:25:27.227
这是你如何这么做

00:25:27.961 --> 00:25:32.633
你可以查看会话中任意玩家的状态

00:25:33.166 --> 00:25:37.804
你可以发送数据给所有玩家
在你建立的连接上

00:25:37.871 --> 00:25:42.376
你还可以添加和删除玩家
而不需要重新开始连接

00:25:42.442 --> 00:25:44.411
你可以让一些人参加

00:25:44.478 --> 00:25:47.614
两个人在玩
第三个人想加入

00:25:47.681 --> 00:25:49.883
你不需要重置所有事

00:25:49.950 --> 00:25:51.051
一旦他们开始

00:25:51.118 --> 00:25:54.721
他们就开始接收和发送数据
你不需要进行握手

00:25:54.788 --> 00:25:57.357
我们在后台为你处理这些

00:25:58.792 --> 00:26:01.094
那么我们怎么建立连接？

00:26:01.161 --> 00:26:04.565
你只需要为玩家设定连接状态

00:26:04.865 --> 00:26:08.402
你只需要以completionHandler
调用setConnectionState

00:26:08.769 --> 00:26:12.906
有很多原因可能造成这失败
其中一个原因是

00:26:13.140 --> 00:26:16.510
如果已经达到会话的最大玩家数

00:26:16.577 --> 00:26:19.479
如果第17个玩家尝试加入流

00:26:19.546 --> 00:26:22.182
你一共有17人

00:26:22.416 --> 00:26:28.055
那么这就会失败
他们无法加入流

00:26:28.322 --> 00:26:30.858
你可以看到玩家是否被设置一个
特定状态

00:26:30.924 --> 00:26:33.260
这个状态是连接和断开

00:26:33.327 --> 00:26:36.897
你可以看到多少其他玩家目前
已经连接和他们是谁

00:26:36.964 --> 00:26:41.502
任何时候一名玩家改变连接状态

00:26:41.568 --> 00:26:44.705
不管是连接或断开
事件监听器 会话

00:26:44.771 --> 00:26:48.275
玩家 didChangeConnectionState
会被调用

00:26:48.609 --> 00:26:53.714
这样你就知道那是否改变了

00:26:53.780 --> 00:26:56.383
和你目前和多少人一起玩

00:26:56.783 --> 00:27:00.487
一旦你建立了连接
你可能想开始发送数据

00:27:01.455 --> 00:27:04.892
所有的数据会被发送
给所有连接的玩家

00:27:04.958 --> 00:27:07.394
你可以发送这些
可靠或不可靠

00:27:07.461 --> 00:27:10.931
和我们的实时API相同

00:27:11.265 --> 00:27:15.002
根据哪个更重要
确保玩家收到数据

00:27:15.068 --> 00:27:19.439
或者确保他们尽快收到数据

00:27:20.941 --> 00:27:22.910
任何时候数据被发送了

00:27:23.143 --> 00:27:26.146
事件监听器
didReceiveDataFromPlayer会被调用

00:27:26.213 --> 00:27:31.218
你可以获得数据并在本地更新游戏

00:27:31.385 --> 00:27:37.357
并继续玩你的游戏

00:27:38.358 --> 00:27:42.930
这就是构成会话的所有基本要素

00:27:43.363 --> 00:27:46.800
让我们谈谈一些例子
看看它实际看起来是怎样

00:27:46.867 --> 00:27:48.869
当你创建一个游戏时

00:27:50.404 --> 00:27:54.875
首先你得到你基本的回合制游戏

00:27:55.242 --> 00:27:57.511
你建立了会话 获得游戏数据

00:27:57.578 --> 00:27:59.112
加入了一些玩家

00:27:59.947 --> 00:28:01.181
可能是玩家1的回合

00:28:01.248 --> 00:28:04.818
他们首先发现是他们的回合
并且保存数据

00:28:04.885 --> 00:28:07.588
数据可以被玩家2 3 4载入

00:28:08.155 --> 00:28:12.125
玩家1可以向玩家2发送消息

00:28:12.292 --> 00:28:14.928
发送角标并说 嘿轮到你了

00:28:14.995 --> 00:28:16.396
可能你想这么做

00:28:16.864 --> 00:28:19.366
玩家2可以载入游戏 开始玩

00:28:19.433 --> 00:28:24.838
找出要怎么处理新数据
进行他们的回合 保存数据

00:28:25.606 --> 00:28:29.142
然后把回合交给玩家4

00:28:29.476 --> 00:28:33.113
因为没有特定的方法
关于回合如何传递

00:28:33.180 --> 00:28:36.717
这由你决定
你可以从1到2 从2到3

00:28:36.950 --> 00:28:38.919
从4到1 你想怎样都行

00:28:38.986 --> 00:28:42.756
没有回合传递的特定方法

00:28:42.823 --> 00:28:45.826
坦白说我们不知道你在干什么

00:28:47.761 --> 00:28:49.796
所以你把游戏传递给玩家4

00:28:49.863 --> 00:28:51.965
他们完成他们的回合并继续

00:28:52.032 --> 00:28:56.436
你有了一个相当基本的回合制
游戏所需的所有元素

00:28:57.571 --> 00:28:59.673
你还可以做一个实时游戏

00:29:00.073 --> 00:29:04.178
你设置好所有玩家

00:29:04.244 --> 00:29:07.681
你让每个人打开连接状态

00:29:07.748 --> 00:29:09.850
一旦连接状态打开

00:29:09.917 --> 00:29:13.820
我们会在后台建立管道来允许他们
互相连接

00:29:14.288 --> 00:29:16.423
一旦全都建立起来

00:29:16.490 --> 00:29:19.026
你的玩家可以开始发送数据给其他人

00:29:19.593 --> 00:29:22.930
这些数据会继续传送

00:29:22.996 --> 00:29:24.665
只要这些连接可用

00:29:24.731 --> 00:29:27.401
关于会话

00:29:27.467 --> 00:29:30.437
如果你想在结束时保存任何信息

00:29:30.504 --> 00:29:33.373
比如谁赢了 排名

00:29:33.440 --> 00:29:36.176
或任何信息
关于这个特定实时游戏

00:29:36.243 --> 00:29:39.880
你可以有一些持续的数据

00:29:39.947 --> 00:29:42.082
你想和会话一起保存

00:29:43.450 --> 00:29:46.253
这些是基本的例子

00:29:46.553 --> 00:29:48.589
但会话真正强大之处

00:29:49.156 --> 00:29:52.059
是可以进行更复杂的游戏

00:29:52.826 --> 00:29:55.295
假设你有一个游戏会话

00:29:55.362 --> 00:29:59.466
这是一个回合制游戏
但是你想要更复杂的回合

00:29:59.633 --> 00:30:01.235
这有一个游戏

00:30:01.301 --> 00:30:04.371
它有交易卡片的元素

00:30:04.438 --> 00:30:08.041
当来到玩家的回合时
你可能可以交易卡片

00:30:08.108 --> 00:30:09.943
可能用砖交易羊或者什么东西

00:30:11.512 --> 00:30:16.617
你可以通过桌上谈话

00:30:17.451 --> 00:30:20.020
在一个真的桌面游戏中完成的事情

00:30:20.087 --> 00:30:22.789
你可以用会话更容易地完成

00:30:23.423 --> 00:30:27.961
假设是玩家1的回合
他想要和其他玩家交易

00:30:28.028 --> 00:30:32.766
然后他们发送一条消息说
“嘿 我想要用砖交易羊

00:30:32.833 --> 00:30:33.967
有人感兴趣吗？”

00:30:34.034 --> 00:30:37.304
你可以发送这条消息和一些数据

00:30:37.371 --> 00:30:39.540
让用户知道
嘿这是我想要的

00:30:39.740 --> 00:30:40.974
然后发送给每个人

00:30:41.041 --> 00:30:44.511
假设玩家4像是
“哦听起来很好 我愿意进行交易”

00:30:44.578 --> 00:30:48.682
或者“我对这个交易没兴趣
用小麦交易羊如何？”

00:30:48.749 --> 00:30:49.816
或者类似的

00:30:49.983 --> 00:30:52.319
他们可以发送消息给玩家1

00:30:52.386 --> 00:30:53.620
加角标并说

00:30:54.321 --> 00:30:57.357
“嘿 这是...我接受你的交易”
或者“我有不同的交易”

00:30:57.424 --> 00:31:00.727
你可以来回发送消息
找出你想做的

00:31:00.794 --> 00:31:04.364
一旦玩家1决定 “我接受交易”
或“我拒绝交易”

00:31:04.431 --> 00:31:07.634
他们可以进行他们的回合
去掉每个人的角标

00:31:08.168 --> 00:31:11.038
保存数据 去掉自己的角标

00:31:11.104 --> 00:31:15.976
然后把回合交给玩家2

00:31:16.810 --> 00:31:22.649
我们还可以更容易地加入

00:31:23.517 --> 00:31:26.186
多人游戏
这可能复杂一点

00:31:26.253 --> 00:31:30.958
假设你有一个多人游戏
如King of the Hill之类的东西

00:31:31.024 --> 00:31:32.426
所有人都在会话中

00:31:32.492 --> 00:31:34.795
但是你一次只想两个人能玩

00:31:35.362 --> 00:31:37.698
你开始你的会话
你有玩家1和2

00:31:37.764 --> 00:31:39.233
他们会打开连接状态

00:31:39.299 --> 00:31:42.135
加入一个游戏并来回传递数据

00:31:42.202 --> 00:31:47.608
他们会有一些一对一的肉搏战

00:31:48.075 --> 00:31:50.344
其中的一个玩家会被淘汰

00:31:50.477 --> 00:31:52.012
让我们假设是玩家1

00:31:54.648 --> 00:31:59.553
然后玩家2继续和队列中的下一个
人玩

00:32:00.020 --> 00:32:02.289
你不需要用任何方式停止游戏

00:32:02.356 --> 00:32:04.825
你不需要建立任何连接屏幕

00:32:04.892 --> 00:32:07.961
一旦玩家3设定了连接状态

00:32:08.028 --> 00:32:10.264
你可以开始来回发送数据

00:32:10.330 --> 00:32:12.733
立即给玩家2和3

00:32:12.799 --> 00:32:16.970
他们会进行他们的回合
看谁赢了

00:32:17.237 --> 00:32:18.405
这次[听不清]

00:32:19.273 --> 00:32:23.377
然后玩家4可以加入这个打架

00:32:23.577 --> 00:32:26.480
他们可以建立连接并继续

00:32:26.547 --> 00:32:28.182
你可以继续这样

00:32:29.116 --> 00:32:31.285
继续进行任何循环赛

00:32:31.351 --> 00:32:34.221
如果你有100个玩家
你可以循环全部100个玩家

00:32:34.288 --> 00:32:38.192
继续进行King of the Hill式的打斗

00:32:38.258 --> 00:32:40.727
然后你可以保存游戏数据

00:32:41.762 --> 00:32:45.199
这允许有持续的排名

00:32:45.265 --> 00:32:47.167
和持续的天梯

00:32:47.234 --> 00:32:49.336
在会话中的这些人中

00:32:50.904 --> 00:32:55.542
另一个你可能遇到的情况是帮助
一名单人玩家

00:32:55.609 --> 00:32:58.545
假设你有一个单人游戏

00:32:58.612 --> 00:33:02.082
你用会话保存数据
这完全可以

00:33:02.149 --> 00:33:04.685
你完全可以用会话
来完成一个单人游戏

00:33:04.952 --> 00:33:07.020
并用这做为一种方法

00:33:07.321 --> 00:33:10.557
来保存和发送数据

00:33:10.624 --> 00:33:14.761
这样你的所有数据可以容易地更新
到所有设备中

00:33:16.330 --> 00:33:20.167
但是你的玩家遇到了困难
他们玩了好一会了

00:33:20.234 --> 00:33:23.871
他们无法完成这一关
他们真的有困难

00:33:24.071 --> 00:33:26.173
如果你这样实现你的游戏

00:33:26.240 --> 00:33:30.310
那么玩家1可以分享游戏给其他
玩家

00:33:30.744 --> 00:33:32.446
他们可以带入玩家2

00:33:32.646 --> 00:33:35.616
然后你可以加入一些元素允许
玩家2

00:33:35.682 --> 00:33:39.086
帮助玩家1通过这关
通过一些合作方法

00:33:39.152 --> 00:33:43.590
或者你可以允许玩家2帮玩家1
玩这一关

00:33:43.657 --> 00:33:46.493
这样他们就可以通过游戏卡关的地方

00:33:46.560 --> 00:33:48.929
让玩家1有更多乐趣

00:33:48.996 --> 00:33:53.433
玩家2可以进来
做任何你让他们做的

00:33:53.500 --> 00:33:55.135
保存游戏数据

00:33:55.903 --> 00:33:58.872
然后他们可以离开游戏

00:33:58.939 --> 00:34:01.275
玩家1可以继续玩游戏

00:34:01.575 --> 00:34:04.411
好像玩家2从来没有在游戏里出现
过一样

00:34:05.979 --> 00:34:08.715
这就是游戏会话

00:34:08.982 --> 00:34:13.954
它允许你和有iCloud账户的任何
人一起玩游戏

00:34:14.021 --> 00:34:16.790
你不需要是他们的好友

00:34:19.059 --> 00:34:22.295
所以更灵活的游戏结构
将允许你 开发者

00:34:22.362 --> 00:34:25.966
用任何你喜欢的方式建立游戏

00:34:26.400 --> 00:34:29.703
我们有很简单的多人游戏连接

00:34:29.770 --> 00:34:32.272
这很容易建立 很稳定

00:34:32.339 --> 00:34:34.942
允许传送大量的数据

00:34:35.475 --> 00:34:38.712
我们对看到新的可能的游戏类型
感到兴奋

00:34:38.779 --> 00:34:41.982
你会赶上因为会话的能力

00:34:42.049 --> 00:34:47.588
因为在游戏中混合回合制
和实时元素

00:34:47.855 --> 00:34:51.291
我们很想看到你们会做出什么

00:34:52.893 --> 00:34:55.596
这就是今年Game Center的新特性

00:34:55.661 --> 00:34:58.298
我们有新的基于消息的多人游戏邀请

00:34:58.365 --> 00:35:01.268
现在允许你能够发消息
给任何人玩游戏

00:35:01.802 --> 00:35:04.037
我们移除了Game Center应用

00:35:04.738 --> 00:35:08.475
我们有刚谈过的持续游戏会话

00:35:08.675 --> 00:35:11.378
我们还宣布了Apple Watch支持

00:35:12.212 --> 00:35:15.415
如果你想知道更多关于本次演讲的信息
你可以上这个链接

00:35:15.482 --> 00:35:17.518
我们是演讲611

00:35:18.051 --> 00:35:21.889
我们有一些相关演讲 你可能感兴趣

00:35:22.089 --> 00:35:25.392
我们有“Apple Watch游戏技术”
下午晚些时候

00:35:25.659 --> 00:35:31.231
这周早些时候我们还有一些演讲
你可以观看视频

00:35:32.332 --> 00:35:35.402
还有一些其他的
没有列在这里

00:35:35.469 --> 00:35:38.805
谢谢到来
有一个愉快的WWDC