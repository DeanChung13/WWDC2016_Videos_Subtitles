00:00:19.600 --> 00:00:24.033 
大家好
歡迎來到“驗證HTTP直播流”會話

00:00:24.500 --> 00:00:25.500 
我是Eryk

00:00:25.567 --> 00:00:27.300 
是一名Apple的媒體工程師

00:00:27.433 --> 00:00:28.367 
現在就開始吧

00:00:28.733 --> 00:00:29.600 
驗證確定完善性或準確性

00:00:29.667 --> 00:00:31.767 
我們驗證流的目的是什麼

00:00:32.100 --> 00:00:34.267 
是要確保該流的正確性

00:00:34.333 --> 00:00:36.067 
至少是結構的正確

00:00:36.667 --> 00:00:39.500 
結構檢測並不能發現所有潛在問題

00:00:39.567 --> 00:00:41.467 
但可以消除大部分的

00:00:42.500 --> 00:00:44.067 
爲了更準確

00:00:44.400 --> 00:00:47.900 
首先要確保播放列表和片段的格式正確

00:00:48.200 --> 00:00:51.500 
那麼軟件可以解析流嗎

00:00:51.567 --> 00:00:52.467 
HLS驗證

00:00:52.533 --> 00:00:54.933 
第二 我要有些額外要求

00:00:55.000 --> 00:00:59.033 
例如 HLS規格不需信息幀播放列表

00:00:59.100 --> 00:01:00.733 
但我們需要

00:01:00.800 --> 00:01:03.133 
因爲想要改善用戶體驗

00:01:04.000 --> 00:01:08.367 
第三
我們希望這些流來反映既定的最佳實踐

00:01:08.967 --> 00:01:09.833 
一切正常

00:01:09.900 --> 00:01:12.267 
最終都是爲了

00:01:12.333 --> 00:01:15.533 
確保流在設備上運行正常

00:01:17.800 --> 00:01:20.233 
現在讓我們談談規格

00:01:21.433 --> 00:01:24.767  
最重要的是HLS規格本身

00:01:25.533 --> 00:01:28.067  
如果你有過使用HLS的經驗

00:01:28.133 --> 00:01:30.300  
你可能看過這份文檔幾次

00:01:31.400 --> 00:01:36.767  
這是因特網工程作業推動
（IETF） 網絡草案

00:01:37.433 --> 00:01:40.967  
搜索“draft pantos”
就能找到

00:01:41.733 --> 00:01:44.400  
幾年前發佈了第一版

00:01:44.933 --> 00:01:47.000  
我們一年更新兩到三次

00:01:47.300 --> 00:01:49.733  
文檔詳細說明瞭播放列表結構

00:01:49.800 --> 00:01:52.133  
存在何種標籤 格式是什麼

00:01:52.500 --> 00:01:55.800  
並向客戶和服務器解釋職責

00:01:56.733 --> 00:01:57.567 
HLS編輯規範

00:01:57.633 --> 00:02:00.000 
這是我們最新推出的一個文檔

00:02:00.067 --> 00:02:02.267 
HLS編輯規範

00:02:03.800 --> 00:02:06.167 
可以在參考庫中找到

00:02:06.233 --> 00:02:09.500 
我們一開始在去年秋天推出tvOS版

00:02:09.967 --> 00:02:14.867 
在 WWDC
我們已經升級覆蓋iOS和OS

00:02:15.333 --> 00:02:19.900 
這份文件試圖涵蓋構成HLS的內容

00:02:22.700 --> 00:02:26.800 
規範要求有幾個來源

00:02:27.433 --> 00:02:30.900 
一些來自HLS規範的回波規範

00:02:30.967 --> 00:02:33.833 
例如 不連續性點位置

00:02:33.900 --> 00:02:36.333 
播放列表持續時間

00:02:36.900 --> 00:02:38.733 
一些必須要有設備的支持

00:02:38.833 --> 00:02:42.667 
例如 你的視頻都需要是H.264

00:02:42.733 --> 00:02:45.800 
或者每秒內容不能超過60幀

00:02:46.933 --> 00:02:49.533 
其他一些來自期望的用戶體驗

00:02:49.600 --> 00:02:53.367 
例如我們期望的I-Frame間隔

00:02:53.433 --> 00:02:55.833 
或者我們希望
大家來支持trick play

00:02:57.367 --> 00:03:02.500 
一些是根據我們過去七年的經驗和分析

00:03:02.867 --> 00:03:06.900 
我要說的是我們的傳送建議

00:03:07.200 --> 00:03:08.633 
我們推薦的比特率

00:03:08.967 --> 00:03:12.233 
我們對隱私和安全的建議

00:03:14.933 --> 00:03:17.967 
我列出來的要求僅僅只是幾個例子

00:03:18.033 --> 00:03:20.500 
讓大家對這個文檔有個概念

00:03:21.033 --> 00:03:23.867 
規範本身分成各種類別

00:03:23.933 --> 00:03:25.300 
例如視頻編碼

00:03:25.400 --> 00:03:26.233 
Trick Play

00:03:26.300 --> 00:03:27.533 
媒體分解

00:03:27.633 --> 00:03:29.200 
傳送等等

00:03:31.767 --> 00:03:35.000 
現在我們不會讓大家手動驗證

00:03:35.067 --> 00:03:37.400 
所以來看看我們提供的工具

00:03:38.000 --> 00:03:40.867 
但首先 你需要獲得工具

00:03:41.033 --> 00:03:44.033 
你能在開發人員流頁面
developer.apple.com/streaming

00:03:44.100 --> 00:03:48.633 
找到所以關於HLS的重要信息

00:03:49.667 --> 00:03:51.233 
如果我們往下滾動

00:03:51.300 --> 00:03:52.833 
大概右邊一半的位置

00:03:52.900 --> 00:03:54.800 
有一個鏈接“工具”下載

00:03:55.467 --> 00:04:00.700 
請注意你必須註冊成爲
開發人員激活Apple ID

00:04:00.767 --> 00:04:02.233 
才能進入頁面

00:04:02.567 --> 00:04:05.033 
但記住開發人員賬戶是免費的

00:04:06.033 --> 00:04:08.900 
一旦註冊了 就可以進入下載頁面

00:04:10.100 --> 00:04:14.033 
下載本身是個磁盤映像包含一個安裝包

00:04:14.633 --> 00:04:16.666 
現在截圖有點過時了

00:04:16.733 --> 00:04:21.132 
你應該看到一個2016年6月
或更新的磁盤映像

00:04:21.767 --> 00:04:24.567 
我們一年會更新幾次工具

00:04:25.400 --> 00:04:28.567 
順便說句 若在 WWDC 期間查看

00:04:28.633 --> 00:04:31.233 
新版本可能還沒有發佈

00:04:32.367 --> 00:04:33.900 
運行安裝程序後

00:04:33.967 --> 00:04:36.000 
出現了服務器工具

00:04:36.067 --> 00:04:39.800 
我要提醒大家
這些工具只在OS X上運行

00:04:39.867 --> 00:04:41.100 
HTTP直播流工具

00:04:41.167 --> 00:04:45.133 
頭兩個是驗證工具 會在後面介紹

00:04:46.033 --> 00:04:51.333 
接下來三個是文件
流和字幕的分割工具

00:04:51.767 --> 00:04:55.733 
想要簡要介紹下字幕分割工具

00:04:55.800 --> 00:04:59.333 
對於分割大型網頁VTTT

00:04:59.400 --> 00:05:04.600 
非常有用

00:05:05.167 --> 00:05:06.600 
最後兩個

00:05:07.567 --> 00:05:10.933 
是Variant Playlist Creator
用於創建主要播放列表

00:05:11.467 --> 00:05:16.600 
最後一個用於設置定時元數據格式

00:05:16.867 --> 00:05:19.233 
你可以插入使用分割工具

00:05:19.800 --> 00:05:21.867 
現在所有工具已經載入

00:05:22.233 --> 00:05:25.800 
你可以通過這些H選項獲得幫助

00:05:28.367 --> 00:05:30.667 
在我們介紹驗證工具前

00:05:30.733 --> 00:05:33.333 
我想簡單介紹下mediafilesegmenter

00:05:33.833 --> 00:05:36.533 
調用很簡單 只要傳到電影文件

00:05:37.167 --> 00:05:40.467 
就能生成媒體播放列表和片段

00:05:40.933 --> 00:05:44.700 
而這個工具有許多選項
但並沒有看起來那麼複雜

00:05:45.300 --> 00:05:47.467 
選項可以分成幾類

00:05:48.633 --> 00:05:50.533 
選項必須進行命名文件

00:05:50.600 --> 00:05:52.133 
構建播放列表

00:05:53.000 --> 00:05:56.833 
如何進行加密等等

00:05:57.533 --> 00:05:59.800 
甚至不用使用該介紹

00:06:00.067 --> 00:06:02.267 
mediafilesegmenter
可以很好進行交叉檢查

00:06:02.333 --> 00:06:04.700 
你對片段做的所有處理

00:06:06.967 --> 00:06:08.633 
進行驗證

00:06:09.233 --> 00:06:11.867 
媒體流驗證器是關鍵工具

00:06:12.500 --> 00:06:15.167 
你可以在主播放列表調用

00:06:17.100 --> 00:06:21.200 
在終端和json文件上生死輸出

00:06:21.567 --> 00:06:25.200 
json文件包含輸出所有的重要信息

00:06:25.267 --> 00:06:27.300 
還有更多數據

00:06:30.200 --> 00:06:32.300  
我想要調用幾個選項

00:06:32.867 --> 00:06:35.900  
首先你可以調整
json文件的名字和路徑

00:06:37.633 --> 00:06:39.233  
還可以調整超時

00:06:39.667 --> 00:06:40.900  
那麼什麼是超時？

00:06:41.267 --> 00:06:43.067  
默認情況下 驗證器超時

00:06:43.133 --> 00:06:45.800  
就是 5分鐘後停止處理

00:06:46.533 --> 00:06:50.533  
現在可能時間不夠
在要求流上處理一個大視頻

00:06:51.033 --> 00:06:55.467  
對於實時內容
5分鐘足夠進行初步檢查

00:06:55.533 --> 00:06:57.767  
你希望在更長的時間段進行檢查

00:06:57.833 --> 00:07:00.833  
來確定流的基本正確性

00:07:03.733 --> 00:07:06.767 
這個就是媒體流驗證器輸出

00:07:08.067 --> 00:07:11.700 
我們調出媒體流驗證器的URL

00:07:12.600 --> 00:07:15.933 
首先顯示版本號

00:07:16.000 --> 00:07:20.233 
然後輸出一些下載播放列表
和文件的痕跡

00:07:21.600 --> 00:07:25.300 
再輸出每個發現變量

00:07:25.367 --> 00:07:27.633 
複製和I-Frame變量的信息

00:07:28.267 --> 00:07:30.967 
現在很難進行

00:07:31.033 --> 00:07:33.800 
所以我們創建了HLS報告

00:07:34.767 --> 00:07:40.133 
這是個python
腳本採用json並進行總結提取

00:07:41.233 --> 00:07:44.067 
再生成HTML文件作爲輸出

00:07:45.300 --> 00:07:48.000 
文件名與json文件相同

00:07:48.067 --> 00:07:50.100 
除了拓展名不同

00:07:51.367 --> 00:07:54.067  
我還想調用幾個選項

00:07:54.633 --> 00:07:57.100  
我們可以改變HTML文件的名字

00:07:58.200 --> 00:08:02.433  
dash I或dash ID
選項很有用

00:08:02.500 --> 00:08:07.033  
在你想要匹配HTML輸出
和json文件選項時

00:08:07.100 --> 00:08:09.633  
當我說到例子時會

00:08:09.700 --> 00:08:11.333  
更詳細介紹工作原理

00:08:12.967 --> 00:08:16.033  
現在Verbose選項非常有用

00:08:16.100 --> 00:08:20.133  
可以告訴你許多關於變量和複製的信息

00:08:20.200 --> 00:08:23.700  
很遺憾 今天沒足夠時間詳細介紹輸出

00:08:23.767 --> 00:08:26.567  
但我想調用演示下

00:08:28.133 --> 00:08:29.333 
提交到App Store

00:08:29.400 --> 00:08:30.633 
快速放在一邊

00:08:31.167 --> 00:08:35.332 
你可以在提交
App Store前驗證流

00:08:36.000 --> 00:08:38.433 
也可以在提交時

00:08:38.500 --> 00:08:42.100 
在你的註釋域內
要包括一個測試流URL

00:08:42.167 --> 00:08:45.467 
這樣查看人就有可以查看的流

00:08:46.933 --> 00:08:47.767 
嗯 這個演示

00:08:47.833 --> 00:08:49.600 
我要運行一些演示

00:08:49.800 --> 00:08:52.200 
但不是在屏幕上運行全部

00:08:52.267 --> 00:08:55.133 
大家要嘗試跟着理解這些小文本

00:08:55.200 --> 00:08:57.767 
我拿到輸出會帶着大家瀏覽

00:08:59.700 --> 00:09:01.633 
首先 一個小命令行實例

00:09:03.267 --> 00:09:04.900 
運行媒體流驗證器

00:09:04.967 --> 00:09:07.767 
注意我給json文件的命名

00:09:08.833 --> 00:09:11.767 
我剛纔拿到個假URL 大家來試試

00:09:13.200 --> 00:09:16.367 
現在我們之前看到了輸出 就跳過

00:09:16.433 --> 00:09:19.200 
但記住運行可能需要幾分鐘

00:09:22.267 --> 00:09:25.500 
一旦完成 我們就能運行HLS報告

00:09:25.567 --> 00:09:28.733 
傳到驗證器創建的json文件

00:09:30.433 --> 00:09:34.233 
如果HLS報告運行正常
我們就不會有輸出

00:09:34.300 --> 00:09:36.333 
就只有HTML文件

00:09:37.233 --> 00:09:39.167 
如果我們查看當前目錄

00:09:39.667 --> 00:09:41.733 
就只有兩個文件

00:09:41.800 --> 00:09:44.400 
驗證器創建的json文件

00:09:44.467 --> 00:09:47.800 
和HLS報告創建的HTML文件

00:09:49.433 --> 00:09:52.033 
讓我們看一些示例報告

00:09:52.800 --> 00:09:56.567 
首先來看看有幾個常見問題的播放列表

00:09:58.467 --> 00:10:00.233  
這個就是報告

00:10:01.000 --> 00:10:03.967  
第一個要檢查的是流類型

00:10:06.233 --> 00:10:10.167  
一般會是VOD LIVE
或EVENT

00:10:11.300 --> 00:10:17.467  
這些反應了三種HLS支持的
基本流類型

00:10:18.167 --> 00:10:20.267  
但也有可能拿到
值爲“UNKNOWN”

00:10:20.333 --> 00:10:24.333 
這就意味着我們無法識別播放列表

00:10:24.667 --> 00:10:27.400 
更糟的話 可能拿到混合值

00:10:27.567 --> 00:10:31.200 
現在這說明有一些未知因素

00:10:31.267 --> 00:10:35.567 
就是有些媒體播放列表無法識別

00:10:35.767 --> 00:10:38.667 
或者更糟 有發生衝突的類型

00:10:38.733 --> 00:10:42.900 
例如 有些變量爲EVENT

00:10:42.967 --> 00:10:44.467 
而一些卻是LIVE

00:10:47.200 --> 00:10:51.100 
現在報告下一項就是變量概覽表

00:10:51.600 --> 00:10:54.200 
有一個視頻變量條目

00:10:55.433 --> 00:10:59.267 
如果我們剛好有混合流

00:10:59.333 --> 00:11:03.233 
就會成爲表內的
增加列說明播放列表類型

00:11:03.300 --> 00:11:05.200 
往右看就能

00:11:05.733 --> 00:11:07.867 
看到有更多的列

00:11:07.933 --> 00:11:09.333 
特別是

00:11:09.400 --> 00:11:13.167 
當我們要給VOD一個處理百分比列時

00:11:14.833 --> 00:11:19.400 
如果少於100％就說明
超時設置不夠長

00:11:19.767 --> 00:11:24.267 
如果有實時內容
就不會看到處理百分比

00:11:24.333 --> 00:11:26.000 
相反 會看到兩列

00:11:26.233 --> 00:11:29.000 
平均分段計數和平均播放列表時長

00:11:30.133 --> 00:11:33.700 
下一項要檢查的是差異百分比列

00:11:34.500 --> 00:11:37.167 
這列說明測量比特率相比

00:11:37.233 --> 00:11:40.033 
主播放列表顯示的值超過多少

00:11:40.700 --> 00:11:42.533 
現在這些值都太高了

00:11:42.600 --> 00:11:48.233 
注意變量超過了40％

00:11:49.533 --> 00:11:54.700 
現在這些值都應在
-10％-+10％範圍內

00:11:55.400 --> 00:11:58.133 
如果值爲正

00:11:58.200 --> 00:12:00.867 
就說明你申報的值應該增加

00:12:01.400 --> 00:12:02.867 
如果值爲負

00:12:03.067 --> 00:12:05.367 
申報的值就應減少

00:12:07.133 --> 00:12:08.600 
現在請注意我們有兩個

00:12:08.667 --> 00:12:13.800 
原因是我們播放列表中
申報了帶寬和平均帶寬

00:12:13.867 --> 00:12:18.067 
我們可以對比兩個的申報值和測量值

00:12:19.400 --> 00:12:24.067 
現在從百分比項很難

00:12:24.133 --> 00:12:26.300 
看出真正的區別

00:12:26.667 --> 00:12:32.133 
如果你添加--pl選項
意味播放列表

00:12:32.667 --> 00:12:38.933 
到HLS報告命令行 將看到兩個新列

00:12:39.633 --> 00:12:42.333 
播放列表率和播放列表平均率

00:12:43.233 --> 00:12:46.600 
從這個 我們可以看到例如變量1

00:12:46.833 --> 00:12:50.033 
申報值是392kb每秒

00:12:50.500 --> 00:12:53.933 
但測量值是551kb每秒

00:12:55.567 --> 00:12:59.267 
現在我們切換回沒-p選項的版本
向下滾動

00:13:00.000 --> 00:13:02.700 
有另一張表 複製概述

00:13:04.000 --> 00:13:07.267 
在主播放列表我們將音頻作爲獨立流

00:13:07.800 --> 00:13:10.467 
作爲複製 就在這兒報告

00:13:13.667 --> 00:13:17.233 
根據這張表 必須要修復的問題就是

00:13:17.667 --> 00:13:22.667 
要正確播放必須修復的問題

00:13:22.733 --> 00:13:26.600 
或者是我們認爲硬性要求的重要問題

00:13:28.367 --> 00:13:33.267 
請看項目#2和#4
就是我們剛纔提的問題

00:13:33.467 --> 00:13:35.700 
申報和測量的最高和平均比特率

00:13:35.933 --> 00:13:38.633 
相互不匹配

00:13:40.133 --> 00:13:43.367 
後面再解決項目3

00:13:44.867 --> 00:13:48.233 
向下滾 發現必須修復的問題

00:13:48.467 --> 00:13:52.267 
對於必須修復的問題我們強烈建議修復

00:13:54.233 --> 00:13:57.133  
現在就是根據報告信息

00:13:57.200 --> 00:14:01.700  
可以對報告信息進行回溯

00:14:02.100 --> 00:14:06.067  
找到媒體流驗證器和HLS報告的版本

00:14:06.133 --> 00:14:13.033  
這對大家給我們發生錯誤報告
和HLS報告輸出

00:14:13.633 --> 00:14:16.633  
很重要或者是讓大家
在下載更新版工具後

00:14:16.833 --> 00:14:20.800  
可以返回查看老版本

00:14:21.667 --> 00:14:23.600 
現在是項目5

00:14:23.667 --> 00:14:28.900 
顯示我們的播放列表中沒有字幕或標題

00:14:29.333 --> 00:14:31.100 
我們在下一個示例中修復

00:14:31.867 --> 00:14:33.567 
讓我們看看項目7

00:14:34.800 --> 00:14:39.267 
項目7說默認視頻變量

00:14:39.333 --> 00:14:42.600 
不是我們建議的

00:14:44.000 --> 00:14:47.200 
說的是變量#8

00:14:48.800 --> 00:14:51.267 
讓我們返回到變量概述

00:14:51.633 --> 00:14:55.400 
可以發現項目8高亮了項目數字

00:14:55.800 --> 00:14:57.933 
說明這個就是默認變量

00:14:58.000 --> 00:14:59.300 
記住這個默認變量

00:14:59.367 --> 00:15:02.167 
就是客戶最初播放的第一個變量

00:15:03.367 --> 00:15:05.700 
也是主播放列表的第一個變量

00:15:06.300 --> 00:15:10.100 
請注意這個最大速率是每秒8M

00:15:10.167 --> 00:15:12.767 
作爲默認值太高了

00:15:16.133 --> 00:15:19.300 
好了 這些都是我們會遇到的常見問題

00:15:20.033 --> 00:15:21.433 
我們第二個例子

00:15:22.200 --> 00:15:25.467 
之前已經在第一個例子修復指出的問題

00:15:28.767 --> 00:15:33.500  
調整了申報值
現在差異百分比是接近0

00:15:34.267 --> 00:15:36.033  
我們已經修復默認變量

00:15:36.167 --> 00:15:39.100  
變得更合理 在#4變量下

00:15:39.167 --> 00:15:44.300  
將不同的媒體播放列表
移到主播放列表的第一位

00:15:45.933 --> 00:15:47.967  
再看右側

00:15:48.200 --> 00:15:52.400  
我們修復超時設置
現在正在處理整個播放列表

00:15:55.033 --> 00:15:57.733 
現在我們已經修復了關於標題的問題

00:15:58.000 --> 00:16:00.500 
通過添加字幕播放列表修復的

00:16:01.367 --> 00:16:05.133 
現在注意字幕的複製 #12複製

00:16:05.400 --> 00:16:07.933 
沒有最大或平均率

00:16:09.067 --> 00:16:12.000 
原因是字幕播放列表沒有經過處理

00:16:12.367 --> 00:16:15.500 
我們把n/a放在已處理百分比欄上

00:16:15.567 --> 00:16:17.900 
提醒這個正在處理中

00:16:19.833 --> 00:16:25.167 
但還有個大問題要修復
就是沒有I-Frame播放列表

00:16:27.933 --> 00:16:32.333  
當我們添加I-Frame播放列表時
報告有哪些改變呢

00:16:32.500 --> 00:16:34.200  
第一部分看起來一樣

00:16:34.500 --> 00:16:35.733  
當往下滾動

00:16:36.600 --> 00:16:39.000  
除了其他的概述表外

00:16:39.067 --> 00:16:41.233  
還有個I-Frame變量概述

00:16:42.300 --> 00:16:45.767  
現在注意我們的差異百分比值有點不夠

00:16:45.833 --> 00:16:47.700  
但這些都在範圍內

00:16:48.033 --> 00:16:50.100  
記住範圍是+/-10％

00:16:51.600 --> 00:16:54.233  
現在看看這邊的兩列

00:16:54.500 --> 00:16:56.600  
比例平均數和乘數

00:16:57.167 --> 00:17:02.567  
比例平均數是I-Frame播放列表
影響最大的平均數據

00:17:03.633 --> 00:17:05.133  
就是有點拗口

00:17:05.567 --> 00:17:08.233  
記住測量平均比特率

00:17:08.300 --> 00:17:12.800  
指的是數據速率爲
1 X playback速率

00:17:13.767 --> 00:17:16.032  
但Trick Play的
I-Frames整點

00:17:16.099 --> 00:17:19.000  
的播放速率大於1 X speed

00:17:20.300 --> 00:17:23.700  
現在乘數告訴我們最低的播放速率

00:17:23.867 --> 00:17:26.166  
在該速率下會達到最差情況值

00:17:27.433 --> 00:17:29.100  
值高些會有改善

00:17:29.167 --> 00:17:31.400  
原因是我們放慢幀速率是爲了

00:17:31.467 --> 00:17:35.267  
將實際顯示幀速率保持在一個固定值

00:17:36.133 --> 00:17:38.000  
對於這些值我們要做的

00:17:38.067 --> 00:17:41.433  
就是與這兒的比例平均數據進行對比

00:17:41.500 --> 00:17:45.300  
與分辨率相同的正常變量數據速率對比

00:17:46.367 --> 00:17:48.100  
應該要接近值

00:17:48.167 --> 00:17:51.433  
或者I-Frame變量低於值

00:17:51.933 --> 00:17:55.933  
否則 Trick Play
可能會造成分辨率下降

00:17:59.133 --> 00:18:02.967  
在報告中 我已經有了一個新欄

00:18:03.367 --> 00:18:07.267 
這是因爲我在HLS報告中
添加了——ID選項

00:18:08.933 --> 00:18:10.100 
正如我之前所說

00:18:10.167 --> 00:18:12.967 
能幫助你找到json文件中
相同的數據

00:18:13.700 --> 00:18:17.533 
所以讓我們看看第一個
數據ID 16

00:18:17.600 --> 00:18:20.333 
哪個是我們分辨率最低的
I-Frame播放列表呢

00:18:20.467 --> 00:18:21.933 
在json文件找找

00:18:24.233 --> 00:18:27.800 
這是json的簡短文本視圖

00:18:27.867 --> 00:18:30.200 
json 的最高級別是字典

00:18:30.633 --> 00:18:33.033 
我們對變量值感興趣

00:18:33.400 --> 00:18:35.400 
哪個是字典的數組呢

00:18:38.000 --> 00:18:42.067 
那些字典中某一個會有數據ID 16

00:18:42.733 --> 00:18:48.200 
我想說這裏並不是按照數據ID排列的

00:18:50.500 --> 00:18:52.967 
這個有數據ID 16

00:18:53.033 --> 00:18:57.700 
那個是json變量條目
其數據與報告中的行匹配

00:18:57.767 --> 00:18:59.800 
那是最低的I-Frame變量

00:19:00.533 --> 00:19:02.300 
現在 我們已經跳過許多的數據

00:19:02.367 --> 00:19:05.333 
信息比這張幻燈片上顯示的多得多

00:19:05.967 --> 00:19:08.533 
用自己喜歡的工具
在json文件周圍尋找

00:19:08.600 --> 00:19:10.700 
或者自己編寫一些特殊工具

00:19:11.233 --> 00:19:13.400 
這些json可以變得很大

00:19:13.467 --> 00:19:17.300 
它們超過100,000行是很正常的

00:19:19.733 --> 00:19:21.767 
我們最後一個例子

00:19:22.267 --> 00:19:26.000 
我們選擇播放列表
再添加不同類型的音頻

00:19:27.133 --> 00:19:29.133  
頂部看起來很類似

00:19:29.200 --> 00:19:30.167  
往下滾動

00:19:31.500 --> 00:19:33.000 
看看我們的複製

00:19:33.467 --> 00:19:35.967 
現在 不再只是單一的立體聲音頻

00:19:36.033 --> 00:19:39.767 
我們添加了兩個多聲道音頻複製

00:19:40.300 --> 00:19:43.100 
一個是AC-3的杜比數字

00:19:43.167 --> 00:19:45.000 
叫做aud2

00:19:45.667 --> 00:19:49.267 
另一個是EC-3的杜比數字升級

00:19:50.100 --> 00:19:51.167 
叫做aud3

00:19:51.500 --> 00:19:54.233 
讓我們去看看變量部分

00:19:56.400 --> 00:20:02.900 
注意到因爲AE-3
和EC-3無法替代

00:20:02.967 --> 00:20:06.100 
也不能替換AAC

00:20:06.167 --> 00:20:09.400 
每個都有自己的默認變量

00:20:10.867 --> 00:20:17.400 
也就是說一旦選擇了AC-3的
aud3 就默認變量#12

00:20:17.467 --> 00:20:20.700 
原因是該變量是aud2組中第一個

00:20:20.767 --> 00:20:22.567 
出現在主播放列表中的

00:20:23.833 --> 00:20:29.500 
同樣 如果選擇EC-3
默認變量爲#20

00:20:30.367 --> 00:20:35.000 
注意aud2和aud3變量之間的
比特率差異

00:20:35.267 --> 00:20:39.533 
例如變量#9和變量#17

00:20:39.833 --> 00:20:42.967 
這是因爲音頻不同的比特率

00:20:43.133 --> 00:20:45.100 
我們看到的變量比特率

00:20:45.167 --> 00:20:49.500 
是包括複製的組合比特率

00:20:51.133 --> 00:20:53.600 
好了 以上就是我舉的例子

00:20:53.967 --> 00:20:56.800 
那麼在哪兒可以找到自己想看的示例呢

00:20:57.467 --> 00:20:58.300 
HTTP直播流示例

00:20:58.367 --> 00:21:02.167 
好 這個直播流網頁上
有三個現成的例子

00:21:02.233 --> 00:21:05.533 
如果前往
developer.apple.com/streaming

00:21:05.600 --> 00:21:07.400 
可以看到示例網頁指示

00:21:07.467 --> 00:21:10.400 
你可以找到該網頁的URL

00:21:11.833 --> 00:21:14.233 
或者也可以閱讀幻燈片上的內容

00:21:15.667 --> 00:21:18.400 
頭兩個在你驗證的時候會有意見

00:21:18.467 --> 00:21:21.667 
原因是這些流是在很久以前創建的

00:21:21.733 --> 00:21:24.200 
我們決定不對其進行升級

00:21:24.267 --> 00:21:27.967 
但第三個變量是新的 幾乎完美

00:21:28.033 --> 00:21:29.433 
示例流

00:21:30.300 --> 00:21:32.233 
好了 該結束了

00:21:32.300 --> 00:21:33.167 
總結

00:21:33.233 --> 00:21:36.567 
有三件事希望大家能記住

00:21:37.200 --> 00:21:38.700 
服從編輯規範

00:21:39.333 --> 00:21:42.100 
驗證 驗證 再驗證媒體流

00:21:42.500 --> 00:21:46.500 
包括在提交應用時測試流URL

00:21:49.033 --> 00:21:50.833 
更多信息

00:21:50.900 --> 00:21:55.633 
請前往 WWDC 網站
使用該會話編號510

00:21:57.167 --> 00:21:58.467 
相關會話
“HTTP實時總結的新特性”

00:21:58.533 --> 00:22:02.633 
今年在HTTP直播流有許多新改變

00:22:02.700 --> 00:22:07.700 
我建議大家參加或觀看會話

00:22:07.767 --> 00:22:10.033 
“HTTP直播流的新特性”

00:22:10.600 --> 00:22:12.700 
謝謝 祝大家在會議中有所收穫