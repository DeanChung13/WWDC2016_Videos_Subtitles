00:00:19.433 --> 00:00:21.767 
大家好 我是Todd Ritland
AirPrint工程師

00:00:21.900 --> 00:00:23.767 
和iOS首席印刷工程師

00:00:24.600 --> 00:00:27.167 
這個就是在企業中
部署AirPrint

00:00:30.167 --> 00:00:32.667 
AirPrint是Apple的
全方位印刷解決方案

00:00:33.233 --> 00:00:36.700 
這是一項可以幫助你創建
無損打印輸出的技術

00:00:36.767 --> 00:00:39.167 
無需下載或安裝驅動程序

00:00:40.467 --> 00:00:43.133 
若你是應用開發者
並想在你的應用程序中添加打印服務

00:00:43.333 --> 00:00:46.367 
請查看developer.apple.com/airprint

00:00:46.433 --> 00:00:48.933 
上面有個我之前在 WWDC 的演講

00:00:49.300 --> 00:00:51.133 
標題叫AirPrint的優勢

00:00:51.733 --> 00:00:53.567 
然後下載示例代碼就可以開始了

00:00:54.733 --> 00:00:56.367 
如果你是一個打印機製造商

00:00:56.600 --> 00:00:58.067 
或者是一個打印服務器開發者

00:00:58.233 --> 00:01:00.867 
並且想對你的產品
授權AirPrint技術

00:01:01.433 --> 00:01:03.767 
請電郵airprint@apple.com

00:01:05.266 --> 00:01:08.633 
這次談話將會
針對負責部署AirPrint

00:01:08.700 --> 00:01:11.167 
和想要了解更多所有的

00:01:11.233 --> 00:01:13.933 
讓AirPrint在企業環境中
能很好工作的企業特點

00:01:16.367 --> 00:01:18.967 
企業的打印服務有很多特有的要求

00:01:19.867 --> 00:01:22.500 
我們企業的用戶會和一堆打印機打交道

00:01:22.567 --> 00:01:25.567 
（打印機）經常來自不同的
製造商並有着不同的功能

00:01:26.000 --> 00:01:28.967 
在不同的樓層或者是不同的樓之中

00:01:29.367 --> 00:01:30.467 
還可能在不同的地點

00:01:31.600 --> 00:01:33.833 
這些也可能是非常複雜的打印機

00:01:35.700 --> 00:01:38.300 
網絡架構一般很複雜

00:01:39.500 --> 00:01:41.767 
通常他們是無線或者有線的客戶端

00:01:42.967 --> 00:01:46.900 
而且他們的網絡結構
和所在建築的物理位置可能並無關聯

00:01:48.867 --> 00:01:53.767 
IT部門也會有各種各樣的網絡要求
比如說禁止軟件升級

00:01:54.200 --> 00:01:56.300 
禁止組播數據包傳輸

00:01:56.733 --> 00:01:58.100 
和阻塞特定端口

00:01:58.567 --> 00:02:00.367 
這些都會影響到打印機

00:02:01.600 --> 00:02:04.633 
企業客戶也可能會有會計要求

00:02:04.967 --> 00:02:06.900 
因爲每一頁都會花錢

00:02:08.400 --> 00:02:09.333 
當然

00:02:10.633 --> 00:02:12.300 
安全性要求是必要的

00:02:12.367 --> 00:02:14.833 
而且在企業打印中越來越重要

00:02:18.533 --> 00:02:20.467 
我們從企業中收到最多的請求

00:02:21.733 --> 00:02:23.333 
是可以創建PDF

00:02:23.633 --> 00:02:25.667 
並且增加更多無紙化的工作流程

00:02:26.500 --> 00:02:27.433 
安全性

00:02:27.867 --> 00:02:29.433 
訪問控制和會計

00:02:30.300 --> 00:02:31.933 
還有更方便的找到打印機

00:02:32.867 --> 00:02:36.167 
讓我們來看一下AirPrint
其中每一項上具體能帶給我們什麼

00:02:38.133 --> 00:02:40.433 
首先是從打印面板中創建PDF

00:02:41.800 --> 00:02:44.433 
Mac OS早具備生成PDF的能力

00:02:45.067 --> 00:02:46.233 
在任何地方都可以打印

00:02:46.833 --> 00:02:48.100 
而如今在iOS10

00:02:48.667 --> 00:02:52.533 
所有的iOS設備都具備了這項能力
接下來我想展示下它是怎麼工作的

00:02:56.033 --> 00:02:58.133 
我現在有一臺
運行着iOS 10的iPad

00:02:59.700 --> 00:03:00.767 
當我輕觸打印

00:03:01.633 --> 00:03:04.600 
我就可以用我的雙指縮放打印預覽

00:03:07.667 --> 00:03:10.067 
而且在這裏
我左上角有一個分享按鈕

00:03:11.900 --> 00:03:14.767 
所有支持PDF的應用
就會出現在分享菜單下面

00:03:14.833 --> 00:03:17.467 
還會有AirDrop和
其他系統分享的選項

00:03:18.667 --> 00:03:22.000 
這也可在Managed Open In
Enterprise功能中使用

00:03:22.067 --> 00:03:24.800 
這樣就可以把商業條目和個人條目分開

00:03:26.333 --> 00:03:28.000 
在具備3D Touch的設備上

00:03:28.367 --> 00:03:30.900 
你也可以用
Peek and Pop手勢

00:03:31.400 --> 00:03:33.733 
來到和打印預覽裏同樣的視圖

00:03:34.867 --> 00:03:38.433 
我認爲企業用戶會喜歡
這個新的無紙化工作流程

00:03:38.500 --> 00:03:40.200 
應用到他們所有的iOS設備中

00:03:41.833 --> 00:03:42.667 
安全性

00:03:43.333 --> 00:03:45.533 
下面是一個極其重要的話題

00:03:45.800 --> 00:03:46.633 
安全性

00:03:49.267 --> 00:03:53.100 
iOS和Mac OS上的
AirPrint完全支持端到端加密法

00:03:53.167 --> 00:03:55.467 
這樣你的網絡文檔就被保護起來了

00:03:56.900 --> 00:03:59.667 
AirPrint支持最新的
TLS產業標準

00:03:59.733 --> 00:04:02.200 
基於HTTP的1.2加密

00:04:03.633 --> 00:04:04.800 
這項加密技術

00:04:04.867 --> 00:04:08.300 
對於所有新AirPrint打印機
和服務器是必須的

00:04:11.433 --> 00:04:13.467 
接下來 對於額外的安全措施

00:04:13.833 --> 00:04:16.033 
很多企業用戶不想打印出來的文件

00:04:16.100 --> 00:04:18.333 
呆在打印機的出紙盒裏

00:04:18.666 --> 00:04:21.367 
這樣一個人未經允許就可以拿起來查看

00:04:23.300 --> 00:04:27.167 
對於支持PIN Release的
iOS和Mac OS打印機

00:04:27.967 --> 00:04:30.433 
用戶會在打印機上輸入自己的PIN

00:04:30.500 --> 00:04:31.733 
來接收他們的打印文件

00:04:33.433 --> 00:04:35.633 
在iOS上 當需要輸入PIN時

00:04:36.433 --> 00:04:38.833 
打印面板會顯示一個標籤用來解釋

00:04:41.500 --> 00:04:43.733 
當用戶點觸打印時會顯示一個提醒

00:04:43.800 --> 00:04:45.400 
輸入PIN來釋放打印任務

00:04:49.833 --> 00:04:50.767 
在Mac OS上

00:04:52.167 --> 00:04:54.900 
用戶可以輸入
自己想要的PIN來釋放打印

00:04:55.833 --> 00:04:57.900 
Mac OS也支持這樣的PIN設置

00:04:58.367 --> 00:05:00.767 
當PIN是可選的
打印時就不需要輸入PIN

00:05:01.400 --> 00:05:03.433 
然後是訪問控制和會計

00:05:03.967 --> 00:05:04.800 
登錄

00:05:05.367 --> 00:05:07.567 
AirPrint一直支持
打印機和服務器

00:05:07.633 --> 00:05:10.567 
需要輸入用戶名和密碼來驗證身份

00:05:11.767 --> 00:05:14.733 
我們把輸入的用戶名和密碼
保存在Keychain中

00:05:14.800 --> 00:05:16.667 
這樣用戶就不用重複輸入

00:05:18.400 --> 00:05:20.133 
iOS 10已支持這樣一個功能

00:05:20.200 --> 00:05:23.200 
忘記已存儲的身份驗證信息

00:05:23.267 --> 00:05:26.200 
以便使用需要輸入不同用戶名的工作流

00:05:30.567 --> 00:05:33.667 
今年的新功能還有支持僅密碼驗證

00:05:33.733 --> 00:05:36.600 
這樣打印機就只被
一個簡單密碼保護起來

00:05:36.667 --> 00:05:37.500 
就像這裏展示的

00:05:40.233 --> 00:05:41.767 
會計

00:05:41.833 --> 00:05:43.900 
當企業需要把賬單

00:05:43.967 --> 00:05:46.767 
或者賬戶信息添加到每一次的打印中

00:05:47.367 --> 00:05:50.033 
iOS和Mac OS兩者
都支持打印機和服務器

00:05:50.100 --> 00:05:52.000 
接受該賬戶信息

00:05:52.833 --> 00:05:55.467 
如果每次打印都需要這個賬戶信息

00:05:56.067 --> 00:05:59.867 
在打印繼續前
用戶需要輸入該賬戶信息

00:06:03.967 --> 00:06:09.133 
此外對打印任務 iOS和
Mac OS支持賬戶ID可選或強制

00:06:09.633 --> 00:06:11.933 
這個是Mac OS X上UI的界面

00:06:18.467 --> 00:06:19.800 
接着是更方便的找到打印機

00:06:21.400 --> 00:06:22.633 
支持的發現方式

00:06:22.700 --> 00:06:25.633 
AirPrint有很多方式
來發現和使用打印機

00:06:25.933 --> 00:06:29.667 
大多數用戶使用AirPrint的
主流方法是Local Bonjour

00:06:30.700 --> 00:06:32.133 
它不需要設置

00:06:32.633 --> 00:06:35.400 
打印機顯示可用 自動地出現在列表裏

00:06:35.467 --> 00:06:36.667 
不用任何設置

00:06:38.467 --> 00:06:41.500 
AirPrint也一直支持
Wide-Area Bonjour

00:06:42.867 --> 00:06:45.533 
Bonjour基於DNS發現服務

00:06:46.033 --> 00:06:48.633 
並且如果使用正確記錄
來配置DNS服務器

00:06:49.467 --> 00:06:51.067 
打印機也可以這樣被發現

00:06:51.400 --> 00:06:52.867 
我會示範下這個怎麼做

00:06:54.800 --> 00:06:58.467 
iOS和Mac OS
現在也都支持移動設備管理

00:06:58.533 --> 00:07:01.700 
或者帶有設置好AirPrint
有效載荷的MDM配置文件

00:07:04.000 --> 00:07:05.400 
iOS 10的新變化是

00:07:05.867 --> 00:07:09.000 
我們把AirPrint Bluetooth Beacon
作爲發現打印機的發法

00:07:09.067 --> 00:07:11.800 
它使用藍牙低功耗信標

00:07:15.133 --> 00:07:18.100 
配置DNS服務器
來發布AirPrint打印機並不難

00:07:19.367 --> 00:07:23.400 
首先 設置好的DNS服務器必須在

00:07:23.467 --> 00:07:26.567 
被需顯示打印機的iOS設備和Mac
使用的DNS服務器列表裏

00:07:28.033 --> 00:07:30.067 
一共有很多種管理哪些DNS服務器

00:07:30.133 --> 00:07:31.400 
和搜索域被使用了的方法

00:07:31.467 --> 00:07:34.567 
比如DHCP和MDM配置文件

00:07:36.000 --> 00:07:39.800 
然後下一步你需要添加
A或者AAAA記錄

00:07:41.000 --> 00:07:42.100 
到打印機的名字裏

00:07:42.867 --> 00:07:44.933 
和設置了靜態IP地址的打印機裏

00:07:46.933 --> 00:07:49.933 
爲主要的IPPS服務類型
添加PTR記錄

00:07:50.000 --> 00:07:53.033 
還要爲通用子類型額外添加
一個PTR記錄

00:07:54.100 --> 00:07:57.767 
這是AirPrint的關鍵
AirPrint不僅是IPPS服務

00:07:58.433 --> 00:08:00.300 
它還有一個通用的子類型

00:08:00.867 --> 00:08:03.233 
而那就是iOS設備和
Mac搜索的東西

00:08:05.167 --> 00:08:07.567 
你要爲該服務添加一個SRV記錄

00:08:08.167 --> 00:08:10.700 
然後還有一個TXT
或檢測過的文件記錄

00:08:10.767 --> 00:08:13.767 
它描述了打印機的很多性能和信息

00:08:14.867 --> 00:08:16.600 
極其重要的一點是去找到

00:08:16.667 --> 00:08:19.400 
打印機或服務器的TXT或文件記錄

00:08:19.833 --> 00:08:24.667 
用Mac OS命令行工具dns-sd
可以輕鬆做到這一點

00:08:26.833 --> 00:08:29.200 
想要用dns-sd找到那些記錄

00:08:29.767 --> 00:08:32.799 
只需要在你設置的打印機的相同子網下
執行這條命令

00:08:33.866 --> 00:08:38.366 
使用-Z選項會以當前區域的
文件格式來顯示記錄

00:08:39.366 --> 00:08:44.433 
你要應用_tcp._ipps.service類型

00:08:44.933 --> 00:08:47.300 
到本地域
就像這裏以藍色顯示的部分

00:08:49.533 --> 00:08:52.833 
你會得到一個輸出包含
每一個在本地被發現的打印機

00:08:54.100 --> 00:08:59.400 
PTR SRV和TXT記錄幾乎都是
你需往DNS服務器中添加的

00:08:59.800 --> 00:09:01.100 
外加其他的一些補充

00:09:03.467 --> 00:09:05.433 
改變過的地方在這裏被綠色高亮

00:09:05.667 --> 00:09:08.433 
像我之前提過的
你需要添加一個額外的PTR記錄

00:09:08.500 --> 00:09:09.833 
到通用子類型

00:09:10.067 --> 00:09:11.833 
就像第二行的這個一樣

00:09:13.100 --> 00:09:16.033 
你還要把SRV記錄中
本地打印機的名字換成

00:09:16.367 --> 00:09:18.100 
完全符合要求的域名

00:09:18.967 --> 00:09:20.433 
我早些時候提到的A記錄

00:09:21.567 --> 00:09:23.900 
而且你還要替換

00:09:23.967 --> 00:09:25.300 
本地Bonjour實例名

00:09:25.367 --> 00:09:27.300 
使之成爲完全符合要求的域名

00:09:27.833 --> 00:09:31.000 
就像這裏顯示的
帶有打印機管理員URL的綠色部分

00:09:32.933 --> 00:09:33.933 
如果這個不修好的話

00:09:34.133 --> 00:09:36.433 
用戶將不能使用Mac OS上的按鈕

00:09:36.933 --> 00:09:39.700 
快速訪問打印機的管理員頁面

00:09:41.300 --> 00:09:42.333 
這些文字

00:09:42.600 --> 00:09:44.700 
可以直接拷貝到zone file裏

00:09:45.167 --> 00:09:47.700 
這樣打印機就會出現在
列表裏供用戶使用

00:09:47.767 --> 00:09:51.900 
前提是用戶把這個DNS服務器
設置成他們DNS服務器中的一個

00:09:52.800 --> 00:09:55.067 
配置Wide-Area Bonjour打印機的
關鍵是

00:09:55.133 --> 00:09:58.200 
藉助dns-sd命令行工具

00:10:01.700 --> 00:10:04.867 
MDM配置文件是一個
很流行又超級簡單的方法

00:10:04.933 --> 00:10:06.533 
來爲你的用戶們設置打印機

00:10:07.333 --> 00:10:09.867 
AirPrint有效載荷
可以被添加到任何配置文件裏

00:10:09.933 --> 00:10:12.800 
而且有效載荷包含一個主機或IP地址

00:10:13.500 --> 00:10:14.500 
還包含一個資源路徑

00:10:15.867 --> 00:10:19.900 
對於大多數AirPrint打印機
資源路徑是ipp/print

00:10:20.900 --> 00:10:23.133 
AirPrint服務器也一樣
這會成爲隊列

00:10:24.567 --> 00:10:27.800 
這個是Apple Configurator的截圖

00:10:28.300 --> 00:10:31.000 
最受歡迎的移動設備管理工具之一

00:10:33.733 --> 00:10:36.000 
下一個是令我們非常興奮的一項新技術

00:10:36.067 --> 00:10:37.300 
也是iOS10的新功能

00:10:37.500 --> 00:10:39.600 
它就是AirPrint Bluetooth Beacon

00:10:41.867 --> 00:10:45.100 
那麼什麼是AirPrint Bluetooth Beacon
它是怎麼工作的？

00:10:45.967 --> 00:10:48.500 
它是可以被設置的
很多市場上的第三方

00:10:48.567 --> 00:10:50.867 
藍牙信標設備就可以

00:10:50.933 --> 00:10:53.800 
只要在打印機附近

00:10:54.733 --> 00:10:56.667 
或者它也可以成爲打印機的一部分

00:10:56.733 --> 00:10:59.000 
用打印機自帶的
無線電和天線就可以辦到

00:10:59.533 --> 00:11:02.700 
未來的AirPrint打印機
就會內置這項功能

00:11:04.900 --> 00:11:07.333 
它所做的就是把連接信息發射出去

00:11:09.400 --> 00:11:11.400 
若iPhone接收到了那個IP地址

00:11:12.433 --> 00:11:14.667 
它就可以向這個打印機發送打印任務了

00:11:15.833 --> 00:11:19.100 
這個非常厲害
因爲網絡的複雜性對我們無關緊要

00:11:19.167 --> 00:11:21.600 
唯一重要的是
我們能收到那個IP地址

00:11:22.933 --> 00:11:25.300 
它甚至可以是
網絡上的一個公用IP地址

00:11:25.733 --> 00:11:28.200 
即便遠到iOS設備藍牙覆蓋的範圍

00:11:28.733 --> 00:11:30.200 
外加可以收到那個IP地址

00:11:30.267 --> 00:11:33.033 
打印機就能出現在
用戶的列表裏以供使用

00:11:36.067 --> 00:11:38.867 
而且AirPrint Beacon
也可以很好和打印服務器配合運作

00:11:40.033 --> 00:11:42.867 
我們這裏有個AirPrint服務器
在右邊

00:11:43.200 --> 00:11:46.500 
在網絡上的每一臺打印機
都有一個AirPrint Bluetooth Beacon

00:11:46.567 --> 00:11:49.000 
正在發佈服務器的IP地址

00:11:49.467 --> 00:11:51.733 
和打印機關聯的Queue ID

00:11:53.367 --> 00:11:56.900 
當用戶開始打印
打印任務發送到打印服務器上

00:11:57.733 --> 00:11:59.033 
還有相隨的隊列信息

00:12:01.167 --> 00:12:05.600 
然後服務器把打印任務發送到
用戶在UI界面選擇的那個打印機

00:12:09.000 --> 00:12:12.400 
我們來細說下何謂
AirPrint Bluetooth Beacon格式

00:12:12.467 --> 00:12:14.533 
這樣你就可以設置你的打印機了

00:12:17.133 --> 00:12:18.567 
首先 我們有一個header

00:12:19.600 --> 00:12:23.567 
這個用來把藍牙信標
驗證爲一個AirPrint Beacon

00:12:24.500 --> 00:12:26.867 
所有的AirPrint Bluetooth Beacons
都一樣

00:12:26.933 --> 00:12:28.267 
這樣我們就可以拷貝了

00:12:29.667 --> 00:12:30.500 
下一步

00:12:30.933 --> 00:12:32.633 
我們有了連接信息

00:12:32.933 --> 00:12:35.533 
它會告訴我們
之後被發現的IP地址

00:12:35.600 --> 00:12:38.533 
是IPv4地址還是IPv6地址

00:12:39.433 --> 00:12:42.100 
它還會告訴我們
這個IP地址是服務器的

00:12:42.167 --> 00:12:43.500 
還是打印機的

00:12:43.567 --> 00:12:47.033 
這個字節還決定連接是否用TLS加密

00:12:48.267 --> 00:12:51.000 
對於這個示例
連接是TLS加密的

00:12:51.833 --> 00:12:54.000 
IP地址是一個IPv6地址

00:12:54.700 --> 00:12:55.800 
且這不是一個服務器

00:12:57.400 --> 00:13:00.800 
請瀏覽發佈在
developer.apple.com上的說明

00:13:01.500 --> 00:13:02.767 
這個字節是如何設置的

00:13:05.700 --> 00:13:07.167 
接着我們有一個打印機的ID

00:13:07.233 --> 00:13:09.067 
該打印任務是應發送到打印服務器上

00:13:09.633 --> 00:13:13.267 
或者資源路徑的信息
還是打印任務應被直接發送到打印機上

00:13:14.933 --> 00:13:18.100 
這個打印機把
ipp/print作爲資源路徑

00:13:19.400 --> 00:13:21.333 
重複下 請瀏覽發佈的說明

00:13:22.167 --> 00:13:25.267 
是更多關於指定資源路徑的

00:13:28.067 --> 00:13:29.900 
下面我們有了連接的端口號

00:13:31.233 --> 00:13:33.500 
631是標準的IPP端口

00:13:34.633 --> 00:13:37.633 
端口443經常被用作TLS安全連接

00:13:39.100 --> 00:13:39.967 
對於這個示例

00:13:40.433 --> 00:13:45.367 
277是631的16進制
也就是標準的IPP端口

00:13:47.900 --> 00:13:50.067 
下面我們有一個IP地址

00:13:52.500 --> 00:13:55.433 
如果你的打印機使用的
是不可升級的外置信標

00:13:55.667 --> 00:13:57.700 
確保打印機使用的是靜態IP地址

00:13:58.333 --> 00:14:02.500 
否則這個IP在信標中
一旦IP地址發生變化就會失效

00:14:05.367 --> 00:14:10.033 
最後 就像iBeacon一樣
我們測好的信號強度爲1米

00:14:10.833 --> 00:14:14.467 
用的是和Apple iBeacon
測量強度一樣的度量方法

00:14:15.167 --> 00:14:19.333 
這樣可以更好的給iOS設備提供
關於距離打印機物理距離的信息

00:14:21.333 --> 00:14:25.567 
對於這個例子
發射功率平均爲64分貝

00:14:25.967 --> 00:14:27.667 
也就是16進制的40

00:14:29.833 --> 00:14:33.467 
AirPrint Bluetooth Beacon
的格式和iBeacon稍微有點像

00:14:35.400 --> 00:14:37.367 
iBeacon的格式要少一個字節

00:14:37.867 --> 00:14:39.800 
但是起始的header非常相似

00:14:41.167 --> 00:14:44.767 
如果你是根據iBeacon技術說明
設置的你的設備

00:14:45.333 --> 00:14:49.733 
你有可能稍作調整並用相似的參數
來設置AirPrint Bluetooth Beacon

00:14:50.433 --> 00:14:53.400 
很多製造商對藍牙硬件

00:14:53.600 --> 00:14:57.700 
會或者將會使用特定的
AirPrint Bluetooth Beacon設置流程

00:14:59.933 --> 00:15:01.533 
那麼對於企業用戶

00:15:01.600 --> 00:15:05.833 
iOS和Mac OS提供很多非常好的技術
來支持PDF工作流

00:15:05.900 --> 00:15:07.600 
以適應日益增長的數碼世界

00:15:08.600 --> 00:15:11.800 
AirPrint則提供了非常好的
安全性訪問控制

00:15:11.867 --> 00:15:16.567 
會計和新的發現技術使
打印更出色不論任何環境

00:15:17.733 --> 00:15:21.367 
老規矩 告訴我們你的意見
你們的企業有什麼特殊的需求

00:15:21.433 --> 00:15:24.500 
請在apple.com/feedback上
發送意見反饋

00:15:25.867 --> 00:15:28.333 
更多關於此次演示的信息

00:15:29.000 --> 00:15:31.100 
和參考數據

00:15:31.700 --> 00:15:37.300 
請查閱developer.apple.com/wwdc16/725

00:15:38.967 --> 00:15:40.467 
你可能也想知道

00:15:40.733 --> 00:15:44.433 
在Nob Hill的
“Apple設備管理的新特性”會話

00:15:44.633 --> 00:15:46.100 
時間是週三上午11點

00:15:47.500 --> 00:15:50.333 
還有“獲取內部核心位置”

00:15:51.067 --> 00:15:52.067 
地點在Marina

00:15:52.867 --> 00:15:54.767 
時間是週三下午3點15分