COCOA TOUCH的新特性
下午好
歡迎各位
我叫Olivier Gutknecht負責管理UIKit 團隊
今天我們要探討UIKit的新功能
以及iOS X 中的其他系統架構
但我首先想說的是
COCOA TOUCH的舊特性
爲什麼？自從上屆 WWDC 以來
我們引進了大量的重要產品
帶有3D Touch的iPhone 6S
9.7和12.9英寸的iPad Pro
還有Apple Pencil和Smart Keyboard
而且 這些產品採用了多項關鍵技術
採用這些技術可以讓你的應用更出色
我首先想談的是自適應性
我們2年前引進了自適應性
我們當時引入的一項技術是尺寸分級概念
iPhone是一個緊湊型產品
iPad是常規產品
現在我們有了12.9英寸的iPad Pro
我們需要更大的尺寸等級嗎
我們不需要
因爲現在我們擁有所有工具
在架構中表達它
我們擁有特徵系統
它決定你的應用如何理解
你的應用的上下文和背景
尺寸等級是一個很重要的特徵
但你擁有了需要的一切
基於這些設備的佈局創建尺寸
我們爲尺寸等級添加了新的支持
在接口Builder和架構本身中
包括從自動佈局到動態類資產分類
配有佈局指南 甚至UI外觀
一切都已準備好 並且完全集成
我們還將
在本週舉行製作應用自適應佈局的兩場研習會
第一場研習會重點關注基礎知識和工具
第二場研習會將關注API
以及你用於製作自適應的技術
今天早上舉行了一場令人驚歎的研習會
重點介紹的是設計 你應該看看
我其次想談的是觸控輸入
去年iPad Air 2上市現在是iPad Pro
我們採用了120 Hz觸控掃描
我們的掃描速度比屏幕刷新率快
配備Apple Pencil之後我們有了另外的性能
通過觸控技術你可以獲得精準定位 力度
在iPhone 6S上你也有相同的力度信息
3D Touch技術已用在iOS 9和iOS 9.1上
你需要用API在這些設備上創建令人驚訝的UI
Dominique Wagner將爲你展示
如何在iOS上利用觸控輸入
我最後想談的是Smart Keyboard
我們爲你提供了一個API你可以在應用上實現鍵盤快捷鍵
我想 你現在有更多用戶
通過鍵盤和你的應用交互
所以上下文快捷鍵需求獲得增長
爲此採用API是合理的
其實API在iOS 7中是新的
它變得重要起來因爲自iOS 9之後
我們可以展示這些漂亮的自動快捷鍵
只需要按住命令鍵即可
現在 讓我們來談談Cocoa Touch的新特性
我今天想談四個方面
首先是核心技術
你可能已經在應用中使用了
然後我們要討論使用UIKit和其他 API
你如何爲你的應用構建更好的UI
我們將爲你展示
在iOS X中新系統特性如何讓你的應用更好
最後我們還將討論
你的應用自身如何擴展
系統的所有新擴展點
接下來我們來談談這些核心技術
Swift 3很可能是第一個要提到的
因爲採用Swift 3之後每個API都煥然一新
因爲我們改變了規則 我們改變了
如何從Objective-C轉化爲Swift的方式
我們正在這樣做 讓你的代碼更佳
所以 在Swift上編寫代碼時它給人極強的真實感
例如 首選字體
我們現在使用第一個參數
讓意圖更明確
我們儘量不重複自己UI顏色
黑色現在只是白色或黑色
對於Swift 3我最喜歡的是一個方面是
AIP和核心圖形讓人真的感覺非常棒
編寫UIKit應用時
甚至像多線程優化技術（GCD）
現在也是一個完整的對象API
我們來談談GCD
還有一種我非常喜歡的功能很常見的東西
通過這項執行技術創造你自己的私人隊列
當同步執行隊列工作項目時
iOS X中出現新的特性你可以真正設置隊列
在自動釋放池中爲每個工作項自動換行
真的很容易 你只需創建一個調度隊列
然後你提供一個釋放池工作項目
我們有一個完整的GCD隊列及編程研習會
還有Foundation框架它也改編了大量的
Swift增強性能 在許多類別中我們放棄了MS前綴
我們有一項主要新功能我們正在將多種值類型
添加至Foundation API上
不僅如此
我們也全面支持
Foundation的單位和計量
另外 是爲AP 601格式有一個新的日期格式器
如果你知道AP 601是什麼
你很可能欣喜若狂
另一個好功能是我們如何更好地
使用新曆日期間隔進行日期計算
我們舉行了兩個關於Foundation的研習會
Foundation和Swift的新特性
以及測量和單位
昨天 我們宣佈支持通用鍵盤
在你的Mac上覆制然後粘貼在你的iOS設備上
你如何在你的應用上應用這種功能？
只需使用現有UI Pasteboard API就這麼簡單
你還需要知道另外一點
你可能必須在你的設備上獲得很大的資源
如果我需要複製一張非常大的圖片
可能需要一兩秒鐘
你可能會看到這個UI
爲了避免檢索遠程數據時的問題
你應該首先檢查看看你是否需要相關數據
所以爲了避免看到這個UI
爲此在UI Pasteboard上我們添加了四個新方法
因此你可以輕鬆檢查屏幕URL、圖像和顏色
在UI Pasteboard上另外一個特性是
你現在可以控制你放在粘貼板上的東西
現在你可以在本地設備上限制你的數據
或者設置到期日期
但我現在想說的是顏色
它不是一種軟件功能而是真正的硬件功能
在我們新的iMac 5 K上
以及9.7 英寸的iPad Pro 上
這是一個技術轉變你現在可以在屏幕上描繪
之前在物理上不可能實現的色彩
而且 我們正在改變我們描繪色彩的方式
iOS設備曾經使用sRGB顏色空間
現在通過這件設備你將在擴展的sRGB色彩空間內工作
這對於你意味着什麼？
首先 iOS實際上已經實現色彩管理
iOS和TVOS以及在iOS X中 我們正在公開API
從而適應廣泛的色彩範圍
第一種方式是隻使用UI Image View
UI Image View實際上已實現色彩管理
始於iOS 9.3所以你已經準備好了
UI Color怎麼樣呢？
我們讓它變得很簡單
我們在其中已設有一個採用RGB色彩模式的初始化器
其中第二個新的初始化器採用display P3 RGB色彩模式
第一個初始化器是你如何繪製任意顏色
在擴展的sRGB空間內
現在你可以表達超出
0-1範圍內的色彩如果你想要超越傳統的sRGB
第二個是 displayP3
displayP3是真正的彩色顯示
在創作側非常常見
如果你收到一個有廣泛色彩的規範
很有可能你將使用displayP3
這就是爲什麼我們提供初始化器的原因
就是這樣的原因
我們沒有色彩空間分類
你只需要使用這兩個初始化器即可大功告成
但我現在想談談圖像渲染
圖像渲染是
你今天可能已經在使用的東西
通過UI 圖形開始圖像上下文
添加來自文本API的圖像
這有幾分像你想幹就乾的事
渲染離屏圖像
因此 這個API有一個問題
它實際上是32位sRGB是一個內置的假定
此外 這並非我們最好的API它在數據塊之前就存在
而它不是真正可擴展的
因此 你編寫圖像所用的東西
開始圖像上下文API看起來就像這樣
我不知道有多少人已犯下這個錯誤
試圖在開始圖像上下文之後獲得圖像
我肯定犯過這種錯
但現在 我們有一個新的類型
新的 UI 圖形渲染類型
它帶給你的首先是完全的色彩管理
它要在默認情況下做正確的事
如果你在9.7 英寸的 iPad上
你將獲得一個廣泛的色彩上下文
如果不是在該設備上你可以獲得傳統上下文
另外 它基於數據塊設計 易於使用
此外 它是一個基於API的對象
我們必須爲圖形和PDF增加我們的類型
此外 很重要的是
這個類型將管理你的色彩上下文的生存期
這意味着我們可以在hood下做一些內存優化
讓我給你舉個例子
相當於之前的情況你只需要創建你的渲染器
你試圖生成一個圖像
它只要提供數據塊這裏是你的繪製代碼
有關這一點最酷的事是
如果你再次調用 這裏的圖像方法
我們打算僅再次使用這個上下文
圖像相關的一個新功能是資源分類
我們擁有資源分類 支持各種色彩資源
從右到左和從左到右的資源以及壓縮功能
當然它們是完全集成於
UIKit的特色系統
所以 讓我們看看第一個
什麼是色彩資源？
我們想在這裏做什麼？
如果你嵌入廣泛的色彩資源
在你的應用中 你希望能夠部署
在非全綵色設備上
因此 我們想做的是
我們將爲你自動提供一代sRGB變體
它將彎曲和App Thinning兼容
所以我們將只部署需要的東西
在正確的設備上
資源分類中的另外一個新功能是壓縮
我們添加了對有損壓縮方案的支持
而且它自動挑選 如果你選擇了它
它會爲給定設備生成正確的變體
於是你將在足跡和質量之間保持絕佳的平衡
而且它同樣完全兼容App Thinning
因此 們只將需要的東西部署在給定設備上
我想在此介紹資源分類的最後一個功能
方向或圖像資源支持
現在它意味着直接在資源分類層級上
你可以指定一個圖形爲RTL資源
或者是從左到右的資源
或者某種自動翻轉的資源
直接在資源管理系統中
我們也有關於國際用戶界面的完整研習會
其中可以讓你瞭解更多有關iOS X的改進
但我現在想談的是
如何創建更好的用戶界面
以及在iOS X中的交互
首先你需要確保
每個人都可以和你的應用交互
我們有新的輔助功能檢查器
你可以利用這個工具 它真的很牛
你可以連接到一個應用上
然後你將自動瞭解給定
UI元素的輔助功能屬性
還有另一個很不錯的功能
你還可以在應用上啓動審覈功能
在模擬器或你的設備上運行
這樣可以讓你獲得提示
瞭解你希望修復的問題 以及你真正想
修復的與你的應用相關的問題
有一點要注意 就像Xode如果你沒有收到任何警告
並不意味着你的應用完美無缺
但這是很好的第一步
我們也有新的方式
和 iOS X上的應用交互
我們添加了一個新手勢 語音識別器
[外語]
而且不限於英語
它是一個非常簡單的API
SFSpeech識別器
它可以做連續語音識別
而且你可以將其連接到音頻文件
或者實時音頻流上
你可以做實時的連續語音識別
你可以將其配置爲優化識別
用於聽寫或實現簡易字符串
這裏只是舉一個API的例子
你創建一個識別器你將其配置了一個請求
你開始一項任務 然後
我們回電告知你結果
真的方便使用
我們在 WWDC應用上有關於這個API的相應視頻
iOS X中的另一大改進是文本輸入
你現在可以做的一件事是
爲你的文本字段中的內容添加信息
你可以通過這個功能提供智能建議
以Quick type模式例如如果我的文本字段是關於位置
我在Quick type中看到地址
我們有很多預定義的內容類型對人而言
你可以指定名 姓氏 全名或地點
在此情況下 它將配置成
一個完整的街道地址
或甚至可以配置電子郵件電話 信用卡卡號
關於文本輸入
以及文本的另一點是你如何在iOS中呈現文本
在iOS 7中 我們添加了支持動態類型 在iOS X中
我們正在製作內容尺寸分類
用於動態類型 一種特徵
那麼 這意味着什麼？
在iOS X之前的內容尺寸類別只是一個屬性
在UI App上
而且 你實際發送了通知
如果用戶改變了內容尺寸
你必須重新發出通知並且更新你的UI
現在 因爲它集成爲一個特性
它在視圖控制器上可用了 這意味着
你可以在所有UI擴展中使用動態類型
我們實際上還添加了對動態類型的支持
在新的UIKit中的現有元素內
因此 如果你通過文本字段文本視圖 標籤創建UI
你希望對尺寸變化重新做出反應
現在在iOS X中你可以使用是的調整字體功能
調整內容尺寸分類你的標籤 文本視圖
文本字段僅對此重新做出反應
例如 你正在使用音頻應用 你的應用
將會自動更新
對於動態類型而言這是一個很棒的功能
完全自動支持 標籤和文本字段
我們曾經希望在UIKit中添加新的自定義
選項卡欄項是一個極好的案例
現在你可以自定義批處理顏色和文本屬性
在標籤欄項中你還可以自定義選定的主題顏色
因此 我們可以說我有一個標準標籤欄
看起來就像那樣
如果我將此代碼添加到我的應用中
它將成爲我的新標籤欄UI
也許這就是我並非設計師的原因
另一項極佳的定製 在網頁視圖中
爲3D Touch iPhone裝入Peek和Pop時
我們曾在UIKit中有非常簡單的API用於視圖控制器
我們曾有內置的支持WK網頁視圖
現在在iOS X中你可以很好的控制
web視圖中的Peek和Pop行爲
這意味着你可以使用自定義視圖控制器
用於做Peek
你可以有預覽操作以及很棒的後續結果
當你Pop網頁視圖中時 你可以決定
留在你的應用內
它就像web視圖類上的新的委託方法一樣可用
但Peek和Pop最讓我感到激動的是
新的UI預覽交互類型
因此在UIKit內的Peek和Pop完全是兩回事
有一種視覺效果 這種模糊效果這種很棒的動畫
當你想要預覽某種東西時
有一種觸摸 我們如何對壓力做出迴應
我們如何檢測用戶的意圖 是撞擊
一次滾動 還是Peek的開始？
通過UI預覽互動 你可以做到
使用UIKit提供的執行實現這種觸摸
但爲Peek和Pop提供你自己的動畫
這是此類型上的一種新的委託你可以知道
當你從Peek轉到Pop時我們將會
爲你提供改進 一連串的改進
你可以插入自己的互動 你自己的動畫
你可以實現完全定製的Peek
以及Pop UI這確實是一個很大的改進
如果你希望全面瞭解Peek和Pop及3D Touch
我們週四下午4點將舉行完整會話
我們添加的另外一個新特性
在大家曾經需要的滾動視圖中
它實際上完全支持UI刷新控件
它在UI滾動視圖上可用
在類型的滾動視圖上也可用
我們已經支持表格視圖和刷新控制
因此 它意味着現在你可以使用刷新控制
修正視圖
我們來談談集合視圖
這是UIKit上一個很不錯的功能
去年我們添加了
對流佈局中自動自調整尺寸的單元格的支持
在此之前你必須要做的是
你必須計算預估尺寸
有時它並不容易
但在UIKit水平上我們知道屏幕上呈現何種單元格
因此我們在流佈局中有個一個新的模式
你可以自動通過 我們將爲你
估算 你無需自己去做
這個估算了
你知道我們爲UI校正視圖支持重新排序了嗎？
我們做了 而且我們正在改善
在集合視圖中添加分頁支持
這是滾動視圖級展示的東西
校正視圖將爲你完成工作
但我對今年的一項功能非常激動
關於集合視圖的平滑滾動
它是一個真正簡單聰明的想法
如果我在集合視圖中有一個網格
我會滾動這個網格
在某種程度上 我需要上個單元格
同時出現在屏幕上
對於佈局而言如果你的單元格有點複雜
它可能需要一定的時間你可能剝奪一個架構
那樣並不好
因此 我們現在正在做的是我們稱之爲單元格預取的東西
這裏的想法是實際要在屏幕上實現一個單元格前
我們可能向你要求這個單元格我們不會
將一個單元格作爲單元格數據塊就像一整行
我們會要求一個單元格然後下一個 再下一個
所以我們要攤銷成本
從而在你的應用中建立單元格
好事是這是自動完成的
如果你爲iOS X重建你的應用
你可以免費實現這樣的行爲
而且還有更多
我們有一個新的協議我們稱之爲數據預取
因爲有時不僅僅是
爲你的單元格製作佈局
有時你需要獲取數據
你需要從光盤讀取
你需要從網絡獲取數據 因此它很棒
如果我們可以告訴你嘿我們需要速索引
你可以提前準備
這正是這個新協議的作用
你可以實施幾種委託方法我們將會告訴你
我們何時將會要求一個單元格
因此你可以將數據準備好
從而再次改善
你的基於應用的集合視圖的表現
我們在表格視圖上也提供了這種功能
我們將舉行關於新UI集合視圖的完整會話
單元格預取 數據預取
重新排序 不要錯過哦
但我認爲今年UIKit的主要新功能
是我們稱之爲UI視圖屬性動畫大師
它是一種新的API
它是一種新的API
讓你建立可以中斷的動畫
你可以清除的動畫 你可以倒退的動畫
我們正在展示新的時間曲線
它是完全動態的
你可以快速添加動畫
我在此要說的是 新的API
就像一部電影中的時間軸
你可以清除 快進 播放 倒退
該模型很簡單 使用極其簡單
你只需要創建一個新的動畫
你設置時間參數和持續時間
你添加自己的動畫
你啓動動畫 因爲你有一個對象
代表該動畫 你可以快進
或者改變其進度
它還完全集成在
i視圖控制器運行系統中
我們將會對此詳細解釋
本週三將舉行UI動畫和技術進步的會話
但我想告訴你的是你可以用它創建什麼
這是一個非常簡單的照片應用
你之前可以做到的是
在導航控制器中實現自定義過渡
但有了這個動畫API我可以啓動過渡
在飛行中用一個手勢捕捉它 移動它
釋放它
然後再次捕捉它
我會倒轉我的過渡
讓動畫結束
令人驚歎的是
它是隻是一個過渡
所以我們在相同的上下文中移動從非交互式
前往交互式手勢驅動 再回到非交互式
到手勢驅動 再到交互式再到非交互式
你可以完全將基於手勢的互動和動畫混合起來
我們認爲這是一項期待已久的偉大功能
通過它可以看到你將創建的東西
現在 我想談談我們爲iOS X帶來的新特點
這裏關鍵的事情是 沒有什麼
是你絕對要採用的
不 恰恰相反 我們該做什麼來幫助你
我們擁有一些新的功能
它們將會讓你的應用變得更好
這些新功能將簡化你的體系結構
用於調整應用的東西將會更加集成
一個好案例是某種非常簡單的東西
就是我們過去如何更改開放式URL
因此 我們首先要讓它變成異步
使用完成處理程序但我們還要添加通用鏈接
因此你知道通用鏈接是當你打開一個URL時
例如鏈接至社交網絡
如果你有一個本地應用它就會打開本地應用
但現在有了這個新的API你可以實際檢查
系統上是否已安裝一個應用
如果沒有 你可以留在你的應用中
你可以仍然保留這種體驗 而不是
例如打開Safari
因此它將真正改善
你如何整合內容和處理系統中這些應用的方法
另一大功能是我們對核心數據的更改
第一個是我們稱之爲查詢生成的功能
這裏的想法是你的菜單I擁有上下文很常見
而且你打算在背景隊列工作
在單獨的上下文中
你能做的是通過查詢生成
你實際上可以pin
你的模型在你的菜單上
你可以準確控制 當你希望從
你的模型一個版本移至另一個版本
它意味着你不必要再處理力度
因爲某種東西改變了背景隊列
因爲你可以準確決定菜單I何時應該移動
至數據的一個新版本
這是一個真正偉大的方式
簡化了你的應用中的核心數據代碼
另外一個功能是關於連接池
目前在一次存儲中 我們完全支持
多位讀者 一位作者模式
這將給你帶來極大的性能提高
我們在工具側還有新的功能 瞭解它們
我建議你去參加週五舉行的
核心數據的新特性會話
爲你的應用數據建模的另外一個方式是使用CloudKit
對於CloudKit我們已經爲公共數據庫
以及私人用戶數據庫保留
我們要在iOS X中添加的是記錄分享
因此你可以讓多個用戶訪問相同的記錄
這就會打開一個全新類別的
具有CloudKit的應用
這棒極了
但一些東西有時很難處理
基於應用的協作 即如何處理UI流
你如何邀請人們參與文檔協作？
你如何以一種安全的方式實現它？
因此 我們添加了新的UI雲共享控制器
這是由UIKit展示的視圖控制器
使用非常方便只需提供新的共享對象即可
它將會控制CloudKit中的控制記錄共享
我們將會爲你自動生成UI
以管理邀請流和被邀請人的名單
很容易在CloudKit中建立基於應用的協作
我們會舉行關於CloudKit的完整會話
介紹CloudKit的新特性地點是Pesidio 時間是週四
現在我想談談NS用戶活動
NS 用戶活動是一個類
我們利用它捕捉你的應用的狀態
我們已經在多個方面使用它
例如Handoff和Spotlight
我們在iOS X現在要做的是
添加對用戶活動位置的支持
因此 如果我的應用要處理地址
我可以表達的是 用戶當前活動
和此地址有關
你只需要提供你附加在活動上的地圖套件項目
現在你明白我如何創建這個建議
在幾分鐘前的文本字段中
系統會注意到 哦 也許這個應用
正在處理這些地址
因此那很可能是一個極好的建議
用於處理地址文本文件
它會爲你完全自動打開
如果你在活動下有選項
我們有許多的新方式來提高
你的應用使用率通過與我們稱之爲主動建議
它是以智能 活動爲基礎的功能
在iOS X中 在你的應用上
另一個地方
我們使用NS用戶活動是搜索
在iOS 9中也是如此我們已經爲索引活動添加了支持
它的用法非常簡單我們只需要創建一個活動
並提供文本字段信息
它就會在Spotlight中顯示出來
但現在你可以做到的是
我們這裏有一個新的按鈕在應用中搜索
你的用戶現在可以返回直接轉到你的應用
而且你可以繼續自動搜索
在你的應用裏
使用非常方便
第一步 你需要爲你的info Plist添加新的密鑰
告訴我們你支持Spotlight繼續功能
第二步是運用新的UI應用委託方法
實施起來非常方便
我們爲你提供用戶活動你可以創建UI
並繼續在你的應用中顯示搜索
去年最新的改進也和搜索有關
我們添加了對你的內容索引的支持通過Core Spotlight
但現在你實際上可以在Spotlight中搜索你的數據
我們正在打開Spotlight索引
這棒極了 因爲我們
爲電源和性能實現了該索引的完全優化
我們有非常強大的quarry模型
因此使用很方便
你只需要建立一個搜索查詢
你提供一個請求
你可以爲你的數據搜索Spotlight索引
所以你可以將系統索引數據
例如來自網絡的數據爲你的應用整合起來
我們今年將舉行一個關於搜索API的會話
介紹延續性
核心Spotlight搜索以及其他功能
我們提供了Replay Kit
它是在你的應用中錄屏的方式
在iOS X中可使用Replay Kit爲流媒體
因此你可以進行現場直播
利用你的應用 因爲我們還提供擴展點
它意味着你第三方服務
給你帶來直播能力
例如我們在playground上正在使用它
另一個大的架構是SceneKit
SceneKit是強大的3D引擎
你可以使用它在應用中集成3D交互式組件
今年主要新功能是一種
全新的渲染引擎 基於物理的渲染
可以說 它現在支持高動態範圍
或者內部使用一個線性交叉空間
但我認爲它是更好地向你展示
這是你在iOS 9上的消防車
這是你在iOS X上的消防車
真的令人驚歎
它目前在Watch OS 2上可用
我們將在Presidio舉行一次完整的SceneKit Rendering會話
但我現在想談談Apple Pay
關於Apple Pay有兩個方面要談
首先我們正在推廣Apple Pay
讓你的用戶可用
今天Apple Pay已裝在iOS和Watch上
正如你昨天瞭解到的 我們正在推廣它
讓Apple Pay在web上可用
我們在Mac支持Apple Pay
所以對於用戶而言Apple Pay無處不在
但令人高興的是 作爲開發人員
我們已經支持Apple Pay
在你的基於UIKit的應用中
但是現在你可在Safari中用Apple Pay
採用新的Javascript架構
但它也可能意味着你可以使用Apple Pay
在內嵌的Safari視圖控制器中
你使用Apple Pay的另外一個地方是
在非UI代碼中
我們有一個新的API供非UI擴展用
在擴展中使用Apple Pay真的令人驚歎
對於你的iMessage應用而言是極佳的功能
這是你現在可以直接創建的一種流
在信息中通過一個擴展實現
我想提供有關Apple Pay的兩個會話
不幸的是 第一場研習會
和網頁上Apple Pay同時舉行
之後是Apple Pay錢包的新特性
我最後想談談你如何讓iOS變得更好
你如何和iOS集成
我們在iOS X中有新的主要擴展點
以及信息Siri Callkit中也是如此
我們也改善了已有擴展 例如像鍵盤
現在你可以使用相同的Globekey
來自你的鍵盤擴展的鍵盤peeker
我們也可以給你提供
用戶交互用語言提示
因此你可以在第三方擴展中創建多語言支持
我們對iOS X的另一個改進是
是各種小工具的新顯示模式
此前你必須給我們提供你偏好的尺寸
現在我們有一個用戶控制的尺寸
緊湊模式有固定的高度
擴展模式有可變高度
使用真的非常方便
你不必做任何事情通過我們新的API
你可以知道小工具何時會從
緊湊型移至擴展型
你可以給我們一個最大的尺寸你可以知道顯示模式
你可以定製你需要顯示的信息
還有一件事 我需要指出來
儘管是小工具 它會在鎖屏上顯示出來
因此 小心處理你展示的數據類型
要時刻牢記的一件事是
和你在小工具中展示的數據保持一致
如果我來配置 如果我添加你的小工具
到我的主屏幕上 鎖屏上
我期望我總會看到相同種類的數據
保持相同的隱私級別
我不希望看到令人吃驚的東西
在我的iPhone鎖住時在我的鎖屏上顯示
在iOS X上一個完全性的架構是用戶通知
用戶通知曾經是我們
在UI應用層級常見的東西
我們有一個新的架構但我們要展示相同的功能
我們將在這裏添加幾個增強功能
首先我們統一了本地通知和遠程通知
因此更容易處理
你可以更好地控制你的提供方式
我們向用戶提供通知的方式
我們要告訴你的另外一個優點是
在顯示通知之前
在應用上你會更好地控制
通知本身
此外 這也是一個跨不同平臺的統一模型
除了這些API增強功能之外
我們還有兩個擴展
第一個是服務擴展
服務擴展是你可以
插入設備的擴展 當我們收到通知時
在此之前 它實際上已經被顯示了
在它在屏幕上顯示前你可以處理有效載荷
有兩個極佳的使用案例你可以用它建立
你可以有媒體附件 有效載荷是相當小
但如果你瞭解你要爲給定有效載荷顯示什麼
當你收到該通知時 你可以
取回它並顯示
另外一個非常棒的功能是端到端加密
因爲你現在負責兩端
在服務器和本地設備上
因此你可以收到某種東西
然後用你自己的代碼解密
我們認爲這是一項非常棒的新功能
爲擴展提供了極佳的新可能性
這是我們擁有的另外一個擴展
用於用戶通知架構
你可以在你的通知中嵌入UI視圖
儘管還有一個限制 你不能直接
和視圖進行交互 但你有通知行動
我們將舉行關於用戶通知的兩場研習會
通知介紹和高級通知
地點是Pacific Heights時間是週三
iOS X中的另外一個新功能是CallKit
我們再次提供了一個新的擴展點
目錄擴展
我們允許你配置我們如何阻止來電
你對此可以完全掌控
第二個功能是我們如何識別電話號碼
並顯示我們的標籤
以當我們接到一個電話時我們首先要檢查
地址簿 然後如果我們找不到匹配
我們可以添加你的擴展
因此使用API非常簡單
它是非UI擴展點
完全是兩種方法
但真正不錯的新功能
在CallKit中電話提供者API
通過電話供者API
我們擁有真正的第一方體驗
用於你的IP電話應用
也就是說 你可以獲得某種性能
如全屏來電UI
當你在應用上接到一個電話
但不僅如此
我們完全將你的應用
和iOS上的核心管理結合起來
比如像你的收藏和最近閱讀
我們從你的應用上自動獲得電話
你可以支持Siri還可支持CarPlay
你可以和免打擾和藍牙結合起來
這是手機的一項主要新功能
我們可以全部瞭解它
在具有CallKit的Enhancing VOIP應用中
我現在要談談Siri
你可能還不知道
在不同的語境中Siri也會有相應的不同變化
因此 如果你在主屏幕上正使用Siri
使用home鍵 或若你在使用帶有Hey Siri功能的Siri
或者如果你在使用帶有CarPlay功能的Siri
或者作爲一種輔助功能
Siri將根據那樣的上下文對自身調整
你可以和Siri進行最佳可能的交互
它是相當複雜的任務
因爲它涉及識別階段
理解域 理解環境
這是我們要爲你免費提供的東西
當你創建一個SiriKit擴展時
我們將提供給你的是
一個代表請求的意圖
這就是你的擴展將和它交互的方式
你也可以提供你自己的詞彙幫助Siri
它可能對於特定應用或用戶
因此我們可以再次調整識別
和Siri的交互
它如此如何工作的？
意圖擴展背後的想法是
它是一個非UI擴展 將代表
Siri和你的應用之間的交互
因此 它是基於意圖的概念
來自於Siri和響應
這裏主要的想法是
意圖是域特殊性東西
因此你可以有消息域
付款域等等
對於消息 你有一個意圖清單
Siri可以識別它進行交互併發送
至用於...的應用來管理與Siri的交互
這裏的主要目標對於Siri意圖而言
擴展是確保你和Siri在同一個頁面上
當Siri理解一個請求時
對於有效請求 我們需要對其確認
我們執行這個請求 基本上是流
當你使用Siri說事情時 比如
告訴 WWDC 談話的Miko我們需要在會議後見面
Siri要在意圖內進行編碼
事實上 它是處於消息域中
它是同一個消息意圖 這裏有一個收據
這是有關你的應用和我們從你那裏獲得的內容
我們爲Siri Kit提供另一個擴展
即意圖UI擴展
它實際上是一個可選擴展
但通過它你可以將自己的UI嵌入Siri副本上
因此你可以確認它調整到你的內容上
這真的很棒
關於意圖系統的另一個優點是
它不僅和Siri有關
它是一種描述請求的方式 當然
我們在Siri中使用它和你的應用溝通
但這也是我們和CallKit集成的方式
這是我們如何在地圖上正確分享擴展的方式
這個功能很棒的原因是
這是你如何給系統提供
關於你的用戶在做什麼的信息的方式
例如 在你的消息應用中
當然 它和用戶的活動結合起來
由此 我們可以說
我在使用我的 WWDC 談話應用發送消息
然後在UI聯繫人中我們要顯示該信息
有關此信息自動聯繫
當我們有一個行動清單時
我們可直接向你顯示你的應用 如果你
通過意圖展示該信息
在某一點上
你的應用講述默認應用
在標準聯繫人卡上
這真的令人驚歎
爲你的應用增加可視性
我最後要談談iMessage應用
因此 消息真的變成一個平臺
我們在這裏有兩個功能
一個是貼紙包
另一個是消息擴展
對於貼紙包 不需要代碼
你只需要打包你的靜態或動態圖像
你使用Xcode完成它
你可以通過消息存儲發佈它
你還可以做另外一件事
使用iMessage應用等於使用性的消息擴展
你可以用它編寫完全基於UIKit的擴展
你可以做其他事情 例如
動態生成貼紙內容
你甚至可以使用該擴展中全新的相機
你可以調整你的UI實現緊湊或擴大模式
它將成爲live-in消息
這是一個極佳的功能但你可以做得更多
你可以自定義泡泡
它意味着你的擴展
使用的消息架構實際上
在和它結合的消息中有一個對話概念
與其他用戶的更改關聯
我們也全面支持消息擴展
在iOS X的模擬器中
因此使用非常方便
這是一個非常棒的功能可以讓你和消息結合起來
當然你還能用它實現另外一個功能
在你的互動泡泡中完全自定義內容
我們舉行了兩場會話介紹iMessage應用
信息應用以及貼紙時間是今天早上
a第二場會議重點介紹擴展部件
時間是週四下午1:40
非常感謝大家 享受 WWDC 大會