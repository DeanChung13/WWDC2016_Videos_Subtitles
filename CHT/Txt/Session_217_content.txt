介紹SiriKit
晚上好
我叫Robby Walker
今晚我將與Brandon Newendorp和Corey Peterson
一起講解SiriKit
首先我會講講SiriKit是什麼
它怎麼在高層次工作的
接着Brandon會講 創建一個
或兩個擴展將你的應用與SiriKit連接
然後Corey會講如何創建和設計
一個很棒的會話體驗會大大不同於
設計一個很棒的圖形用戶界面
但首先 我們先來講講Siri
Siri是誰？
Siri是你的虛擬助手時刻準備幫助你
不管是通過增加一點幽默
還是更經常幫你做事
並主動提醒你潛在的衝突
我們來講講一個整合了Siri的應用例子
我們開發一個虛擬的應
我們要用什麼假的東西給它命名
但我們又覺得它很寶貴 所以我們想
用很有價值但聽上去是假的東西來給它命名
於是我們叫它獨角獸快信
然後因爲我們想讓它看上去更寶貴
我們給它一個很甜美的圖標
於是你可以想象有人在這樣說
“嘿 Siri 發一條獨角獸快信信息”
Siri可能會回答 “給誰？”
然後你可能說“Celestra”那是我一個同事在獨角獸快信應用裏的名字
然後Siri會問
“你想對Celestra說什麼？”然後我可能會這樣說
“我們多加點閃亮的過渡效果”
因爲衆所周知獨角獸喜歡閃亮的過渡效果
不過還有更多的方式對Siri說同樣的事
有人可能會只用兩個步驟這樣說
“獨角獸快信發送一條信息給Celestra”
然後當然Siri會問一個問題
然後用戶會說明白其意圖
其他用戶可能會只用一句話做同一件事
“獨角獸快信 Celestra加多點閃亮過渡”
有人會用中文說同樣的想法
但我說不來
其他用戶會很有禮貌又囉嗦
可能會這樣說
“嘿 Siri" 可以幫我打開獨角獸快信應用
發送一條文本信息嗎多加點閃亮過渡”
儘管用了27個字來描述一個簡單的想法
他們實際上忘了說要把信息發給誰
然後他們可能會很囉嗦
比如這樣說“我最好的朋友Celestra”
那麼我想說的是
對Siri說同一件事有很多種方式
Siri也會用很多種方式迴應
比如 如果你握着手機
你按Home鍵
Siri會提供更多視覺迴應而更少大聲說話
但如果你是用“嘿 Siri”召喚
就像我們的朋友CookieMonster或你在車上
Siri會說得更多而顯示得更少
而且Siri的體驗也仔細優化過
以滿足用戶的便捷化需求並應對大量不同的輔助設置
所以最終
有相當於組合爆炸的方式
大家使用Siri 不僅是
大家如何對Siri說話
還有Siri如何迴應
那麼問題來了
我們要怎樣確保爲用戶創造一種高品質的體驗？
我們要怎樣確保它真的在不同應用之間保持一致
在同一個領域中？
還有最重要的是對在座的每一個人來說
我們要如何確保它好看又易用
這樣越來越多人
纔會以對話的方式使用更多他們喜愛的應用
那麼答案就是讓Siri處理對話
你的應用只處理功能
我接下來再具體講講那是什麼意思
Siri做的首先是
理解用戶說什麼
所以我們聽取聲音然後將它變成文字
然後我們讀取文字
並將它變成結構化的表示
對於用戶想做什麼也就是我們所說的意圖
基於該意圖 Siri再作出行爲
執行用戶想完成的任務
然後Siri提供迴應正如我所說的 圖文和言語迴應
而且這方面還有很多
這四個步驟要花費很多工作
有很多深度學習技術
有卷積神經網絡
有LSTM 有CRF有SVM 有很多東西
我們要確保作爲應用開發者
你能真的專注於你的應用已經在做的事
有三個部分可以做到
第一個是詞彙
這是你的應用如何告訴Siri它需要知道的詞
Brandon稍後會再講解
第二個是應用的邏輯
這是你的應用的功能
然後最後一個 當然了是很棒的用戶界面
那麼再來看看這個例子
具體瞭解它怎麼實現的
假設有人說“嘿Siri 請發送獨角獸快信信息給Celestra”
你的應用執行的第一條規則是幫Siri理解這句話
Siri在它的數據庫中沒有Celestra這個名字
但你的應用有
那麼透過與Siri共享信息 你確保
Siri明白用戶說了什麼
這也有助Siri確定Celestra是個聯繫人
因爲當你提供這類詞彙時
你會說明這些是聯絡人的名字
或在另一個例子中 可能是相冊的名字
現在Siri在發信息的領域中明白
要發送一條信息你實際上需要的不只是收信人
你需要一條信息
所以Siri會迅速地和你的擴展覈對後詢問
“你實際上是在要求這條信息的內容嗎？”
如果你的應用說是
那麼Siri會問一個跟進問題
所以實際上你的應用要做的一切就是
在單獨的參數的基礎上明確你的限制是什麼
下一步就是Siri將所有的
信息結構化成一個對象
不是要去應對
語言和用詞的多變以及我們之前講的那些東西
你的應用實際只是獲得這個漂亮簡單的對象
然後它將其傳送給你的應用去協助
處理意圖和實施行爲
然後當然 同時
Siri爲用戶提供用戶界面
你可以選擇提供第二個擴展
去定製用戶界面讓它看起來更像獨角獸
那就是SiriKit非常高級的功能
目的是令它使用極爲簡便
但仍使你感受到對話交互的力量
接下來給大傢俱體講解這一切如何實現的
是我的同事Brandon Newendorp對我來說他就是Celestra
謝謝Robby
我非常激動地向大家
具體講講SiriKit如何工作
還有你們將如何講Siri的語言
當你們將SiriKit用於你們自己的應用上
現在請仔細聽因爲這切實關乎“意圖”
首先
我想講講SiriKit如何就世界的事物進行溝
在高級層面 Siri用領域的概念思考一切
領域是一個廣泛類別的事物
是Siri所理解的 從而知道怎麼說
比如 類似發信息 打VoIP電話
發送支付都是領域的好例子
當中一些領域今年我們會和SiriKit一起開放
在領域中 我們有意圖
意圖描述一個已知的行爲
是Siri理解的並且能向你的應用溝通的
現在我想把意圖再分解一下
用另一個例子來具體說明
補充剛纔Robby所講的
在這個例子中我們有獨角獸支付應用
嘿 Siri 給Buttercup轉85塊用獨角獸支付付彩虹美甲
現在Siri明白這是個支付領域的請求
具體來說 我們知道這是個發送支付的意圖
每個意圖都有參數的意義
參數是具體的項目是Siri可以認出 理解
並向你的應用溝通的項目
發送信息的意圖中有諸多參數
我們知道這個應用是獨角獸支付
用戶想要轉賬給某個人名叫Buttercup
我們還知道金額是85
然後Siri會變很聰明
會明白當用戶說“塊”時
很有可能是指美元
而且Siri可以使用很多強大的能力
來理解我們認爲用戶在此類情況下所表達的意思
根據諸如用戶的定位
其Siri的區域及其他對系統可用的信息
最終 我們知道用戶是在要求
發送彩虹美甲的付款
所以有了這種我們爲SiriKit創造的共同語言
關於意圖的共同語言來描述行爲和意圖的迴應
用於描述從你的應用返回到Siri所產生的結果
我們再來具體講講意圖
我說過 意圖是一種行爲
是我們要求你的應用執行的行爲以及我們可以溝通的東西
在Apple和你的應用之間
每個意圖會有零到多的參數
並且會根據個別意圖和領域而變化
以及Siri在該領域中所理解的
還有我們認爲向你的應用溝通所相關的
無論如何 一個意圖始終會被歸入一個領域
所以這是你得思考的事情
當你準備在你的應用中採用SiriKit時
要看作爲SiriKit的組成部分的領域
並思考哪一些會
最切合你的應用
我們還有意圖迴應
這些是你如何告訴Siri關於意圖的結果
你的應用剛剛執行的結果
你始終要用到這些中的一個去溝通結果
因爲始終有一個意圖迴應發起者的意圖
意圖迴應也可有附帶的參數
用於描述你的應用實際用那個意圖做了什麼
有時那些參數會和意圖的參數一樣
其他時候會不同
因爲有某些東西是僅僅通過
從應用返回Siri而實現溝通
我們也接受意圖迴應附帶的迴應代碼
這些是用於告訴Siri在更廣泛的層面
你的應用是否能完成請求
也有默認的比如成功或失敗
或需要開啓應用的失敗
有些意圖和領域有更具體的錯誤代碼
有一點非常重要
是你告訴Siri一個確切的迴應代碼返回到你的應用
因爲我們會使用這個去驅動對話
併爲你的所有用戶創造更好的用戶體驗
最後 我們附上NSUserActivity
到意圖迴應
如果你已經在你的應用中支持handoff
你就熟悉NSUserActivity
我們使用NSUserActivities來啓動你的應用
如果用戶需要離開Siri體驗並轉移到你的應用上
現在通過默認 Siri會生成我們自己的用戶活動
利用意圖和意圖迴應給你的應用
這樣你就能準確地在你從Siri離開的地方繼續開始
如果你想要你可以提供你自己的用戶活動
擴充用戶資料詞典
藉助對你的應用獨一無二的信息
只要確保你創造最佳的體驗
當用戶離開Siri轉移到你的應用上
以上就是意圖 以及意圖迴應
它們是Siri和你的應用溝通的基本語言
並理解你的應用能代表用戶執行什麼
下一個我想講的是
你的app和Siri如何就意圖進行溝通
在溝通意圖的時候
有三個步驟我們要求你瞭解
第一步是解析
我們會要求你的應用解析意圖的每個參數
事實上 我們會對每個參數多次發起解析
有時對相同的參數發起多次
直到你和用戶同意它們的請求
第二步是確定
對你的應用是個機會
來確保它將能夠處理意圖
並告訴我們預期的結果
最後 也是最重要的步驟是處理
你執行用戶要求你做的具體行爲
我們先具體來說說解析步驟
解析步驟的目的
是讓你協助Siri理解用戶說了什麼
更爲重要的是用戶表達什麼意思
當他們開始對你的應用發起請求
這也是你的應用的最大的機會去影響Siri的行爲
並對我們正在進行的對話作出某些控制
藉助你的應用的用戶
爲此
你的應用會提供一個解析迴應
有很多種不同的解析迴應
對於Siri理解的每一種數據
並會要求你的應用協助我們理解
那麼讓我們回到剛纔的例子
向Buttercup轉些錢用獨角獸支付付彩虹美甲
具體地說 我要你們注意收款人一欄
這是用於描述我們轉錢給誰
而且重要的是Siri、用戶、你的應用
均理解用戶說Buttercup時是什麼意思
現在希望從你的應用得到的最普遍的解析迴應是成功的
這意味着你確切理解用戶所說的 所指的
然後你要告訴我們你成功理解了
再將目標提供回給我
告訴我們你解析了什麼你成功配對了什麼
在這個例子中意味着獨角獸支付完全明白誰是Butter cup
有時候 你的應用會做一些聰明的選擇
但它要確保
用戶所表達的真的是你認爲你已作出聰明選擇的那個意思
所以我們有一個確認的要求選項
這時候你可以要求Siri
讓用戶再三覈對你的解析結果
然後提供是或否的迴應
此例中 對於獨角獸支付Siri只是確保
用戶說Buttercup時指的是Sir Buttercup
另外一些時候你的應用會需要
要求用戶從一小列選項中挑選
Siri稱之爲消歧
如果你想叫用戶從一列選項中挑選
我們建議五個到最多十個
你可以提供一個消歧清單給Siri
然後我們會展示你告訴我們的選擇
在獨角獸支付這個例子中
我們問用戶是指Sir Buttercup
Buttercup the Bold還是Sunrise Buttercup？
Siri最強大的部分是代表你處理與用戶的互動
你不必擔心這個部分
用戶可以使用自然的方式來通過選擇這些選項當中的一個
他們可以點擊清單中的一個項目
他們可以說出名字“Sir Buttercup”
或者他們可以僅指出一個然後就說“第二個”
無論用戶如何想要跟Siri互動
我們會爲你的應用免費處理它
另外有些時候你需要從用戶那兒取得更多信息
可能它們還不夠具體
或者可能你的應用有80個人叫做Buttercup
你不想提供80個Buttercup的選擇給用戶
在這些情況下你可以說你需要更多具體信息
Siri會提醒用戶更具體一點
等用戶提供更多資料後我們就再發起解析方法
如果用戶不指定一個值
而你需要一個值才能繼續你可以告訴Siri你需要一個值
在此情況下 我們會告訴用戶
“喂 你需要對此說點什麼 因爲
獨角獸支付需要知道你是要轉錢給誰”
你也可以告訴我們你不明白
用戶提供的資料而你需要一個全新的值
對此 我們有unsupportedWithReason
只要告訴我們你不支持這個值
Siri會要求用戶提供一個新的
最後 如果有一個值當中如果給定參數
你的應用不需要它 那就告訴Siri
￿῿
如果用戶恰好指定一個值
我們會直接忽視它們
以上就是解析步驟
這是我們如何確保Siri、你的應用、用戶
都理解他們叫你的應用做什麼在我們繼續之前
下一步是確定
確定步驟是真正關於兩件事
首先 它給你機會告訴Siri
處理意圖的預期結果
我們會要你提供這個迴應
即我們可以告訴用戶即將發生什麼
它對於你的應用也是個機會
去核對任何要求的它所需的狀態
以便完成用戶所要求的請求
無論如何
你要提供一個意圖迴應是從確認步驟返回的
而且我們要你擴充儘可能多的信息
在該意圖迴應中這樣我們能將其
非常有效地溝通給用戶
有時候 Siri會叫用戶提供信息
關於某些意圖和某些領域當中我們決定是重要的
例如 像是發送支付或請求搭車之類的事
Siri會和用戶確定
在我們繼續下一步之前
那麼讓我們想想我們要在獨角獸支付的例子裏確認什麼
獨角獸支付得能夠對我們的服務溝通
確保用戶登錄以及其他一些東西
以便完成請求
那麼我們要在確認步驟覈對所有那些
我們會說 “我們可以到達獨角獸支付的服務器嗎？
用戶登錄獨角獸支付了嗎？”
當然了 這是很貴的彩虹美甲
所以我們要確保用戶在其帳戶中有足夠的錢
在我們發出這個支付之前
一旦我們確定我們的應用能夠處理這個請求
我們生成一個意圖迴應
帶有一個成功的結果代碼然後傳回給Siri
那麼我們繼續到最後一步
那就是處理意圖的確認步驟
最後的步驟是處理
這是在處理意圖時最重要的一環
因爲此刻
你將要做用戶要求你做的事
你要代表用戶執行行爲
而且正如在確認步驟那樣
重要的是你提供儘可能多的可用信息
返回Siri
因爲我們要所有那些信息以便我們能創造
最佳的用戶體驗爲了你的應用的所有用戶
有時我們會以圖文形式展示這些信息
其他時候我們會將其作爲對話的一部分
並將它說回給用戶這樣他們就明白你的應用做了什麼
現在我們明白有時候你的應用可能需要一點時間
來代表用戶完成一個請求
網絡通話可能會耗費點時間
或者在你的服務的另一端有一個人
正在處理交易或者什麼
我們一邊等待迴應從你的應用返回
一邊會展示一個等待的用戶界面給用戶
說你的應用正在處理他們的請求
我們真的要你提供一個迴應
在幾秒鐘以內兩到三秒最多
理想情況下 你可以在很短的時間內成功返回到我們
不過 如果你知道你的應用要費點時間
獲得結果並返回用戶
我們想要你發送一個正在進行中的迴應代碼
這樣可以讓Siri告訴用戶
你的應用已收到請求
你已經告訴我們足夠的信息
即便他們離開Siri應用也將持續處理請求
在獨角獸支付的例子中
我們一到達處理階段就要告訴我們的服務器
我們要發送支付了
然後給Siri一個意圖迴應附上成功代碼
那樣Siri就能告訴用戶他們的錢正在安全發送中
那就是我們如何用SiriKit與你的應用溝通時所涉及的
我們有意圖 有意圖迴應
在你的應用和Siri之間創造這種共同語言
接下來我們要講的
是添加SiriKit到你的應用中會涉及什麼
藉助iOS10中的SiriKit
我們創建兩個新的擴展點
意圖擴展和意圖用戶界面擴展
我已經告訴你這是關於意圖的東西
我們還添加了一些API
幫你協助Siri識別用戶對你的應用說了什麼
我們用我們所謂的應用詞彙和用戶詞彙的形式來實現
我想開始講講意圖擴展
它會執行解析、確認
和處理的方法這些我們剛講過
那麼 從其核心
意圖擴展是SiriKit最重要最基礎的部分
基於它我們創建所有的互動
在Siri和你的應用之間
你的意圖擴展可以支持一個或多個意圖
我們留給你決定什麼最切合
你的應用以及你想怎樣執行你的擴展
我們鼓勵你將擴展的數量減到最少
這樣我們就不會開啓太多進程
如果用戶對你的應用作出多個要求
但要做最適合你的
同樣重要的是明白
你的意圖擴展將在後臺運行
而Siri是在前臺
這讓Siri保持與用戶的對話
並仍然跟你的應用交流以來回獲取數據
並溝通關於用戶的請求
我說過
你的意圖擴展是執行解析、確認
以及處理的方法爲你的應用支持的每個意圖
當我們開發SiriKit時我們花了很多時間思考安全性
因爲安全性是我們在Apple所做的一切的基石
Siri的部分內在行爲是我們要限制某些行爲
在設備鎖定時不讓它發生
例如 我們要確保用戶驗證
設備 並解鎖它在發送支付之前
或在請求搭便車之前
那是我們對某些意圖作出的內在行爲
我們也明白有些行爲
是你的應用想要增加安全性的
默認情況下 Siri會允許
像發送信息這類事不受鎖屏限制
但如果你的應用想確保
用戶首先登錄他們的設備
你可以告訴Siri你想要增加默認的安全性
並限制鎖屏時你的意圖
這個直接通過信息關鍵清單就能實現
我們還努力確保
本地驗證框架可用於你的意圖擴展
以便你可以要求用戶作額外驗證
即使設備已經解鎖
如果你不熟悉本地驗證框架
2014年有一個很棒的講座當中有具體講解
最後 我們已確保Apple Pay可用於你的意圖擴展
如果你想要用Apple Pay與你的用戶完成交易
那已可用於你的意圖擴展
Apple Pay表單將顯示於Siri正上方
如果你想對此瞭解更多
很高興有人用Apply Pay
我對此很興奮
你們可以聽“Wallet和Apple Pay的新特性”演講
是在昨天舉行的
那麼以上就是你的意圖擴展
這是SiriKit的基本部分
關於我們如何與你的應用溝通
以完成用戶的請求
下一個是你的意圖用戶界面擴展
我們來具體講講它究竟是什麼
意圖用戶界面擴展
讓你有機會將你的應用界面帶入Siri體驗
讓Siri真的感覺像是你的用戶在使用你的應用
你可以帶入你的品牌你的視覺識別
以及其他信息植入Siri的transcript
你可通過添加這些視圖到我們所謂的Siri頁面摘要來實現
你的意圖用戶界面擴展始終會返回一個用戶界面視圖控制器
你可以添加你喜歡的任何東西到那個視圖控制器內
要不要意圖用戶界面擴展是完全選擇性的
按照默認 Siri對於每個意圖有一個界面
我們在SiriKit中支持意圖
我們認爲那些會有效溝通
你的用戶想要知道的一切信息
但如果你喜歡創造更爲獨特和更具品牌的體驗
這就是你的機會
我們也讓意圖用戶界面擴展可用於某些意圖
當中我們認爲適合對用戶展示界面
藉助意圖用戶界面擴展你能做很多事
你用它展示額外信息
超出所描述的
在意圖和意圖迴應中
也許某些信息對你的應用來說是獨一無二的
你也可以用它向用戶提供長期運行的意圖的狀態的最新信息
那麼如果你已經提供一個正在進行中的迴應代碼
如前所述 你可以繼續
向用戶提供你的意圖用戶界面擴展中的那個意圖的狀態的最新信息
無論如何 我們始終顯示
你的意圖用戶界面擴展和其他Siri內容一起
我們始終會展示你的應用圖標
你的應用名稱 在窗框頂部
我們可以選擇顯示一些按鍵
以及其他信息在頁面摘要的底部
以及其他信息
你的視圖控制器始終是Siri頁面摘要的部分
有幾個案例呈現
你的應用代替我們要在Siri中
默認顯示的內容
這是比如信息或地圖之類的東西
我們覺得你應該有機會
代替默認的信息或地圖體驗
透過那個你感覺最適合你的應用和你的用戶的
那麼你可以告訴我們你顯示一張地圖或一條信息
透過你的意圖用戶界面擴展
然後我們會省略某些Siri的界面元素而採用你的
同樣重要的是要記住
正如新的通知擴展
意圖用戶界面擴展是非互動性的
你可以畫任何你喜歡的東西你可以放動畫
你可以播放任何你喜歡的視圖
但我們不鼓勵你將控件放進你的用戶界面擴展
因爲用戶不能和它們互動
以上就是意圖用戶界面擴展
這兩個擴展點是你所需的一切
將你的應用的能力添加到Siri
將你的體驗和你的用戶界面帶進Siri
爲你的所有用戶打造更好的體驗
SiriKit接下來的兩個部分
和你的應用息息相關
那我們來講講接下來那些都涉及的
你的應用所擔負的一切責任在於詞彙
你的應用有獨特的方式與你的客戶交流
你的客戶藉此瞭解你的應用的功能
而Siri需要你的一點幫助
來理解用戶要對你的應用說的東西
以及他們習慣談論的東西
這些表述中的一些成了你的應用的部分
它們是你的應用的每個用戶知道並理解的
其他表述對個別用戶是獨特的
而且我們有API來支持二者作爲SiriKit的部分
而二者對於打造偉大的體驗都很重要
我們先來研究一下應用的具體詞彙
這些詞彙或表述是你的應用的一部分
它們對於你的應用的每個用戶來說都是熟悉的
它們是類似體育運動的名稱或交通工具的類型
每個人用它們來指你的應用的某些功能
由於它們是你的應用的一部分
你在plist中定義這些plist是你主要的應用bundle的部分
而且 因爲它們是你主要的應用bundle的部分
我們鼓勵你將它們本地化
這樣它們就可以得到支持在你的應用支持的每個區域
以及Siri將會使用的每個區域
我們來講講有什麼進入那個詞彙plist
因爲有若干部分組成詞彙plist
其一
是用戶如何與你的應用對話的例子
這些有點像我們所謂的 比如你的應用的經典用例
拿我們的新的獨角獸健身應用來說
比如用戶會說啓動獨角獸健身應用開始運動
這些是你認爲用戶會對你的應用通常會說的內容
除此之外還有某些參數
你可以提供你自己的詞彙類型
對於獨角獸健身應用
我們要指定我們自己的獨特的運動名稱
某些獨特的東西對獨角獸健身是獨特的
但對我們的用戶來說是熟悉的
我肯定你們都是獨角獸健身的狂熱用戶
但如果你不是
拿我們來瞭解一下Colorlicious這個詞
它是個特別的運動名稱
它描述一個事件你跑來跑去
抓住掉下來的閃閃發光的東西越快越好
它是個很棒的運動
你們都應該試試
它是個新寵
我們要告訴Siri“Colorlicious”這個短語
它對於我們的應用是個獨特的術語
有時這些短語不是那麼容易發音
它們看上去不是很明顯
那麼你也要給Siri一些發音信息
只是簡單的語音拼讀關於那個詞
或短語 是你要告訴Siri的
還有 舉例說明你將如何在你的應用中使用那個短語
“在獨角獸健身中做一個Colorlicious”
會是這個特定詞條的一個例子
其他類型的詞彙是用戶特定的詞彙
這些是對你的應用的個體用戶是獨特的
而且正因爲如此
我們要求你要提供它們在運行你的主應用時
我們要求你提供它們以一個術語順序集的形式
那麼你可能會想
一個順序集是類似一個奇數數據結構
爲什麼我們要選擇用那個？
我向你保證當中有充足的理由
我們非常非常想要你——
我們會非常鼓勵你爲你的用戶將詞彙按優先順序排列
最重要的術語
或你認爲用戶會直接說的最多的東西放在最上方
我們講在獨角獸支付的情境下
當中我們有個地址簿記錄我們可以發送支付的每個人
我們要你給Siri提供你應用中的所有聯繫人的名字
以便如果用戶說那些名字我們能夠識別它們
不過 獨角獸支付記錄我們最近支付過的人
所以我們要把我們最近的聯繫人放在
我們應用中的所有其他聯繫人的前面
此外 獨角獸支付有一套收藏
即對用戶來說最重要的人
所以我們要將那些優先放在首位
從我們的收藏開始我們的順序集
然後是我們的最近聯繫人
然後放在最後的是其他聯繫人
通過這樣優先排序
你幫助Siri更好地理解你的用戶
並創造一個更好的體驗爲透過Siri使用你的應用的所有人
有幾類東西是我們通過用戶詞彙支持的
諸如聯繫人名字
運動名稱 相冊或照片關鍵詞
作爲你的應用的一項附加價值
如果你依賴系統的iOS地址
你根本不需要擔心這個部分對於聯繫人名字
因爲Siri對系統地址簿有內在理解
所以你只需要提供聯繫人名字
如果你的應用有自己的專用地址簿
你還要思考你要給Siri什麼信息
作爲這個詞彙機制的一部分
並且只告訴我們信息
是你的用戶會期待Siri識別和了解的
我們不要你給我們諸如電話號碼之類的東西
或你的詞彙數據中的電子郵件地址
只給我們簡單的普遍的東西比如你的聯繫人名字
是用戶會期待看到來自Siri的東西
那麼 重要的是你及時更新Siri隨着數據發生變化時
因爲用戶習慣對Siri那樣說
一旦他們將數據導入電話中
例如 如果用戶創建一個新的聯繫人在你的應用中
確保你告訴Siri這件事在他們點擊保存按鍵的那一刻
那樣的話我們就能提取數據並準備識別它
一旦用戶按住home鍵對Siri說話
更爲重要的是
你要從你的Siri的詞彙中及時刪除信息
因爲你的用戶會非常不高興
如果他們從你的應用中刪除了某些東西
但是Siri仍然會在幾天或幾周後識別它
因爲你忘記告訴Siri
用戶已經刪除那條特定的信息
最後 確保你從Siri中移除你的所有詞彙數據
如果用戶選擇重置你的應用 或退出
那麼和SiriKit相關的另一件事是許可
正如iOS的許多其他部分
用戶得同意授權讓你的應用對Siri說話
我們通過標準的TCC提示來實現這個
類似你習慣看到的相機或麥克風的提示
你的應用現能提供一個string
進入這個提示 告訴用戶什麼樣的信息是你的應用
將要發送給Siri的
這也是一個很好的機會教你的用戶瞭解你的應用是做什麼的
有什麼很酷的新功能是你剛爲他們所有人打造的
我們還鼓勵你從你的應用請求許可
在用戶初次使用它時在他們升級到iOS 10之後
我們要你那麼做這樣用戶會瞭解Siri
並同意使用Siri在他們作出第一個請求之前
所以一旦他們嘗試和Siri說話和你的應用說話
就已經獲得同意 而且他們會有很棒的初次啓動體驗
以上是添加SiriKit到你的應用中所涉及到的
這兩個新的擴展
以及兩種詞彙機制
我要講的最後一點
是SiriKit如何適應iOS這個更大的領域
現在Siri是操作系統一個必不可少的部分
用戶通過home鍵時刻都能使用它
或通過耳機的麥克風說 嘿 Siri
以及其他多種不同方式觸發Siri
SiriKit也是操作系統必不可少的部分 和Siri自身一樣
那麼Siri的整合
是我們今年創建的這個更大的意圖框架的一部分
全都是關於溝通這些共同的 共享的行爲和意圖
在你的應用和iOS之間
這個意圖框架將不僅限於今年的Siri整合
它是聯繫人整合的一部分
你可以捐贈信息給系統
提升你的應用到默認發送信息
或打電話的機制爲某些聯繫人
我們也對CallKit做了非常深度的整合
以打造非常棒的VOIP體驗
這其中最大的整合就是地圖
地圖中加入了拼車服務到iOS 10
你可以在地圖應用中直接預約搭便車
我們和地圖團隊密切合作
打造一個共同的擴展點
這個意圖擴展和拼車意圖
用於Siri和地圖以打造相同的體驗
如果你採用SiriKit和意圖擴展
你就會免費獲得地圖整合
我們認爲這是很棒的方式節省一些時間
打造更好的開發者及用戶體驗
我想講的最後一部分
是用戶如何與你的應用對話
非常重要的是 作爲我們iOS的安全性和私密性模型的一部分
讓你的客戶對你的應用和數據放心
重要的是他們理解當...
他們要對你的具體的應用說話
以及當他們的數據進入你的應用
要確保你的所有用戶對此知悉
用戶需要說出你的應用的名稱
當他們對Siri作出請求時
具體來說 我們要看你的bundle顯示名稱
這顯示在主屏幕上在你的應用圖標下面給你的用戶看
Siri全是關於自然語言
以及和用戶進行舒適流暢的對話
爲了確保那樣那就是這個作用的部分
用戶能夠說出你的應用的名稱用很多種詞性
在說話的開頭、結尾或中間
不管哪裏只要自然地融入
因爲Siri要創造自然流暢的體驗
對你的應用說話爲你的用戶
用戶利用SiriKit時最常做的一件事是
我們所說的將應用名稱動詞化
或者把你的應用名稱用作一個動詞來描述一個特定的行爲
舉個例子 他們會說
“獨角獸快信 Celestra請訂購5個彩虹卷”
在這裏 他們把獨角獸快信用作動詞
描述他們要求我們採取的行動
這個當然用Siri能做出相當好的效果
事實上 有多種方式用戶可以用Siri對你的應用講話
可能性是無窮的
這就是爲你的用戶實施很好的Siri體驗時所涉及到的
但不僅僅涉及工程植入
在打造良好的Siri體驗時
要和大傢俱體講講關於如何設計很棒的Siri體驗
我想邀請Buttercup我的同事Corey上臺
謝謝
大家好
我是Corey Peterson是Siri的設計師
很激動來跟大家講講用SiriKit創造神奇的體驗
我今天要講三點
首先是Siri爲你們做的一些事
幫助你讓與你的用戶對話更便利
其次
我們會講一些設計指南
你在開始用SiriKit時就要牢記
然後 我會給你們一些建議可以怎樣優化設計
讓你的應用更上一層樓
那我們就開始講
用戶界面
當我說用戶界面時
你可能在想類似這樣的東西
一個按鍵
屏幕上顯示的視覺界面的一部分
視覺界面已經很好地理解行爲和模式
還有...
每個人對使用那些都很熟悉
它是應用的一部分
應用給了你語境關於你想...
用戶想做什麼
他們可用的選項以及關於那些因素的細節
而且有大致一種方式和一個按鍵互動
但是 當你開始使用對話
事情就變了
最大的一個不同就是按鍵沒了
屏幕上沒有信息會感覺很奇怪
那我們怎麼解決這個？
由於用戶可以想說什麼就說什麼
或者他們甚至不知道要說什麼
那麼我們想把它當作一個對話界面
事件的語境
透過對話建立
在人、Siri和你的應用之間
沒有視覺參照的話
用戶或人必須在腦中牢記這個信息
於是Siri努力呈現
僅僅相關的關鍵信息以完成任務
不會用其他信息覆蓋過它們
並且 這個界面是由問題和迴應形成的
二者來自於人和Siri
重要的是要思考Siri是如何問與答
你的應用有這個能力形成這個對話
我們稍後再講那個
我們來看個例子看這個是怎麼實現的
假設有人創建了一條信息
Siri可能會這樣說
準備發送？
在這裏人們可能會有很多不同的說法
可能會直接說 “發送”
或者可能決定不要
或者可能完全忽視問題
說他們想說的任何話
那樣也行
這些事實際上恰當的迴應在這個情境下
有一點很棒的是Siri會爲你處理這個
發送正確的信息回到你的應用上
而且更好的是
Siri會處理成千上萬種
人們說同一件事的其他方式
之前
Robby講了所有不同的方式當人們開始與Siri對話
我要集中講講當中的幾種
大家都熟悉的是拿起設備
按home鍵
開始對話
但是 另一種我們有的重要模式
是所謂的免提
你不必用身體觸碰設備來開始對話
只要用“嘿 Siri”發出你的請求
你就能從房間另一頭做事
或者 嗯 在房間另一頭
如果你抽不開手或正在做其他事
我給大家看幾個例子
關於對話界面如何改變以適應這些情境
這裏 我們說
我正握着我的手機 按按鍵
那麼我說
“我有任何提醒事項嗎？”
你有五條提醒事項
於是你聽到了Siri給出一個很快的回覆
然後在屏幕上給出視覺信息
由於我握着手機我可以看一下
那麼 聽一下這個會怎麼變化當我激活免提時
嘿 Siri我有任何提醒事項嗎？
我找到五條提醒事項
第一個是講關於輔助功能
然後讓Siri對Cupertino裏的人打招呼
然後到下一頁
你要我把剩下的讀給你聽嗎？
不用了 謝謝Siri
所以正如你所聽到的Siri大聲讀出該信息
它給出更少量的信息
讓我更容易明白
最後
Siri問我下一步這樣我是控制着對話
以及接下來要發生什麼
我們也在其他地方使用這些相同的原則
在CarPlay中 你要盯着路面
對需要輔助的人來說也很有幫助
Siri很棒 因爲你可以要求它執行一個任務
而且它能夠做到
你無需找到一個應用
在視覺用戶界面中瀏覽以完成任務
但Siri能做到更多
Siri明白當你連接設備時
比如一副耳機或一個藍牙助聽器
然後它適應...
噢 另外一點就是它能識別設置例如voiceover
這是Apple的技術用來讀出屏幕上的視覺元素
而且 適應它的行爲
以協助用戶完成任務
以上是關於Siri如何協助你
接下來有幾點是你可以協助Siri的
確保你測試正如你開發你的應用一樣
多種不同的請求
測試不同的情境特別是試驗免提的東西
通過整個過程
確保你的應用提供信息返回Siri
以便Siri能將其再提交給用戶
在免提情境中那樣尤爲重要
好了 接下來我們講一些設計指南
我要你們把它視爲與你的用戶的對話
和任何重要的對話一樣你需要確保你有所準備
傾聽
問問題
並回應請求
那麼 我們怎麼準備？
首先是明白
你的用戶並不完全像你一樣
什麼意思呢？
你花了非常多的時間開發和設計你的應用
你擁有一定的知識
比其他任何人將會擁有的要更棒
而那會影響你如何與Siri對話
你需要出去找到一些真人
可能是朋友、重要的其他人也可能甚至是做市場營銷的人
問他們會跟Siri說什麼？
那我就用今天的主題
來講講一個應用叫獨角獸搭車
對於這個假的應用
我們去和一些真實的用戶談他們給了我們一些迴應
有些人會說“搭個車”
在此情況下 Siri會問用戶他們想要用哪個應用
然後繼續完成剩下的任務
有些人可能會提供更多信息
有些人可能會提供非常具體的信息
其中一些不太可能
因爲我們都知道
在Pegasus上擠兩個人非常困難
一旦你有了所有這些迴應
確保你的應用是個好的傾聽者
聽取用戶提供的所有信息並使用它
但他們不一定提供所有你需要的信息
所以 你要找到方法獲取它
一種方式是選定一個好的默認
假設我請求搭便車
我沒說在哪被接獨角獸搭車選好的默認
我可能想要就在這裏被接
或者在樓下的馬路牙子
你還可以作出有根據的推測
基於你對用戶的瞭解
但要避免糟糕的驚喜
你不想要選最貴的選項
或某些其他默認 或某些其他推測
會讓用戶之後變得不高興
所以如果你有問題而且你不確定有人會不會不高興
也許更好的辦法是向用戶提問題
但這樣的話 你要確保簡單化
沒人想玩一個20個問題的遊戲
當他們只想完事
所以 只要求絕對有必要的東西
而且人們可能提供的信息你的應用不能處理
那麼你需要將那些錯誤發回給Siri
以便Siri可以提交給用戶並繼續執行任務
有兩種類型的問題我想具體討論一下
Brandon之前也有講過
第一種是確認
當你有一個項目時你想要和用戶覈實
這可以做到因爲你作了一個有根據的推測
或者有一個項目會產生非常大的影響
如果有人習慣作出小額購買
或小額付款 通過你的支付應用
而突然間他們作出一個支付是數額大得非常多的
你可能要和他們確認確保那是他們的意思
下一個是消歧
這個很棒當你有多個選項時
你需要用戶選一個
那麼這個可以用在當你有一個簡短的清單時
比如可用的搭便車類型在某個既定的時間
或者 如果你有一個長很多的清單
假設我要發信息給Eric
我有一些人在我的聯繫人中
我可以將其篩選至只剩對於Eric可能的匹配
然後讓用戶來選
Siri可以顯示這個清單以視覺的方式也可以通過說話
然後用戶可以迴應通過點擊或說出迴應
那麼在你執行任務之前
Siri會和你的擴展覈實以確保一切準備就緒
它要從你的擴展取回所有的信息
以便它將其提交給用戶
Siri會以語音的方式提交這個
然後它會在屏幕上提供一個用戶界面來展示這個信息
如果用戶決定繼續
如果用戶決定繼續
你應該執行行爲
然後將那些結果返回給Siri
以便Siri可以將其呈現給用戶並告訴用戶
以用戶作出請求的同樣的方式
他們開啓對話而Siri可以在對話中回覆
其中很棒的一點是它隨處可用
可以用在CarPlay免提也可以用
當有人觸摸設備時也可以用
而Siri會再次提供一個視覺用戶界面來協助
但是 如果你想要的話
你的應用可以提供一個定製的用戶界面將你的app的那種感覺融入Siri
我想要你作出限制限制你展現的東西
用戶想完成一個任務
你不要分散他們的注意力給他們不需要的信息
你還要確保你設計這個用戶界面
適用於不同的屏幕尺寸從最小的電話到最大的iPad
這裏有另外一個定製用戶界面的例子來自獨角獸快信應用
正如Brandon所說你應該使用我們的API
來隱藏任何冗餘信息
你這樣做的時候需要確保
你的定製用戶界面以視覺方式呈現一切
而且你將所有信息發回給Siri
以便當用戶看不見這個用戶界面時免提的請求仍然可用
在一些情況下
Siri會打開你的應用來完成一個請求
對於搜索相片的請求我們會那麼做
我們會在你的應用中顯示結果
這點很棒 因爲你的應用可以提供跟進行爲
任何時候 用戶從Siri進入你的應用
你不要給他們驚喜
不要在中間放任何插屏信息或提醒
並確保你只執行用戶請求的行爲
好 接下來我們來講講潤色你的設計的幾點建議
之前Brandon講了應用特定的詞彙
以及你可以提供的例子
用戶可以找到那些信息
通過去找Siri然後只要問
“你能做什麼？”
Siri會展示許多它能做的不同的事情
包括你的應用以及你提供的例子
那麼我想給你們一些建議關於如何寫好的例子
確保你的例子包含你的應用名稱
以便用戶可以找到你的應用使用你的功能
把你的例子保持簡短並集中於你的應用能做的事
你應該提供多個例子對於你支持的每個意圖
並確保你優先處理
你的意圖以及那些意圖裏的例子
如果你的應用在多個語言和區域中使用
確保你提供本地化的例子
在適當的地方
最重要的是確保它們有作用
要避免幾件事
你無需在你的例子中稱呼Siri
也無需任何不必要的客套話
只要專注於你的應用的功能
最後一點我想講的是迭代體驗
你要確保你有時間去研究
並試驗如何促成對話
確保你和真實的人交談
不僅僅是他們一開始會說什麼
而是完成某事的整個過程
而且 在不同情境中嘗試
免提
或出去轉轉而不只是在桌子上測試
而且全程要確保你在問“它感覺對嗎？”
如果你需要 就做出改變並迭代
因爲我們要爭取
爲你的用戶打造很棒的Siri體驗
那麼 我們來回顧一下今天所講的內容
Robby先向大家介紹了SiriKit
把Siri的力量和你的應用帶入對話中 爲你的用戶
Brandon講了創建擴展
以及它們如何與Siri溝通透過意圖和意圖迴應
以及解析、確認和處理的方法
還有 你的應用需要提供詞彙
即用戶會對你的應用說的普遍的東西
然後我們講到設計
引入對話交互
對話界面
以及你可選的選項在你開發你的應用時
從而爲用戶塑造對話
最後我們講了迭代從而...
我們能夠獲得一種Siri體驗讓我們感覺輕鬆而又神奇
我們在網頁上有關於這個講座的信息
我們本週有一些相關的講座
我要特別強調“以SiriKit來拓展你的應用”
是在明天
我們的部分同事會具體講解API
向大家展示整合SiriKit案例的代碼
非常感謝大家
我們迫不及待想看到你們的作品