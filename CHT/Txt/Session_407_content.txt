審覈應用的輔助功能
早上好
我是Susumu Harada
一名來自輔助功能團隊的工程師
今天很高興能和同事Patti
一起給大家介紹
一種最便捷的工具用於發現 診斷和修復
應用中的輔助功能問題
也許有些人還是輔助功能方面的新手
所以讓我們簡要介紹下什麼是輔助功能
大家在開發應用過程中會遇到的問題
首先 輔助功能就是確保每個人
都能享受到應用所提供的產品和服務
不論他們的能力如何
現在 有些用戶可能有視覺
或聽覺障礙
有些可能正遭受身體和運動困難
或者有認知和學習障礙
爲了支持廣泛多樣的用戶
Apple已努力開發一系列輔助技術
幫助增強各種用戶的能力
例如VoiceOver幫助有視覺障礙的用戶
Switch control幫助運動困難的用戶
我們也確定這些技術可通過平臺用於所有設備
包括macOS iOSwatchOS和tvOS
儘管這些輔助技術 工具很棒
但用戶體驗的核心是你們的應用
所以要更好了解你的應用如何與我們的輔助技術交互
過程中可能會遇到的問題
首先來看看一個簡單的例子
我寫了個簡單的應用叫做Math Learner
我給一位用戶在頂部顯示一個方程
底部有四個答案按鈕
用戶可以點擊答案按鈕
得到答案是否正確的反饋
非常簡單
看起來運行正常
但是現在有位盲人使用該程序怎麼辦
顯然若沒有輔助技術
他們無法看到屏幕那就毫無用處
幸運的是
他們可以使用我們的屏幕讀取器VoiceOver
讀出屏幕上的信息
還可以在屏幕上使用各種手勢
來導航和與不同控制器交互
這樣 應用的輔助功能就很全面
當用戶點擊屏幕方程
VoiceOver讀出
5加3等於
很棒吧
所以要如何才能讓像VoiceOver這樣的
輔助技術有效與應用連接呢？
有幾個關鍵信息
但首先要知道的是
屏幕上重要元素的位置
要知道每個元素的特點
或是類型例如這個按鈕標題或靜態文本是什麼
最後 還要知道一個描述標籤
以及該元素的唯一標識
可以以一種可理解的方式向用戶描述
這樣有了這些關鍵信息
VoiceOver和其他輔助技術就可以
以一種可用性強的方式向用戶
展示交互性
所有的輔助功能信息都是通過
輔助功能API由應用提供的
Apple公司努力打造輔助功能支持
納入我們的UI框架
所以若你使用標準控件構建自己的應用
所有的輔助功能信息都將自動由
制定器填入
你不必進行其他操作
當然 你的應用將會最終包括自定義控件
當它們生效 你可能需要提供
一些自己的輔助功能信息
如果沒有 你可能最終無法訪問應用
所以讓我們來看看會有什麼影響
如果我已經執行頂部方程視圖
使用完全自定義繪圖代碼如CA Layers或OpenGL
在默認的情況下沒有任何輔助功能
所以除非我明顯提供了
纔可能完全無形於VoiceOver
和其他輔助技術
而這四個底部按鈕
如果我使用類似按鈕的自定義視圖
但忘了說明
它們作爲按鈕的輔助功能特點
那麼VoiceOver和用戶
就無法知道它們可以點擊這些按鈕
最後 這是求助按鈕
如果我對它使用自定義繪圖代碼
忘了給標籤提供輔助功能
VoiceOver就不知道如何向用戶描述
而用戶就不知按鈕的用途
所以這樣你就會發現
要是錯過一些關鍵的可訪問下信息
需要依靠輔助技術的用戶體驗
就會非常糟糕
所以必須確保應用全面的輔助功能
從而提供良好的用戶體驗
確保應用輔助功能還有另一個好處
就是對於具有全面
輔助功能的應用
你可以自動編寫UI測試
通過使用Xcode的UI測試支持
獲取更多信息 推薦大家去看
去年 WWDC 上的Xcode的UI測試演講
審覈輔助功能
好極了 那麼
如何才能確保app提供
所有必要的輔助功能信息呢
我們一直建議的方法就是
使用實際的輔助技術
例如VoiceOver和Switch control
現在 這還是個很理想的方法
因爲這樣你可以反映實際的用戶體驗
同時不論是否可以進行訪問
都還可以解決可用性的問題
但是這確實要求大家熟悉掌握這些技術
特別當你的應用支持多平臺時
你會覺得這有點難
必須的特定設備上多次部署應用
通過各種輔助技術運行
在每個平臺重複這個過程
所有平臺都有一些輔助功能設置
用戶可以進行配置
例如動態類型的字體大小
作爲開發人員可能會覺得有點乏味
必須在改變輔助功能設置
和返回應用中
進行來回切換
驗證在應用上的效果
再重複該過程
所以 聽取大家的反饋後
今天很高興發佈一種更爲簡便的
全新工具用於審查輔助功能
那就是全新的輔助功能檢查
在輔助功能檢查上
只有一個按鈕
它可以自動審查應用的一般輔助功能問題
非常簡單
甚至可以建議你如何解決問題
在Interactive Inspection模式中你可以輕鬆定位應用的任何元素
獲得詳細的輔助功能信息
不論應用是在模擬器還是連接設備上運行
都可以使用
我們還提供了實時預覽功能
可以讓大家輕鬆改變輔助功能設置
並立即在應用上看到效果
卻不用離開應用
很高興告訴大家這款Accessibility Inspector
現在已經支持所有平臺
只要桌面上有輔助功能檢查應用
你就可以審查應用在macOS iOS watchOS
甚至tvOS上的運行
而你只要在模擬器或設備上運行應用
選擇inspector上的各個目標
就是這麼簡單
我們希望這個功能
可以最大程度上簡化在所有平臺上的測試和審查輔助功能的工作
給大家演示了這些全新功能和全新accessibly inspector後
我要把時間交給Patti
嗨 我是Patty Hoa
很興奮
可以給大家介紹我們全新輔助功能檢查
我們一直致力於整個大家的反饋
我已經等不及向大家展示了
請注意
輔助功能檢查現在是開發包的一部分
這意味着大家只要進入迷你工具條
Open Developer Tools區域下方的代碼
就能運行輔助功能檢查
這是我們新Accessibly Inspector的截圖
首先希望大家注意下頂部
左邊是Target Chooser
這可以讓我們
檢查所有不同的Apple設備
包括iPhone iPad
臺式機 watch TV和模擬器
中間是Inspection Pointer
當你啓用這個時
工具就能開始檢查
你手指下方的設備上是什麼
若是使用模擬器或臺式機
就是你鼠標光標下的內容
在右側有三個按鈕
代表工具的三個主要功能
這就是下面我要給大家介紹的
會有更多細節和演示
是哪三種功能呢
第一 檢查
檢查功能可以調試分析
應用的可訪問狀態
然後是審查功能
幫助大家找到應用的輔助功能問題
最後是設置功能
幫助大家快速測試輔助功能設置對應用的影響
我要說的第一點是審查功能
大家的最終目標是
確保應用對每一個人的輔助功能
要做到這一點 首先就要審查應用
正如Susumu提過的那樣可以使用
VoiceOverSwitch control以及
審查應用
或者你也可以聘請輔助功能顧問
代表你進行評估
當 今天我要說的是
一種更經濟的解決方法
只要使用我們工具的審查功能
在審查選項中有這個審查運行按鈕
向大家介紹該功能最好的方法就是
演示一遍
我在屏幕上
運行一版
iOS版的Math Learner應用
在模擬器上運行
這樣你可以玩遊戲 我們有方程
我們選擇其中一個選項
不是那個 這個
三個 這就是玩遊戲的規則
好了 現在我想要運行輔助功能檢查
我只要前往Xcode
在頂部
Open Developer Tool的下方
我們要啓動輔助功能檢查
你要告訴工具的第一點就是
你要審查那個設備
在Target Chooser中我要挑選模擬器
之後點擊審查選項條
這個就是我之前說的審查運行按鈕
我繼續點擊那個
幾秒後 我們就完成應用的審查了
這些是發現的問題
可以進行選擇
循環瀏覽這些問題
你會發現有
一個對應的紅色高亮區顯示問題
當然 如果你檢查真實的設備
例如iPhone和iPad
就可能是這樣的視圖
如果你想指定問題的位置
就必須離開工具
關注iPhone或iPad
我們有的只是
一個還不錯的功能
只是給你工具中有問題的相同元素的
一個小預覽 一個截圖
這樣你可以繼續關注工具本身
好了 我們有這些問題
下一步你想做的是什麼
就是解決問題
先選擇一個問題
元素沒有描述
點擊三角形展開獲取更多信息
好了 所以是元素沒有描述
相對應的代碼是什麼
你知道要編寫哪一段代碼嗎
好吧 如果你在線
閱讀所有關於輔助功能API的文件
可能可以給你一些修復問題的提示
但是今天我要展示一種更便捷的解決方法
只要點擊這個問號
工具會識別哪個API需要修復
內容是 考慮設置輔助功能的標籤
那麼 在這一點上如果你知道API如何工作
你只要直接進入代碼進行修改
但如果想要更多關於API如何運行的信息
可以點擊這個鏈接
之後可以鏈接到像這樣的文件
你可以找到更多關於API的信息
好了 因爲我知道需要覆蓋哪個API
所以直接進入代碼 進行修復
我正在修復的
就是那些帶點的按鈕視圖
而實現的方式只不過是一個自定義UI視圖
所以現在
我只要重寫
輔助功能標籤
再返回描寫那些點的字符串
當然 你應該返回的是本地化字符串
好了嗎？現在我用自己的編寫方法
我要進行保存 運行 再運行
好 讓我們返回Addition
清除有的老問題
再返回審查
代碼做了小變動後
我們修復了一堆問題
很棒不是嗎
好了
請注意這個同樣強大的審查功能
可以由團隊的其他成員使用
如代表你想要進行評估的質量檢查人員
當然 他們會報告這些錯誤
爲了加快報告流程
他們現在只要在運行審查後
複製黏貼
到錯誤報告中
當然 每個合格的錯誤報告
都應有屏幕截圖
所以我們在這兒有個Quick Look按鈕
只要一點
就能夠獲得整個屏幕的截圖
加上問題存在的藍色框
你只要再一次複製
黏貼到你的錯誤報告中
現在你已經準備好發送錯誤報告了
好了 我們剛纔看的就是審查功能如何
幫助你自動檢測應用問題
並給你提供建議方案
甚至加快錯誤報告過程
這個功能的強大之處就是
幫助發現應用中的問題
類似於在Xcode的編譯警告
沒有警告不代表
應用 沒有問題
這就是必須要進行一些人工審查的原因
爲了說明其重要性
我給大家舉個例子
假設你有一個按鈕
功能是發生郵件
當然 按鈕帶有一堆屬性
當我們創建新按鈕時 我們往往喜歡
簡單地從現有按鈕中選擇一個
進行復制
當然 按鈕所有的屬性都進行傳送
我們再去調整一些屬性
像動作和圖標
這沒問題 一切都順利
除非你忘了升級一些屬性
會產生問題
特別是在這種情況下的輔助功能標籤屬性
對於使用輔助技術如VoiceOver的用戶
輔助功能標籤屬性顯得至關重要
原因是唯一擁有的信息
就是這個按鈕的功能如何
所以使用輔助技術例如VoiceOver的用戶
使用這個按鈕而輔助功能標籤沒有更新
提示說發送郵件
當他們按下按鈕以爲在發送郵件
但實際上是刪除郵件
這就不是個好結果
對於這點
我們就要幫助大家使用工具
進行人工審查
這也是我要談談檢查的原因
首先讓我介紹下檢查的一些亮點
以及是如何在人工審查過程中幫助大家的
假設我們這裏有一個按鈕其中有8個點
檢查選項頂部有Quick Look
左邊是描述區域
或者是總結元素如何描述的
在這種8點按鈕的情況下我們只要說8
右邊是導航按鈕
讓你輕鬆從該元素前往鄰近的UI元素
通過這個按鈕
下面是基本區
包含用於描述元素的屬性
例如 我們有標籤
與輔助標籤相對應
返回值8
我們有Trait
這種情況下 一個按鈕 返回按鈕
因爲這個按鈕是相互作用的
你要考慮Action區域 看到
有Activate Action
這樣你只要點擊運行按鈕就能
驗證這個活動生效
這就是檢查的亮點之一
讓我繼續給大家做一個演示
好了 我們回到應用
現在我們要進入檢查選項
記得之前我提到有這個Inspection Pointer
現在啓用了 就意味着 我把鼠標
放在模擬器該項目上方
工具會開始檢查光標下的元素
你可以看見綠色的亮點
在桌面模擬器上
你如果單擊項目
就會關閉Inspection Pointer
就可以四處移動鼠標
卻不會影響檢查項目
我們正在檢查addition你看到描述
現在我點擊進入下一元素按鈕
你會看見亮點下降到這些按鈕
再點擊 進入下一個
同樣得到描述 這是4點按鈕
注意我們完全繞過
了重要的事情： 這個方程
只要進行這個導航
就能找到伴隨的問題
這種情況下 可能方程會有問題
我們繼續往下
我們在8點 9點
再到幫助按鈕
除了描述看起來不太好 對吧
IMG 0151
不太對頭再一次 可能是另一個潛在區域
需要修復
如果可以簡單使用Quick Look區域
在所有應用UI進行導航
並驗證描述是否都正確無誤
然後你就在正確的軌道上了
當然 如果你有其他交互UI
類似這些按鈕
你只要去Action Section
現在
我點擊執行按鈕激活該按鈕
來驗證活動效果
很好 我剛纔展示的
就是如何使用檢查
來幫助你進行應用人工審查
現在檢查對與應用輔助功能狀態
的調試和分析也有很大幫助
其中一個例子就是理解輔助層次結構如何工作
這個很重要特別是在OS X應用上
其中相應的視圖層次會變得更復雜
爲了展示該功能如何作用
我繼續運行同一應用的OS X版本
好了 這是OS X 版本的應用
我們進行稍微複雜一些的處理 乘法
當你進行3乘以6
不好意思 再來一次
這次怎麼樣
錯誤 再來 3乘以6 18
正確
好了 你進行一樣的操作就知道 這個應用怎麼工作了
在iOS和OS X上運行一樣的應用
好了
首先要做的就是
告訴工具你要檢查一個新設備
我們開始選擇
我的MacBook Pro原因是我們正在檢查機子本身
這種情況下我們應選擇先要檢查的應用
我想選擇Math Learner
我們可以再次運行審查功能看看發現什麼問題
發現了一堆問題
我希望大家注意這四個問題
就是 可能無法訪問的元素
執行這些答案選項它們只是自定義的NSview
這是通過CA文本圖層繪製文本
現在 在默認情況下CA各層沒有輔助支持
意味着如果你創建它們
VoiceOver客戶就無法看見它們
工具正在告訴你這些不能訪問
爲了瞭解如何解決這個問題
幫助瞭解如何可及性層級如何工作
我們前往檢查
再次 打開Inspection Pointer
如果我把鼠標這樣
再次 檢查鼠標下的內容
我想要檢查的是整個窗口
原因是我想知道
這個窗口的子元素有哪些
所以 我能看到的
就是我在層級區域下能看到的
這些是該窗口的所有子元素
我放到方程上方 你能看到紅色的亮點
在圖像上
一些狀態文本上
還有工具了部分的一堆東西
現在
那四個關鍵答案選項按鈕就不再是窗口子元素
我們知道要進行修復
但今天 我不會演示如何修復
而是 讓大家看看
我們示例代碼輔助UI例子
可以從developer.apple.com下載
這個示例應用包含
一整個UI場景數據庫
你可以向裏面增添輔助支持
我建議大家這麼做
一旦修復
我希望那四個答案選項按鈕
就會作爲窗口的子元素
你就可以在該層級驗證它
我之前展示的都是
如何使用檢查功能
幫助大家進行人工審查
以及如何使用檢查功能
進行應用輔助狀態的調試和分析
下面我想要談談
設置
在所有OS平臺上
我們有着很多輔助功能設置
自帶內置
例如在iPhone上
在“常規輔助功能”下設置應用
你會發現
許多很棒的內置輔助功能
像Toggle一樣設置
如果你想知道動態字體如何影響你的應用
你可以進入
調整字體大小
調到很大
然後返回應用
就能直觀驗證大字體在應用的效果
然後再返回設置應用
重新調到很小
再看看很小的字體在應用的效果
現在 你可以看到這會很繁瑣
如果你一直在設置應用和自己的應用
之間來回切換
還有
你又該如何知道
那個輔助設置對測試來說很重要
好了 我們的工具可以給出答案
這是我們的設置選項
我們的設置選項顯示
了一些最常見的輔助功能設置
希望你們測試一下
另外 因爲工具中內置
你不必再在應用之間來回切換
這個演示告訴大家如何操作
在設置選項中 大家可以反轉顏色
並立刻看到呈現在應用中的效果
我們可以對字體大小做同樣的處理
調整
直接看到效果
你剛纔看到的
就是設置功能帶來的便利
今天我給大家展示了三大功能
第一是審查功能
幫助大家自動檢測應用的輔助功能問題
並給出修復建議
讓大家更快速地報告問題
然後我們看到了檢查功能的強大之處
指導大家進行整個人工審查過程
並對應用的輔助功能狀態進行調試和分析
最後就是剛剛看到的設置功能
便於大家查看測試
輔助功能的設置改變在應用上的效果
有關輔助檢查功能的簡要介紹就是這些
好極了 謝謝Patti
我們期待大家體驗我們全新的輔助功能檢查
也希望
大家在設計下一個應用時能努力
確保所有用戶的需求
爲了幫助大家實現這一目標
我們今天給大家介紹了全新的輔助功能檢查
希望能讓大家更便捷地找到診斷並修復
應用中的輔助功能問題
與開發流程無縫整合
這樣大家就能簡單地檢查和審查應用
不論是在模擬器還是在設備上運行
我們很高興告訴大家支持所有平臺
包括macOS iOSwatchOS和tvOS
我們希望這款新工具
能夠讓大家編寫出優秀的應用
讓不同能力的用戶都能使用的應用
你可以在該URL中的視頻和文本中找到更多相關信息
我們期待收到大家的反饋真誠希望聽到大家
對於如何更好支持開發工作的意見以及在
使用該檢查時遇到的問題
你可以給我們傳送改進和錯誤請求
不好意思 是報告不是請求 錯誤報告
在bugreport.apple.com上
也可以加入我們的開發人員論壇
網址forums.developer.apple.com
要是你昨天錯過
我們推薦大家去回顧並觀看這些精彩的演講視頻
包括“輔助功能新變化”的演講
和“包容性應用設計”的演講
今晚我們
在Buena Vista Park舉行輔助功能技術和
包容性設計的討論會
不是真正的公園而是設在一樓的會議廳
期待與大家在那兒相見
謝謝大家盡情享受接下來的大會內容