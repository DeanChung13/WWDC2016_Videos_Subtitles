iMessage應用和貼圖第一部分介紹信息應用和貼圖
大家早上好
歡迎來到第一部分iMessage應用和貼圖
我是Bhaskar 我是一個工程師來自蘋果的信息團隊
今天我們要介紹iMessage應用
它的意義是你將能編寫應用
它運行在短信應用的上下文中
iMessage應用可以提供三種主要的內容
第一 它們可以提供可交互的短信息
可交互的短信息是一種你的應用生成的信息
而當你的用戶點擊這條信息時它會啓動你的應用
比如說 在這裏展示的這個截圖中
我正使用DoorDash應用向我的朋友們發送菜單
有關我們今晚的派對
他們將可以在手機上看到這條短信息
而如果它們已經安裝了這個應用
他們就可以點擊它而點擊操作會啓動DoorDash
此時他們就可以修改菜單了
向其中添加信息並回復給我
iMessage應用也可提供貼圖
貼圖是你的應用所生成的圖片
我們相信它可以創造一種很有趣的
交互性體驗在iMessage用戶之間
最後 iMessage應用可以提供任意其他種類的
短信息所能包含的內容比如照片
視頻 文本 鏈接等等
且在iOS X中我們會提供一個Message App Store
這意味着你寫的應用
與你創造的應用會被顯示並展示
在Messages App Store中
用戶可以通過短信息來訪問這個App Store
它們將可以下載你的應用
你的用戶所下載的應用
將被展示在短信息的UI中
我們稱之爲Messages App Drawer
我們還有這個很強大的功能 可以允許你的用戶
很輕鬆的發現你的應用
我們稱之爲內聯應用歸屬
讓我們通過一個例子來理解其含義
在這裏展示的截圖中我收到了一個貼圖
來自我的朋友 但我沒有安裝相關的應用
即他發送貼圖所使用的應用
這種情況下你可以看到放大的單元格
在貼圖之下 我們可以看到應用的名稱
也就是發送貼圖的應用
點擊這段文本就會啓動這個Message App Store
並將發送貼圖的應用展示給我
然後我就可以下載這個應用並使用它
就像我使用任何其他iMessage應用一樣
在這裏展示的這個例子中我使用了貼圖作爲示例
來演示內聯應用歸屬
但它也適用於任何其他iMessage應用所能生成的內容
並且創建一個iMessage應用很類似於
創建任何的iOS應用也就是你已經創建過的應用
你將可以使用同一套技術
和框架也就是你正在使用的
舉例來說 你可以使用的一些工具包括
集成in-app purchase到你應用中
你可以訪問Apple Pay
而且你的iMessage應用將可以使用相機
我們相信這些功能可以讓你爲你的用戶創造很棒的應用
現在讓我們聊聊支持的平臺
iMessage應用只能運行在iOS X中
但是 你的應用所所生成的內容將被
發送到watchOS和macOS設備並被查看
在watchOS 3.0中在Messages應用中
我們將提供一個新頁面叫做Recents Page
Recents Page與其他頁面不同 會展示貼圖
你的用戶最近通過手機所發送的
而你的用戶不止會看到這些最近的貼圖
他們還可以在手錶上發送這些貼圖
就好像是在手機上發送一樣
這就是有關Messages App Store
和短信息平臺的內容了
現在讓我們談談創建iMessage應用的相關細節
這也是我們在剩下部分中將要講述的內容
首先我們要說到短信息框架
短信息框架是你必須要熟悉的框架
來創建iMessage應用
然後我們會談到創建Sticker Pack應用
而後我們要探索有關貼圖文件格式的細節
以及其他有關貼圖的限制
最後我們會講到創建一個定製貼圖體驗
通過使用短信息框架
我們不會在今天的演講中講如何
創建一個應用來提供交互性信息
我們會在第二部分講述如何創建這樣的應用
在我們的談話中 我請求大家
一定要回來看第二部分
將會繼續在這裏進行在週四下午1:40
短信息框架
短信息框架是一個全新的我們要在iOS X中引入的框架
短信息框架扮演一個接口的角色
在你的iMessages應用和短信息應用之間
當你的用戶點擊你的應用圖標來啓動你的應用時
需要通過這個框架讓我們發現你的應用
啓動你的應用 並將數據提供給你的應用
以及其他你的應用所需要的上下文
來展示其UI
一旦你的應用展示出UI且你的用戶
準備好與之交互時
並且在與應用交互結束之時
最好能生成一些你的用戶想要的內容
來通過短信息分享你的應用將這個內容返回給
給短信息 通過這個框架
此時你的用戶已準備好將返回的內容通過短信息分享
給他們正在聊天的人
我需要在這裏提到短信息框架
和iMessage應用是構建在頂層
在現存的應用擴展技術中
在這個意義上iMessage應用是一個應用擴展
而且在這種情況下短信息應用扮演着
你的iMessage應用的宿主應用的角色
如果你不熟悉
或者之前沒有寫過擴展的話我建議
你返回去看一看這個 WWDC 演講
在2014年介紹了iOS和OS X的擴展
所以就如我剛剛提到的iMessage應用是擴展
但是有一個很重要的區別
相較於其他iOS擴展而言
不像其他的擴展點你不需要
提供一個容器應用
爲你的iMessage應用
你可以只在你想要時裝載你的iMessage應用
但如果你已經有一個容器應用
或者你已經傳送到了App Store
你總是可以將iMessage應用集成在容器應用中
因爲 正如我之前所說這些都是擴展
所以如果你提供一個容器應用
那你的應用將展示在主界面中
在你的用戶的手機上以及在Messages App Drawer
在短信息中
它同時還會展示在主App Store
以及在Messages App Store中
但如果你不提供一個容器應用 那麼
正如你所見你的應用不會展示在
主界面以及主App Store中
它只會展示在Messages App Drawer中
以及在Messages App Store中
我想提一下如果你不提供一個容器應用的話
你依然需要提供一個圖標對應着你的容器應用
這個圖標會在系統的其他部分中使用
比如設置應用中
要展示你的應用的相關信息
比如它所佔用的存儲空間
所以現在讓我們談談貼圖
貼圖是一種很有趣的全新的交流方式
與其他iMessage用戶
你的用戶可以發送內聯貼圖
像你的用戶已發送過的其他iMessage一樣
或者你的用戶 不是你的貼圖
或者你的用戶可以拖拽貼圖到應用之外
並將它們附加到其他短信息氣泡中
我們相信這會帶來一種很具表現性的
且吸引人的短信息體驗
但貼圖對你而言意味着什麼？
貼圖根本上說是你的應用所提供的圖片
這些圖片可以是動態的也可以是靜態的
我們相信貼圖是一種很好的分享
或提升你所擁有的內容的方式
而且我們普遍認爲貼圖應用將
會變得非常 非常流行在iMessages用戶中
現在讓我們聊聊創建貼圖應用
有兩種方式可以創建一個貼圖應用
首先你可使用Xcode創建一個Sticker Pack應用
如果你使用這種方式你就無需
爲你的應用提供任何代碼
你只需要提供資源
爲了你的貼圖與應用圖標
但如果你想定製你的應用你就可以通過提供代碼來實現
這種情況下 你的代碼可以提供貼圖通過
短信息框架
現在讓我展示一個演示
來使用Xcode創建一個Sticker Pack應用
所以我現在要用我的電腦我現在要啓動Xcode
現在我將要
創建一個新的Xcode項目
在應用的名稱中我將要
選擇Sticker Pack應用
而後我將點擊Next
然後我將要命名我的項目SFStickers作爲資源文件
我將要使用這些資源文件
作爲資源來描述不同的舊金山地標
我點擊Next
現在讓我創建在我的桌面上
我完成了 讓我很快速的放大我的Xcode
太棒了 所以 如你所見在你現在獲得的模板
在一個Sticker Pack應用中沒有源代碼文件
這是這個模板的慎重的設計
讓我重申一點
若創建Sticker Pack應用
你不用提供任何代碼
你只需提供貼圖和應用圖標資源
所以讓我們看看如何實現
我進入Stickers
這是一個目錄裏面有兩個文件
Sticker Pack另是iMessage應用圖標
點擊Sticker Pack
現在 如你所見 它說我沒有任何貼圖 我需要
拖放圖片來添加新的貼圖
所以我照做
我進入Finder並進入桌面
我這裏有一些資源我正好使用它們
所以我要點擊第一個 我將要
將它拖拽到這裏
那就是金門大橋
我將要拖拽第二張了這是唐人街
爲了更快速 我將
選擇剩下的所有圖片並拖拽到這裏
太棒了 我現有所有資源了
這些資源是PNG類型的
Xcode還允許你創建一個APNG貼圖
要使用PNG獨立幀
讓我演示一下如何完成
現在我將要點擊或者在這裏右鍵單擊
我將要添加資源
我將要選擇New Sticker Sequence
當你創建一個新的Sticker sequence時
Xcode需要你提供獨立幀畫面
來構建你想創建的貼圖
所以我要返回到桌面
我要點擊這裏我有我需要的獨立幀
我將要拖拽第一個
我將要把第二個也拖拽進去
第三個
最後是第四個
現在讓我們返回Xcode來看看它完成了什麼
如你所見我有一個放大的版本
屬於這個貼圖 通過點擊
它的中心會真實的將動畫展示給我
看起來不錯
現在讓我把應用圖標也拖拽進來
我進入應用圖標分類
我進入這裏
我選擇這些東西
拖拽進這裏
我可能漏了一個讓我很快再做一次
好了現在我提供了應用圖標
現在我準備好了
我的應用完成了
現在讓我看看它是什麼樣子
我將要進入這裏來測試我的應用
使用模擬器
我將要選擇iPhone 6s作爲用於測試的設備
我將要進入“產品”並點擊“運行”
我現在只需要等待讓它出現
太棒了 短信息已顯示我在創建一個iMessage應用
我將要通過Messages應用來測試
然後我要運行它
模擬器啓動了
太棒了 如你所見我有兩段模擬對話
在模擬器Messages應用中
通過模擬對話我想要表達的是如果你進入一個
併發送一條短信息
它會展示一個來信在另一個對話中
澄清一下 你將無法發送短信息
從模擬器發送到真實設備上
所以我進入第一段對話我輸入一點東西
此時我只是在自言自語
如你所見 這是我的短信息太棒了
現在讓我看看我的應用是什麼樣子
現在我進入App Drawer你可以看到
我的應用在這裏已經準備好了等待被啓動
我點擊它
看 資源在這裏顯示了
這些正是我剛剛添加的資源 我可以下滑
看看他們是什麼樣子
現在 如你所見動態PNG也在這裏
我可以點擊其中一個 拖出
並拖拽到應用之外將其固定於一個短信息氣泡中
太棒了 如你所見我可以退出
進入到另一個對話中我在這裏看到了貼圖
所以這就是創建一個Sticker Pack應用的全過程
但是 我還想給你展示一點
那就是如何定製這個應用的特定方面
所以現在回到資源貼圖
我現在會展示
如何改變你的貼圖展示單元格的大小
在這個網格中
所以要實現這個目的讓我回到Xcode
我將要點擊“去頂部”
如你所見有一個下拉式菜單
名字是Sticker Size
我點擊它
有三個選項——大中小
我要點擊“大”來看看如何
它能改變我的應用
我再次運行它
短信息應用被啓動
讓我回到我的應用
如你所見
貼圖現在一行只展示兩個單元格更大
之間的空間也更大了
我將要深入一些細節
來改變貼圖單元格的尺寸在這個部分的後面
在這個演示中
我展示瞭如何創建一個Sticker Pack應用
使用Xcode在這個技術中正如我所展示給你
你不需要提供任何代碼
你只需要提供貼圖的資源和你的應用圖標
我還展示瞭如何使用Xcode內置的工具
來創建一個APNG貼圖通過使用獨立幀
來組成APNG
最後 我們講到了如何
改變貼圖展示單元格的尺寸
現在讓我們說說支持的貼圖文件格式
我們支持四種格式
它們是PNG APNGJPEG和GIF
在這四種格式之外
如果你想提供動畫貼圖
我們還支持APNG和GIF
我還進行了特定優化來
讓貼圖的發送更加快速 相較於
其他的iMessages附件而且爲了降低
貼圖的磁盤存儲空間
並幫助我們實現這些優化
我們需要限制文件大小貼圖最大隻能有500kb
正如我剛纔所提到我們支持四種文件格式
但是 我建議你儘量使用PNG和APNG
若不能全部使用這兩種格式
爲了理解我們爲何做此推薦 我們
看一下這些截圖
在這裏我有兩段對話看起來幾乎一樣
但有一個微小的區別
讓我放大來展示區別是什麼
如你所見左邊的對話中的貼圖
放在照片上 是PNG格式的
右邊的對話有同樣的圖片
和同樣的貼圖但貼圖是GIF格式的
如果你仔細觀察在放大區域中
左邊的那個 也就是PNG
不會顯示出任何鋸齒在其邊界周圍
但右邊的那一個 也就是GIF
顯示出了一定的鋸齒
在貼圖的邊界區域
發生這種區別的原因是PNG
和APNG可以很好地處理透明
但GIF不能那麼好的處理透明
然後如果你想要比較透明屬性
JPEG事實上根本不處理透明
所以要記住你的貼圖可以被拖拽到
你的應用之外並附加在短信息氣泡中
所以透明是一個很重要的因素
需要在設計貼圖時加以考慮
我還建議你親自嘗試你的貼圖
在不同的背景顏色中
比如黑色 白色甚至多色背景
因爲 再說一次你的貼圖會放到圖片上
在我剛剛所展示的演示用於改變尺寸
也就是貼圖所展示的單元格尺寸
有三種支持的單元格尺寸
它們是——大中小
對於每一種尺寸我們有一個推薦的最大
貼圖尺寸被支持
對於小貼圖是100乘100像素在3x比例中
對於中等是136乘136像素在3x比例中
對於大圖最大的支持尺寸是206
乘206像素在3x比例中
如果你提供的貼圖比大於這些尺寸
也就是你選擇的單元格大小所支持的尺寸
那你的貼圖將被短信息框架壓縮並展示
在這種情況下它們可能看起來並不像你所想象的那樣
但如果你的貼圖是在範圍之內那麼就可以正常展示
我還想澄清一點我們總是需要你
不論如何要提供3x比例的貼圖
相對於設備的分辨率
也就是應用所運行的設備
Messages應用負責縮小你的貼圖
如果對於某設備而言需要縮小
也就是你的貼圖正在展示的設備
這就是有關短信息框架和創建貼圖應用的全部內容了
此時我將餘下任務交給Lily
她會講解如何創建一個定製貼圖體驗 謝謝大家
謝謝你 Bhaskar
我叫Lily 我是短信息團隊的一個工程師
我將爲大家講解如何創建一個定製貼圖應用
首先 爲什麼需要創建一個定製貼圖應用呢？
你將獲得的首要好處是
可以定製如何在你的應用中展示貼圖
在我們剛纔的例子中我們看到了展示的貼圖
在一個很漂亮的網格佈局中
但是如果你想放置你的貼圖
以另外一種格式甚至是改變背景顏色
你需要創建一個定製貼圖應用
一個定製貼圖應用還將允許你
動態的創建貼圖
在我們之前的例子中我們將資源捆綁到
我們的應用中 而爲了
更新這些資源我們需要
向App Store推送更新
如果你想從服務器獲取資源
或者允許你的用戶在設備上動態的創建它們
若能這樣做 那麼你就不需要想App Store上傳更新了
短信息擴展還提供了相機的訪問權限
來允許你的用戶使用相機創建有趣的貼圖
最終你的應用還可集成In-app purchase
來允許你的用戶解鎖特定貼圖
我們可以創建一個定製貼圖應用 通過使用
短信息框架
短信息框架提供了構件
來創建一個貼圖應用
在通過Xcode構建的Sticker Pack應用示例中
它們使用了同樣的類在這個框架中
所以理想情況下你可以創建同樣的應用通過使用
短信息框架
在屏幕上的截圖中
我們有一個應用正在展示貼圖
你可以發現背景顏色是粉色的
所以我將向大家展示如何定製並創建一個這樣的應用
現在讓我們看一個演示
我現在要打開Xcode
我要創建一個新的項目
Bhaskar創建了一個Sticker Pack應用
但這次我們要創建一個短信息應用
所以我要選擇這個
然後我將項目命名爲“Nature Stickies”
因爲我們要使用自然資源
我們要繼續創建這個項目
我們要在桌面上打開它
很棒
如你所見我們這裏有兩個文件夾
Nature Stickies和Messages Extension
Nature Stickies不包含任何源代碼
因爲它包含了捆綁的應用
你將需要提供一個應用圖標給系統的設置
但是 我們更感興趣的是Messages Extension文件夾
所以現在我們要點擊MessagesViewController
然後我們可以看到MessagesViewController
將是我們最主要的類
它是MSMessagesAppViewController的子類
MSMessagesAppViewController將作爲控制器
來處理來自短信息應用的回調
我們將會更多的說到這些回調
以及你的應用如何處理它們
在我們講座的第二部分中
現在讓我們來刪掉這些函數
我將要選擇他們並點擊“刪除”
很棒 現在我們看看短信息框架
如果我們點擊這裏就會有一個MSStickerBrowserViewController
MSStickerBrowseViewController
將允許我們展示貼圖
它有兩個屬性
它有一個MSStickerBrowserView
這是用於展示貼圖的視圖
它還有一個MSStickerSize來決定展示單元格的尺寸
在我們MSStickerBrowserView的網格中
我們還可以看到MSStickerBrowserViewController
符合MSStickerBrowserViewDataSource協議
這個協議被實現時會返回一個數字
也就是應用正在展示的貼圖的數字
和與給定數字對應的貼圖提供給MSStickerBrowserView
所以爲了展示我們的貼圖
我們需要創建一個MSStickerBrowserViewController
爲了實現數據源我們將要寫一個子類
所以我現在要創建一個新文件
我要選擇Swift並點擊“下一步”
我將把它命名爲NatureStickerBrowserViewController
太棒了 現在我要導入UIKit
然後我要導入短信息
太棒了 現在讓我們創建我們的類
我將要創建
我們的NatureStickerBrowserViewController類
作爲MSStickerBrowserViewController的子類
如我剛纔所提到的MSStickerBrowserViewController
有兩個數據源方法我們需要實現它們
所以我要填充它們
我們需要一個方法
來創建我們的貼圖並存儲
我將要創建一個隊列來持有我們的貼圖
然後我們將看到我們的貼圖在MSSticker中
MSSticker是一個對象它持有一個文件URL
指向一個磁盤上的資源
它還將有一個局部的描述
用於限制可訪問性
現在讓我們創建一個貼圖
我將直接添加資源進bundle包
我現在要點擊Add Files並進入我的桌面
並選擇這裏的資源
我將它們添加到了我的應用中
在這個例子中我們只是添加資源進了我們的應用
但你可以想象你的應用既不能從你的服務器獲取這些資源
也不能允許你的用戶在設備上創建
所以現在我們需要創建一個貼圖
我們要寫一個函數來實現這個目的
太棒了 現在我們使用Bundle
我們創建一個文件URL指向磁盤上我們的資源
然後初始化我們的MSSticker
並提供一個局部化描述然後添加到我們的數列中
所以現在讓我們寫一個函數它會加載所有的貼圖
酷 我們可以回到MessagesViewController
並創建一個實例
我們將要創建一個NatureStickerBrowser
ViewController將其實例化並調用viewDidLoad
太棒了 我們實例化了browserViewController
並提供了一個貼圖尺寸
這將允許你的應用來顯示你的貼圖
在我們剛纔所展示的網格佈局中
這個應用會創建一個貼圖應用就像剛纔使用Xcode沒寫代碼創建的一樣
現在讓我們繼續定製它
我要寫一個函數它將改變背景顏色
也就是MSStickerBrowserView的背景顏色
所以我們要在這裏寫這個函數
我們只是要改變背景顏色
我將回到MessagesViewController
並調用它
所以現在我們可以改變背景
讓我們繼續運行一下我們的應用
我要選擇iPhone 6s
我要點擊“運行”
唉 我忘記了 我們沒有實現我們的數據源
所以我們現在要做這件事
我要返回貼圖的數字並
返回一個貼圖與給定數字對應
現在我們準備好運行了
我要選擇Message應用用於運行應用
太棒了 現在我們可以打開App Drawer
然後
你看 我們沒有一個圖標因爲我們忘記添加了
我們也將看到應用叫Messages Extension
爲了改變展示的名稱
我們需要進入我們的項目
點擊Messages Extension Target然後可以在這裏修改
現在我們只需看看我們的應用是什麼樣子
你可以看到我們有一個應用能提供貼圖
在粉紅背景色
這就是一個小例子了
有關你如何定製你的貼圖應用
現在讓我們回到幻燈片
來重述一下我們剛纔所講的
我們介紹了MSStickerBrowserViewController
這個ViewController將展示貼圖
在你的應用中使用MSStickerBrowserView
這個控制器遵守
MSStickerBrowserViewDataSource協議
這個協議會返回一個數字
與你的應用將要展示的貼圖相對應
以及給定的貼圖
我們還介紹了MSMessagesAppViewController
這個ViewController是你的主要類將要繼承的類
這個MSMessagesAppViewController處理回調
來自Messages應用
我們將分享更多的內容 在第二部分中
以及你的應用如何能處理這些回調
這就是一個小例子展示瞭如何定製一個貼圖應用
它只是改變了背景顏色如果我們還想進行更多的改變呢？
你的應用可以添加貼圖支持通過使用兩個類
MSStickerView和MSSticker
所以如果我們想創建一個應用能展示貼圖
以一種與MSStickerBrowserViewController不同的方法
我們就可以通過使用這兩個類來完成
在這個例子中我有一個應用
這個應用實際上就在使用UICollectionViewController
來展示貼圖
每一個UICollectionView的單元格都有一個MSStickerView
MSStickerView這個類將能提供
貼圖的拖拽釋放功能
進入短信息文本中
我們還可以看到這裏有一個Plus圖標
它並沒MSStickerView
點擊它就會擴展我們的應用
允許我們選擇一個貼圖並添加到我們的收藏中
還有要注意我們可以
改變我們的貼圖的展示形式
你的應用可以由
緊湊模式進入到擴展模式
你的用戶可以切換
通過點擊底部的人字形圖案
所以你的應用將需要能處理
處在緊湊模式和擴展模式
我將展示給大家如何處理這些回調
並創建一個這樣的應用
現在讓我們進入另一個演示
我將打開一個我已經準備好的應用
它叫Sticker Picker
我們把它放大
太棒了 我們現回到了MessagesViewController
再一次 這是我們的主要類
它繼承了MSMessagesAppViewController
我們展示了兩個視圖
UICollectionView它持有MSStickerViews
我們還有一個視圖來添加貼圖進入我們的應用
這兩個視圖將表現在
一個StickerPickerCollectionViewController中
以及在一個AddStickersViewController中
現在讓我們看一看StickerPickerCollectionViewController
StickerPickerCollectionViewController
繼承了UICollectionViewController
我們將操作的Item稱作CollectionViewItem
它還可以是AddSticker Item
或者可以是一個貼圖
現在讓我們繼續看看貼圖單元格
貼圖單元格中有一個MSStickerView
MSStickerView將有一個貼圖
並且 爲了處理你的動態貼圖的動畫
我們需要調用startAnimating和stopAnimating
在我們展示MSStickerView的時候
所以我們回到StickerPickerCollectionViewController
很棒 當我們創建ViewController時
創建我們所有的Item
我們將創建一個AddStickerItem
然後我們將加載所有的貼圖就像我們剛纔所做的一樣
返回collectionView中Item的數量
然後我們要創建貼圖單元格或Add Sticker 單元格
給一個Item與給定數字路徑對應
當創建貼圖單元格時我們想要
賦予stickerView的貼圖值
我們就這樣做了
我們已經將一個貼圖放到了stickerView中
並且 如我所提到的我們的貼圖可以是動態的
我們將需要調用啓動動畫和終止動畫
來控制這些動畫
當我們要展示我們的貼圖時我們想要
調用startAnimating我們再展示我們的貼圖時
我們將要調用stopAnimating
我們可以寫一個函數來檢查
貼圖是否是可動的
通過加載圖片文件URL並通過CG圖片源
統計幀數
如果有多於一幀
那麼我們就知道這是一個動態貼圖
所以我們就要實現這個方法
我們將檢查來看看
我們的貼圖單元格中的貼圖是否動態
如果是 那麼我們就調用startAnimating
當我們結束展示單元格時
我們就要檢查貼圖是否在動 如果是
我們就調用stopAnimating
太棒了 讓我們回到MessagesViewController
我們將實例化StickerPickerViewController
因爲我們需要在啓動應用時加載這個視圖
在viewDidLoad完成這個操作 然後展示
當用戶點擊Add圖標時
我們需要創建AddStickersViewController
然後我們就需要轉換到擴展模式
我們可以通過調用requestPresentationStyle來完成
這會告訴Messages應用
你的應用需要被擴展
你會收到一個來自Messages應用回調
一旦你完成轉換
在didTransitiontopresentationStyle中我們將收到回調
我們需要先檢查
我們是否有AddStickersViewController
如果是的話我們的展示風格是擴展的
我們就展示這個視圖
不然我們就展示另一個視圖用在緊湊模式下
在我們選擇一個貼圖後我們需要返回到緊湊模式
所以我們要再一次調用requestPresentationStyle
.compact
所以如果我們運行應用我們就可以看到真實情況
所以我現在要選擇Messages應用
作爲運行的應用
然後我們要啓動
我將要點擊App Drawer
我們將要點擊Sticker Picker
等待它加載好
太棒了 現在我們可以添加一個貼圖
我要選擇這個很可愛的大熊貓
我們可以看到它是動態的
然後我們就可以發送貼圖
重述一下我們剛纔所講的 我們首先介紹了
展示瞭如何創建一個貼圖應用使用UICollectionView
然後在每一個單元格中UICollectionView中
我們有個MSStickerView
MSStickerView允許我們拖拽釋放貼圖
進入編輯文本中它也有一個MSSticker
我們還展示瞭如何你可以從緊湊模式轉換到
擴展展示模式
我們還展示了你如何可以處理這些回調
來自Messages 應用
要記住你的用戶可以通過點擊人字形圖案來切換
所以在設計應用時記住這一點
Bhaskar講了我們使用的貼圖文件格式
創建Sticker Pack應用時
這些同樣的文件格式適用於創建一個定製貼圖應用
所以總結一下我們今天所講的
我們介紹了iMessage應用作爲一個平臺提供給各位開發者
這是一種新的與短信息交互的方法 很有趣且令人激動
我們還介紹了短信息框架以及如何創建Sticker Pack應用
通過短信息框架
展示如何創建Sticker Pack應用
使用Xcode 不用寫代碼
以及如何通過寫程序創建一個定製貼圖應用
在我們講話的第二部分中
我們將向大家展示如何創建一個應用
能允許你的應用發送可交互的短信息
如需更多信息請訪問網站
我們會有一個相關會話依舊在Presidio
週四下午1:40
很感謝大家
我們等不及看到你們的創造請一定要來我們的實驗室
接下來的會議過得愉快