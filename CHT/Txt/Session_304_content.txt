構建商業和教育應用的最佳實踐
下午好
我叫David O'Rourke
謝謝大家
我們本週的會議已經進行到了一半
大家感覺怎麼樣？
沒浪費大家的時間吧？
我在上臺前有人跟我說了話所以就沒有壓力
不過很明顯你們在這個展示上點了太多次的收藏
所以
非常感謝希望值得大家的每分每秒
也確實如此 我們在這上面投入了很多功夫
我想講一下這次展示將要說的內容
我們會涉及到最佳實踐
這次會議對大家來說會是很容易的
你可以把筆記本放下來這裏不會有很多的示例代碼
本次會議是給你啓發
像是在你未來應用的哪方面投入
讓你的應用程序擁有更多的銷售以及適用人羣
目標市場越多越好
本次展示中我們注重兩個市場
那就是商業和教育
透露一下 我們會講很多關於Shared iPad的內容
所以開始吧我們進入日程
我們會講講現代應用設計實踐
客戶可以期待什麼樣的內容
之後我們會再快速概述一下Shared iPad
它在後臺是如何工作的？對你的應用會有怎樣影響？
你需要採用哪種技術？
這是我的第三點
我們會推薦一些特定技術
幸運的是對你來說大多數技術
已經在本次會議之前說了或在本週晚些時候纔講
所以你能以本次演講爲起點
直接去聽那些高大上的細節
如果你受到啓發去修改你的應用
這裏有新的機會去增強你的應用
其中一個我很期待是在展示的結尾
我認爲你也會跟我一樣因爲它也會
給你巨大的機會將應用用在你未曾預料過的方面
我們來談談讓你的應用程序現代化
這差不多是客戶的最基本期待
我們跟很多客戶談過他們給了很多反饋
很奇怪的事是他們會過來說
爲什麼某某應用沒有使用這個Apple技術？
這不是深入的見解不過我只想提醒大家
你要跟上潮流保持最新
因爲客戶會從其他有技術的
開發者那裏下載其他的應用而且這會帶來一點不連續
或者不好的比較
如果你的應用沒在使用Apple提供的最新最棒技術
我認爲我不需要跟在座的任何開發者講
這就是爲何你們參加 WWDC 來探尋新功能
不過作爲一般生態系統問題
保持最新對你和客戶都有利
而且這是你客戶的期待
一些示例技術這決不是
大家可採用技術的完成列表
自動佈局
這還是一項比較新的技術已經出現在數個iOS版本中了
但這真會幫助你做出通用的應用二進制文件 可以在iPhone
iPad上使用 而且很有助於佈局旋轉
如果投入時間自動佈局會替你解決很多的事情
這還有助於從左到右文字
我以前管理桌面通訊錄然後我們轉移到自動佈局
我們免費實現了從左到右書寫這是長期的問題
或從右到左 或不同的語言方向 免費做到的
這在桌面通訊錄應用上是個很長期的請求
自動佈局在內部幫助了我們 它也會幫助你們的
無障礙性
我在午飯之前跟之前的同事談過話
確保你的應用是無障礙的
這會幫助那些原本無法使用你的應用的人
當他們知道終於能使用應用時他們會相當有感觸的
因爲你將應用提供給那些人
在有無障礙性之前是無法使用這個應用的
本週晚些時候會有一些優秀的無障礙實驗室
如果你想深入研究
Swift
這是最新 最安全最快速的運行時
如果着眼於Swift思索如何採用Swift
本週請到Swift實驗室我相信你會爲之震撼
對這個語言讓我驚歎真的很震撼
我不需要告訴在座的人去採用Swift
不過這是另一項新技術
你應該在上面投入一些
AirPlay 尤其在教育和商業環境
會議室主持人後面的大屏幕
人們想分享內容
如果你的應用有空間採用AirPlay 那就這樣做
如果使用AirPlay 你可以讓你的應用看起來更有趣
當你在會議室進行分享時能夠隱藏一些屏幕上的元素
考慮AirPlay時 你要將大屏幕作爲應用程序的目的地
你可能會想稍微修改一下UI
或者有一種模式讓用戶添加內容
或者你就直接投影AirPlay
最後是3D Touch
這可能是最新的技術最新的硬件
會帶來非常多的機會我每天就使用3D Touch
真的讓OS變得更迅速更快捷
無論什麼時候我進入應用用力按 然後沒有
什麼東西在我用力按的時候出現
這就有點不連續了會稍微擾亂我的節奏
所以要留心
我想強調一下這些不是完整的技術集合
只是一些最新技術的例子
有些應用會在這上面落後然後這會影響
你的應用在商業和教育上的營銷和銷售
所以我們談談
一項與我有很大關係的功能我與一支優秀團隊
共同創建的 在iOS 9.3中推出了Shared iPad
這對於開發者和教育領域來說這是極爲重大的改變
原因是我們可以在學校中部署最好的移動平臺iPad
現在可以有多名學生分享一個iPad
在一整天的不同課程中
這給在座的開發者帶來了巨大的市場
因爲若你能讓應用在Shared iPad環境運行更好
你的應用會大量地在學校中授權使用
多到你之前無法想象的程度
我們談談Shared iPad
這是在iOS 9.3上推出將會繼續在iOS 10中支持
其主要目標是讓學校購買推車
多少人見過iPad推車？
有點炫酷 我在18個月之前第一次見過一個
他們將60個iPads裝在小推車中
推進教室 學生將iPad拿出來 使完 放回去
之後推車又去了另一間不同教室
iOS 9.3之前版本沒的功能
就是讓學生將個性化的體驗
帶到每個iPad上
這可通過Shared iPad實現且做得更加有效
學校買更少的硬件並將更多的錢用於軟件
我想重複一遍他們可以花更多的錢
在你的軟件上 因爲他們從我們這裏買更少的硬件
所以
你的登錄方法是使用新的AppleID叫Managed ID
這是由學校所管理的
他們設置自己的用戶名單他們將設備綁定到自己的組織上
只有他們的賬戶可以登錄iPad
非常炫酷
如果在我的會議之前你沒看Todd的會議
我推薦你通過視頻源回顧一下
他講了很多ManagedApple ID的內容
最後
本次展示的主旨可能是
Shared iPad使用環境需要數據存在雲端
我們有推車大家都明白推車嗎？
學生在週一將推車推出來拿出iPad 使用iPad
而在週二 當推出推車時他們拿出的可能不是相同的iPad
如果他們的數據沒有通過你的應用推送到雲端
他們不會獲得與週一相同的體驗
他們在週二會有新的iPad體驗而這會讓他們感到沮喪
所以我們會談很多Apple所提供的技術
及Shared iPad的工作原理
讓我給你簡短概述一下
我推薦你回顧Todd的演講
有很多與此有關的現場演示
我有一些靜止幻燈片顯示着登錄的樣子
所以學生將iPad從推車上拿出 會看到年級
我將演示的學生是Mia她是第四
在底部的第四排
過去幾週中與Mia相處了很長時間
將這個幻燈片做好所以Mia按下她的圖片
Mia寫上密碼
當她完成填入正確的密碼之後
iPad就在準備
如果她之前使過這個iPad這個屏幕會
更快地出現
如果她第一次使用這個iPad
這可能會時間更長因爲要從雲端
下載數據來做好準備
當完成從雲端下載數據或者初始設置數據
Mia會在整節課上使用iPad
她使用Pages和Garage Band
而且整節課她將iPad作爲自己的在使用
當Mia用完了
Mia登出
iPad會用這個機會將數據推送到雲端
發送任何在課程中沒有推送到雲端的數據
我們會稍微談談能做到那樣的Apple技術
Mia的所有數據必須在雲端才能讓這一切運作
Mia使用的iPad可能是不同班級傳過來的
我的孩子一天有六節課
他們可能先是科學然後是數學
可能每節課都會配有不同的推車
因此他們的數據需要存儲到雲端
這樣每個iPad纔會有用
即使他們使用相同的iPad
在全天的課程中或是整週的課程中
數據可能會被iPad刪除因爲它可能要將用戶
從iPad刪除給新用戶留出空間
在整週的課程中登錄使用
所以iOS提供
四項你可以採用的核心技術我會在之後展示
我會告訴你第五項技術
你應該採用如果你不使用
任何iOS Cloud技術
不過我們首先
先回顧iPad的預期
所以
有很多Apple內部以及此次會議的工程師問我
我們跟很多人談過所以什麼是Shared iPad？
直白簡單來說用戶切換
我們不允許多個用戶同時登陸到iPad上
在任何時候都只能有一個活動的用戶會話
如果一個用戶要登入iPad那另一個用戶就要登出
所以就是用戶切換
這對應用開發者來說意味什麼？
你會看到就是一次性設備
你不知道處在Shared iPad環境中
你不需要知道
對於應用開發者來說沒有什麼變化
你不需要加入其中不需要做任何定製
只是將你的數據移入雲端
註銷
這就等同於
將iPad關機
你的應用關掉了沒有在前臺運行
這就像未使用分享的iPad
當用戶將iPad關上
如果應用運行正常
在電力循環之間
你的應用會在用戶登錄和登出時在Shared iPad環境中運行良好
用戶數據緩存在設備上
在內部 我們就跟大家講
這就像易失性緩存
當用戶登錄後就不是易失性了
而是在用戶登出之後
所以數據可能在任何時候從iPad上刪除
不過當你登錄上了這就是一次性iPad
數據不會從你眼皮底下消失
而且緩存有一些很明顯的性能上優勢
離線也能工作
我們預計這些iPad會在戶外教學中用上
而且當iOS認爲必要時數據會被iOS清除掉
我們希望你將數據移動到雲端 這樣Mia
在全天中使用不同iPad的時候
一整週使用不同iPad時
在所有這些不同的設備上這一學年的體驗都是一致
我們提供的iCloud技術
或者我們提供的四項關鍵技術分別是CloudKit
iCloud Drive
NSUbiquitousKeyStore
KeyChain
作爲附屬的NSURLSession
我們會在稍後的展示中談談它在名單上的原因
你確信Shared iPad的市場十分巨大
應該何時傳輸數據應該何時去做
這裏的目標是你將數據傳輸到雲端
當應用還在前臺運行時
隨着Mia作出變更你就將變更寫入CloudKit
更新你的雲端文檔
做任何合適的事情
你可以在登出過程中同步數據
且你應該在收到應用程序前同步數據
退出活動事件
不過
一般我們不想將所有的數據同步
放在登出進行
這會使登出耗時過長
所以你應該時刻同步你的應用
不應該將數據打包起來之後再同步
因爲如果Mia登出了那就沒有之後了
如果你採用iOS技術那這是可以的 例如CloudKit
Cloud DriveNSUbiquitousKeyStore KeyChain
Mia的數據在她沒有登入時就可以同步
不過
我們希望她能幹淨退出沒有任何廢數據
我們來稍微談談CloudKit
我想CloudKit是在iOS 8上推出的 記錯的話請指出來
你可以同步數據這是自動處理好的
如果你採用CloudKit一些非常
重要的東西就是LongLivedOperations
這些是CKOperation類別的子類別
開發者資料的鏈接在屏幕上
這很重要的若你想讓CloudKit同步數據
當應用不在前臺運行時
我們有過這個功能而且不是Shared iPad上特有的
不過我們利用了該功能
使其還成爲同步數據所使用的機制
當Mia未在設備上登錄時
所以若你將CloudKit文檔移到LongLivedOperations
你可以使用CloudKit同步數據即使你的應用未在運行
或在前臺運行或當Mia已經登出之後
所以
如果你要應用CloudKit而且你要使用它
我極力推薦你投入進去並與CloudKit的工程師協作
在這一週的時間裏來瞭解LongLivedOperations
採用LongLivedOperations並讓你的應用程序
兼容LongLivedOperations
雲端文件也許是最易採用的API
對於基於文檔的應用程序例如Keynote或Pages
你需要做的很少每個Managed ID都有iCloud Drive
iCloud Drive自動同步
如果你已經是基於文檔的應用程序
你就可以踏入教育領域了你要做的一切都已經完成了
Mia會在你的應用上擁有所有文檔
在每次設備訪問時都可使用
簡單容易
如果你是基於文檔的應用程序那這是首選的做法
這兩項技術都是按需同步這是非常重要的
Mia可能會有幾GB的數據存儲在CloudKit中
不過她只會將她所訪問的數據下載到設備上
所以設備不需要下載Mia所有的2GB雲端數據
才能讓她使用你的應用如果你的應用只訪問
存儲在CloudKit中幾個MB大小的數據
只有你的應用數據會被下載到設備上
當你的應用第一次在那個設備上啓動時
這是非常有效的如果你從大規模考慮這件事
美國的教室平均有30到40名學生
你有30臺iPad要獲取數據
如果全部都在登錄時獲取完整的2GB數據
這對大多數學校的網絡連接來說都很難應付
所以這是一些最佳的技術
它們只會緩存你使用的數據
以及本地存儲的數據
它們是世界頂級的雲端技術
你可以整合到你的應用中並讓應用打入這些重要的市場
CloudKit還適合大型數據集
我不知道這個大的定義是什麼
我推薦與CloudKit那些人協作
看看你的數據集是不是太大
我認爲他們不會推薦使用iMovie
可能吧
可能對於更小的數據集會沒問題
我特別從CloudKit主管工程師那裏得到了這句話
這個會與下個幻燈片中的技術形成對照
就是NSUbiquitousKeyValueStore
這是專門用於更小的數據集
除非你在做視頻編輯應用程序
你不需擔心放入CloudKit中的數據集大小
這不意味着你可以無拘無束
爲性能做一些傻事
不過大多數應用程序會存儲的數據
是大小合理的CloudKit完全能夠勝任
我們來談談NSUbiquitousKeyValueStore
你需要有授權才能使用它
它是NSUserDefaults的直接替代
若你已在使用NSUserDefaults
你已經準備好了 很容易過渡到NSUbiquitousKeyValueStore
其中 你的數據是存儲在雲端的
應用啓動 將鍵值對保存在NSUbiquitousKeyStore
應用退出 重新啓動數據從雲端返回
在不同設備上的應用會得到基本上
相同NSUserDefaults包當應用在其他設備上啓用時
它以NSDictionary爲原型
跟CloudKit工程團隊談話
他們最初做了NSUbiquitousKeyStore之後轉移到CloudKit
請注意只允許較小載荷
這個數據不是按需獲取的是在登錄時獲取
我們預期的是用於容量較小的數據集
用在應用程序內部這更適合NSDictionary
若你放入NSDictionary放入NSUbiquitousKeyStore
若太大無法放入一個NSDictionary
你可能想將其放入CloudKit
我之前提過 數據獲取是賬戶登錄的一部分
這會出現副作用
我們會在稍後的展示中談談
這也會讓你的應用由應用管理進行管理
最簡單的總結就是談談大規模部署應用程序
如果我是IT管理員 將在一家世界500強公司中部署1000臺iPad
我希望你的應用在默認環境下設置好
在我部署的第一天他們通過應用管理進行
我們會在稍後的展示中談的
你可以將初始應用狀態通過
NSUbiquitousKeyValueStores發佈到所有的iPad上
我想說幾個使用案例關於NSUbiquitousKeyStoreValue
或NSUbiquitousKeyValueStore這真是拗口
我們來想想Mia訪問一個iPad
在新學年的第一天
她啓用你的應用應用有一些設置數據
你要挑選她最喜歡的顏色
可能讓她挑選頭像的照片
你不希望在她每次使用iPad時都遇到這樣
整個學年都是
NSUbiquitousKeyValueStore的理想使用案例
是保存應用的初始設置數據
這樣當你的應用在不同的iPad上運行時
Mia在你應用上的
初始偏好設置就保存於NSUbiquitousKeyValueStore
而且她不會在每次使用新iPad時看到應用程序設置
我們Apple內部的使用案例是
Stocks和Weather的團隊告訴我
我們用NSUbiquitousKeyValueStore來保存滾動欄
列表 然後我們還用它存儲你在Weather中保存的所有位置
Keychain
有多少人在自己的應用程序中使用Keychain？
不少
我有極好消息告訴大家沒你們什麼事了
什麼都不需做 接下來幾分鐘你可以查看一下郵件
你什麼不需要做你已經萬事俱備了
每個Managed Apple ID都有一個Keychain
而且那個Keychain與他們登錄的每個設備同步
很明顯Keychain是用於保護用戶數據的
有相同的API相同的使用約定
事實上 作爲應用
你無法分辨出Shared iPad Keychain與
普通iCloud Keychain的不同
相同API相同使用模式
有幾點事
有些人在Keychain上做一些少見的僅應用商店設備可用數據
在Shared iPad Keychain上面沒有僅設備可用數據
而且我們推薦你只按每個用戶保存
你必須設置可輸出標記或者分享標記
否則你的數據不會分享過去
不過你應該將用戶憑證
或者用戶敏感信息保存在Keychain中
你不應該使用Keychain保存批量數據
與NSUbiquitousKeyValueStore的規則差不多相同
不要用它保存批量數據
如果你想安全保存批量數據請到實驗室來
我們可以建議不同的做法來解決這個問題
不過 如果你已經在使用Keychain 那很好
如果你的應用有用戶敏感信息需要用密碼保護
或比放在數據存儲中更安全的方式
例如CloudKit或NSUbiquitousKeyValueStore
將其放入Keychain中是易於採用的
這讓數據安全並且便攜性極強
最後 關於可以採用的雲端技術
在座有多少人已經有自己的雲端技術了？
用的不是CloudKit我看到了不少 非常好
你要確保你的代碼
或你使用的代碼使用NSURLsession
NSURLsession是iOS上進行所有聯網活動的首選
你應該使用它因爲它的本領非常多
我在Apple幹了很久具體多久我就不說了
我認爲比之前會議上來的Todd要更久一些
它能爲你做非常多事情
你甚至都沒有意識到
它用IPv6 進行所有的度量 控制以及覈算
進行數據節流無縫網絡過渡
這一點是我在做幻燈片時才瞭解到的
Cisco Fast Lane支持有多少人知道這是什麼？
這是關於服務質量的能允許
網絡管理員劃分網絡流量的優先級
若你的應用沒在使用NSURLsession 你必須親自去做
這就要你花時間去學習它
而NSURLsession已做好
若你不使用CloudKit或iCloud Drive
不用Keychain 而且不用NSUbiquitousKeyValueStore
但是你就是想讓你的應用進入雲端
要確保你使用或編寫的框架
使用NSURLsession進行所有的聯網
然後你要選取最佳種類的網絡行爲
要穩健 有彈性
所以
像是
CloudKit中的LongLivedOperations
使用NSURLsession的另一個優勢是...
我們回到用戶切換你的應用沒在前臺運行
NSURLsession流程不運行除非你將它們標記成後臺
或者採用後臺配置
所以你有自己的雲端技術你目前沒用NSURLsession
不過你將過渡到NSURLsession
當你這麼做時
你可以查看開發者資料上面寫着
如何讓NSURLsession數據在後臺運行
這對於應用開發者來說有兩個優點
優點一你的數據可以繼續同步
到你專有的雲端存儲
當你應用沒在前臺運行時
優點二
你的數據會在Mia登出後甚至不再你平臺上活動時同步
如果你沒在使用NSURLsession 開始用吧
你開始使用NSURLsession時
檢查後臺使用確保你的應用可以同步數據
當應用沒在前臺運行或者用戶沒在活動時
我們回顧一下
現在我應該讓你確信 基於雲端的數據對你的應用至關重要
在iOS 9.3中推出的新Shared iPad環境中
這是世界範圍的大市場我們知道它在澳大利亞使用
我們知道它在美國使用
正在登陸到歐洲
這允許ManagedApple ID在設備之間移動
我們想提供儘可能無縫的體驗
而且你們應用開發者要發揮好作用
將你們的應用數據移到雲端上
Apple認爲 而且我相信我們提供完整的解決方案
如果你目前還沒有用上這一些
沒必要再等下去了
iOS擁有你需要的全部基礎技術將你的數據移動到雲端
如果你覺着有問題請到實驗室來 我們會幫你
如果你自己做聯網任何種類的
無論是否基於雲端請使用NSURLsession
採用這些技術的話你會獲得大量的優勢
你會得到一大批的功能
不過我們不談論未來功能像是本次會議中的Pod
不過對NSURLsession的研究並未結束
我們需要更多的聯網這都會添加進去的
而且已經在上面的應用就會直接跟上潮流
迎接下一輪的NSURLsession功能提升
除了雲端之外
在Shared iPad上還有其他需你考慮的事
這更多是關於轉變你的思維
而不是你要採用的特定技術
首先 用戶之間的賬戶數據分隔
這應該很明顯有些人可能會想“這還用說”
不過我想談一談因爲一些應用
iOS 9.3是首個支持用戶分享的iOS版本
這代表之前有九個iOS版本不支持
所以一些應用需要支持用戶分享
他們基本上是在應用中編寫了自己的用戶選取器
所以首先我們有真正的數據分離
Mia無法看到Liam的數據Liam無法看到Mia的數據
當她們在設備上活動時
因此 應用開發者可以使用這個工具
這樣就不再需要有自己的多用戶選擇器了
這裏有一些應用程序當你啓動時
它會問你是Mia還是Liam然後你能設置多個用戶數據
那個時代已經過去
如果你做多用戶應用
你的應用應在單個設備上以用戶分享模式運行
你可以免費得到數據分離並且撤掉那些
用於多用戶管理的代碼
這會避免Liam和Mia之間的數據混合
這有時候會是潛在的隱私問題
如果兩名不同的學生可以看到對方的數據
Shared iPad有定額
Todd有一個精彩地動畫我忘記用在展示中了 抱歉
iPad會實施定額
在iPad上有兩種定額類型
登錄在上面的賬戶數量
六個 八個還是十個的
然後是每個賬號可以保存的數據量
爲什麼這會影響到你們開發者？
你會在你用的任何文件系統操作中見到新錯誤
這會有EDQUOT錯誤作爲ENOSPC處理就行
你不會佔滿容量而會得到定額錯誤
如果你的應用擁有恢復機制 你需要在
當你沒有磁盤空間時用同樣方法處理
這是新的錯誤代碼你可能會經常見到
當在Shared iPad環境中運行時
另一項非常有趣的技術
就是Shared iPad中的On-Demand Resources
如果你的應用有On-Demand Resources
或者有尚未轉移到AppleOn-Demand Resources上的資源
不過你按需下載
如果你將它們下載到用戶目錄中
在有八個用戶的iPad上
你現在就將那個應用資源複製了八次
除此之外你將資源下載了八次
這會給學校網絡帶來負擔將它再乘上30臺iPad
現在你就下載240次了
所以你真的應該考慮使用On-Demand Resources
如果你的應用轉移到On-Demand Resources
你在每個設備上只會下載一次On-Demand Resource
這會下載在設備上的當前和將來的所有用戶
更重要的是不會被刪除或清除
當某個用戶賬戶被操作系統清除掉
來爲新用戶留出空間
所有如果你有大量資源或者你有恰好的資源
或者你給應用瘦身
然後你之後下載這些資源
採用ODR 你就會在iPad上獲得你所需的資源
就在你需要的時候然後你會最小程度地影響
那個iPad上的本地存儲和用戶定額
以及學校或機構的網絡
這是開發者資料上的截圖
關於On-Demand Resources
我在幻燈片的結尾會有不過先預覽一下
我認爲週四是深入探討On-Demand Resources
極力推薦你參加那場演講如果你有大量的資源
需要從應用捆綁包中移走
而不是下載到用戶的目錄中
遠程通知
iPad的情況以及分享環境
與之前相比稍微不同
但改變不大
對於單用戶iPad通知的作用是一樣的
所以Shared iPad是如何工作的？
就像單用戶iPad一樣
不過登錄像是給iPad開機
而登出像是給iPad關機
在iPad登錄之前你是不會得到通知的
而且當iPad登出或者關機時你不會得到通知
這對登錄和登出是一樣的
所以這個就相當於你的應用在設備上打開或關閉
當設備開機或者關機時
只有當你的應用在每個設備上至少運行一次 那遠程通知纔會準備好
如果Mia只是第一次接觸這個設備
而你的應用依靠推送通知或者遠程通知發揮作用
除非她在那個設備上至少運行一次
她是不會看到通知的
這就像非Shared iPad但我認爲會出現得
更頻繁 因爲現在Mia能更容易地更換設備
而且註銷就像關機我之前說了
你不會收到遠程通知
爲什麼我們講它用了一整個幻燈片？
一些應用可能不會如你所想那樣
順滑流暢地運作如果沒有推送通知的話
如果你應用中的工作流程或者用戶案例十分依賴於
遠程通知來觸發某些事件之類的
好好考慮一下評估你的應用
看看你能做出什麼改變
因爲隨着Mia在不同設備間切換
她是不會收到推送通知的除非她將應用運行一次
如果你有什麼可以幫助她的
或甚至給管理員發送文件
讓他們制定應用的部署決定這會是非常有幫助的
所以檢查你的遠程通知使用
並想想你的應用的運行情況如果Mia一直使用
一個iPad一整週都在使用
然後她突然得到新的iPad
你的應用在她第一次啓動之前是否有同樣的效果
Managed Apple ID
這是新一類的Apple ID是由機構設置而成
該機構控制名字密碼
不過這裏還有一組不同的能力
與託管iPad有關
最重要的能力是沒有商務功能
極少的學校會想讓學生
當在部署應用的時候用他們的信用卡購買音樂
所以我們關閉了商務應用
商務之類的東西
對於一些開發者的影響是我看到一些應用程序
要付費才能使用功能
或者將功能放入應用內購買中
學校不會想授權那樣的應用程序
他們會部署的環境是
每個Apple ID都沒任何商務功能
沒有信用卡綁定賬戶
你的應用無法在那種環境下運作
我不是說你應該在一般的應用上也這樣做
你可能需要爲授權的學校做另一款應用
不需要應用內購買就能完全運作的
你應該合適地調整你的授權以及定價
不過學校部署的應用本身應該是功能齊全的
所以不要等商務活動的發生
在你的應用完全運作之前
查看你需要的特定框架和功能
不要假設因爲他們有iCloud身份
他們就什麼都有了
我們梳理過操作系統哪裏禁用了
那些框架會返回適當的錯誤
一個具體例子是StoreKit
若你以Managed Apple ID登錄然後試着使用StoreKit
你會碰到適當的錯誤寫着StoreKit離線或不可用
所以不要假設都有或是都沒有
如果有這個那就有所有其他服務了
去檢查你所需要的每個框架都在不在
如果那些框架返回來錯誤
你的應用應該怎麼辦
然後仔細爲那個使用案例考慮
一般來說 你可以順着你一直遵循的現有實踐
如果你已經兼容VPPVolume Purchase Plan
以及基於設備的授權如果你的應用符合VPP授權
以及基於設備的部署
那你就基本上大功告成或已經大功告成了
對於那些不知道VPP和基於設備授權的開發者
到實驗室與我們合作我們能讓你瞭解最新情況
這會讓你的應用更便於上手併爲你打開新的市場
最後簡短感謝一下網頁開發者
我們投入很多心思這裏有Keychain
我喜歡Safari AutoFill功能 可以保存密碼
同步在iCloud Keychain中這會在部署時非常有用
不過我們在想
Mia登錄到Shared iPad
然後登錄到個人賬戶
我們不想將那個密碼保存在存儲Keychain的地方
所以我們讓學校有能力列出特定的網站
將其密碼保存在Keychain中
考慮到轉移到原生應用這是絕對是最佳的解決方案
這是我們的客戶和你們的客戶所期待的解決方案
然而 如果你還是基於網絡的開發者 並維持基於網絡內容
最起碼 要有一些資料更新
你可能要提醒你的客戶將你的域名添加到
Safari域名白名單中
這樣在學生第一次設置你的網站時
Safari會提醒他們保存密碼
然後就保存到他們的ManagedApple ID Keychain
當他們下次訪問不同的iPad
並登陸你的網站那他們就不需要再次
提供他們的憑證
如果不將你的網站或域名加入域名白名單上
Mia就要在每次遇到新iPad時被迫登陸
對於Mia和學校來說會是令人沮喪的體驗
最起碼 要有資料更新
最多 你可以把它當做提醒你是時候考慮
將應用轉變成平臺原生的了
我談了Shared iPad
我談了商業
我談了這會開啓的新市場
不過我還想指出
這些不是在Shared iPad上獨有的
我的主張是
雖然Shared iPad需要基於雲端的數據才能正常運行
將應用轉移到雲端會讓所有用戶獲益
我的妻子兩週前把她的iPad摔了
我們拿到Genius Bar讓他們修好了
她得到了新iPad她開始設置她的應用
那些沒有云端數據的應用沒有重新安裝到應用上面
她沒有時間
而且這也讓他們很容易地更換設備
這些你投入的改變
不只是爲Shared iPad投入
這會將更好體驗帶給你的所有用戶
所有擁有云端數據的用戶
所有擁有iCloud文檔的用戶所有擁有Keychain的用戶
所有擁有NSUbiquitousKeyStore的用戶
將你的應用程序數據轉移到雲端
會更加有利於你的整個生態系統
除此之外 這會更加適合用於商業和教育
所以雲端也受商業青睞他們更換設備
更換員工將新設備
在週一和週二都發放給不同員工
如果你可以讓賬戶設置更加快速
然後讓那個員工的數據
上線並很快能在那個iPad上獲取到
公司會將你的應用視爲部署的最佳之選
所以我的論點是雲端是長期的趨勢
如果你還沒有考慮將你的數據移動到雲端中
可能今年你的這個想法就再也站不住腳了
如果你已經使用雲端檢查你的使用情況
確保一切都運行正常
因爲我們憑藉Shared iPad爲你打開了巨大新市場
如果你都做好了
你將用戶安全數據轉移到Keychain中
你使用了CloudKit存儲批量數據
因爲你沒使用NSUbiquitousKeyStore去保存
你用了NSUbiquitousKeyStore存儲應用的初始設置
你將所有的自定義聯網轉移至NSURLsession
你調出後臺任務這樣當應用
不在前臺時也會運行
現在你需要測試
確保一切都正常運作這裏有一些高級別推薦
關於如何測試應用
這裏基本上有三種測試方法最後歸結成
相同的方法不過我們會一個個講
兩臺設備
iPad A和iPad B
你在iPad A上安裝應用設置iCloud身份
運行應用
經過保存數據的週期
可能你是股票應用你保存滾動欄信息
做完所有這些事情
等待同步
啓動iPad B
用相同賬戶登錄
啓動應用程序 看看你的數據會不會出現在iPad B上
如果沒有 啓用調試週期
如果有 那太好了大功告成
這會允許你...
基本上 兩臺不同設備擁有相同的iCloud身份
就足夠測試了
來驗證你的應用能在Shared iPad環境中運行
如果你沒有兩臺設備
或者你懶得在兩臺設備上做
你可以做同樣的測試通過添加你的應用
設置所有的數據等待應用同步數據
刪除應用然後重新將應用安裝回去
這會將所有的數據下載回來
NSUbiquitousKeyValueStore
CloudKit 雲端文檔所有的數據都會回來
如果所有的數據都回來了
你就可以在方框上打上對勾
寫着你已經將數據轉移到雲端了
在極端情況下
在座的大多數人會意識到這只是變化一下
如果你真的想知道你的確做好了
你可以在測試過程之間擦除iPad
我不認爲這是必要的不過我只是想寫得完整
這種測試差不多就很嚴峻了
設置你的iPad在上面放上大量數據
相信你的雲端會奏效
相信Apple保存了那些數據將設備擦除乾淨
再從頭設置是否所有的數據會回來？
這就妥了
如果你的應用可以通過那樣的測試
你就成功實現Shared iPad的案例了
並且你就會給客戶提供更好的體驗
驗證應用的所有功能確認沒有數據丟失
確認離線有效所以讓iPad進入飛行模式
然後驗證用戶CloudKit
之後當你從飛行模式退出後所有的數據會同步
驗證你的應用不會再次出現設置屏幕
非常簡單的測試
安裝應用 通過設置屏幕刪除 重新啓動
設置屏幕出現了嗎？這還沒完
測試很重要轉移到雲端不可小視
一旦出現了你就會對結果非常滿意的
如果你想要更多的幫助或者協助
會議結束之後會有實驗室
我們會在那裏爲你回答問題
這有一個請求
很多都是來自內部開發者的
登出實際上會試着將每個人的應用
進行有序關機
如果你溢出UI後臺任務登出就無法完成
這會讓人很不爽
Liam無法登入直到Mia的登出會話結束
如果你溢出UI後臺任務
你的應用無法終止它終究會超時的
終究會被關閉
但這對誰都不好
確保你沒有溢出UI後臺任務
因爲這會阻擋登出
所以這就是你需要採用的技術
你需要作出的更改
所有改變讓Shared iPad和商業使用案例有更好體驗
如果你想在那些環境中有用這些改變是最低要求
你要做的工作
對於消費者使用案例也是有用的
好消息是這種投入
不僅是爲了商業和教育這還是爲了消費者使用案例
這會成爲你的應用程序的基線
你現在有機會超越最低要求
將你的數據放入雲端然後你真的可以讓你的應用
成爲世界頂級的首選應用
對潛在的授權人來說
通過超越採用雲端
並採用今年的一些更新的技術
第一項最令人激動的技術...
本次會議有多少人之前聽了Todd的演講？
很好 人數不少那個Classroom應用
最令人激動的應用之一
聽起來有點傻不過作爲“神”的感覺真酷
坐在這裏用着Classroom應用通過iPad控制整個實驗室
真的是非常強大的
其中一項在Classroom應用中
利用的關鍵技術就是通用鏈接
通用鏈接不是iOS 9.3的新特性而是在iOS 9上推出的
它提供一項功能允許你將外部鏈接
分享回你設備上的應用
它還允許共享和查找
在你設備上的應用裏
採用通用鏈接會有巨大的優勢
今年的新功能是
我們基於通用鏈接作爲基本的瞭解
有許多的應用支持它
通用鏈接是其中一項關鍵功能
使用在Classroom中
在課堂的情境下引導應用 控制應用
若你的應用支持通用鏈接
世界各地的老師都能斷定你的應用是世界上最酷的
而且她可以把你的應用結合到她的課程中
在課程中她就會與Classroom應用一同使用你的應用
這會讓你的應用成爲世界一流
是App Store上最受歡迎的應用
用於學校授權
若你無法使用通用鏈接 這會更難
讓老師把你的應用結合到他們的課程中
且更難與Classroom應用一起用
因此 對你來說這是很好的機會去驚喜
你的客戶 因爲你的應用在課堂的情境下效果非常好
關鍵是通用鏈接如雲端技術
無論是不是在共享使用案例的環境下 這都對你的應用有益
但這裏有更多的證明
在這些核心技術上累積
讓你的應用盡可能的有用
iOS 9.3.2的另一項新功能
一些應用開發者做自動評估應用
學生用這些應用進行標準測試或評估
他們進入全屏模式 然後鎖定
我們做一些改變使其更加無障礙
最大的變化是你現在可以進入自動評估應用
不需在受監督的iPad上面
你會得到授權你可以請求
尤其是現在你可以調用API
來請求不同的鍵盤功能
你可能不想讓允許自動校正的拼寫應用
出現在學生的拼寫測試評估中
現在應用可以控制它
它們可以要求授權
更重要的是
這不再只侷限於
受監督的iPad這可以在任何iPad上運行
所以如果你是基於評估的應用程序
或者考慮成爲基於評估的應用程序
iOS 9.3.2爲你開創了更多機會
來實驗室這裏我們可以給你更多細節
不過那是iOS 9.3.2的一部分
託管應用配置
這是在iOS 7上推出的
它的作用是允許管理員
將初始應用設置發送給成千上百
或者上萬個的iPad
所以每個應用都是以初始配置啓動
這非常容易採用
只是NSUserdefaults裏面的一個附加鍵
如果你看到那個鍵它指向
開發者所控制的特定應用字典
設置這些東西的管理員
會爲你的應用提供默認的字典
問題是MDM供應商可以選擇不同方式
發送此信息 配置它然後將其打包
所以今年的新情況是這裏有一個社區
不隸屬於Apple不過我們參與其中
所有不同的MDM
移動設備管理服務器供應商都在給有效負載設立標準
標準化工作都記錄在這個屏幕上顯示的URL上了
最大的優勢是你現在可以有單個的應用
支持多個MDM供應商
當我在給這次展示做研究時
在過去的18個月裏我是初到設備管理領域
我驚奇的發現事情就是如此
現在App Store中有一個應用 就是今天
我們不是在瞎編有這麼多的SKU
他們沒使用自動佈局
這也是爲何它們在iPhone和iPad應用上有不同屏幕
不過你看到的六個你看到
六個中的每個圖標都代表不同的MDM服務器
他們都必須支持
你可以想象到對他們來說維護就像是噩夢
通過轉移到新應用上託管應用聯盟
他們應該能把應用轉變成這樣
他們可以有支持所有MDM供應商iPhone版本
他們還可以有支持所有MDM的iPad版本
所以單是這個就是巨大的優勢
若它們轉移到自動佈局
使用Apple的所有最新技術
他們應該能做到這樣
在App Store中只有一個SKU
支持所有不同的屏幕尺寸
而且也可以在所有主要的MDM服務器供應商那裏託管
如果你想要進入這個市場而且你想要你的應用託管
通過應用程序管理深入瞭解新的聯盟
與他們合作學習採用他們的成果
總之
與Shared iPad一起
我希望能留下的信息是
無論你想打入什麼市場iOS生態系統是多元的
充滿活力 有利可圖
對所有人開放
但要求也非常高
客戶會期望很多
他們期望自動佈局期望有無障礙性
他們期望你使用Swift他們要AirPlay和3D Touch
而今年就在這裏SiriKit
這是另一項技術
你的應用通過Siri可以做出革命性的事情
若在教育商業環境下採用SiriKit
讓你的應用保持鮮活充滿活力
採用雲端技術
你做的是讓你的應用爲消費者提供更好體驗
更好地用於商業和機構領域
尤其是教育
我感謝大家抽出時間
我很享受與大家交談我也很樂意回答問題
之後在實驗室中可以回答
那裏有我的同事我會給大家一些引導
這會有鏈接
本次會議中的所有連接都在這個鏈接裏
這有一個小流程圖
如果你錯過了可以回顧視頻
還有即將開始的
我們有“Apple設備管理的新特性”
如果你沒有看過你要在視頻中回顧了
“以現代最佳實踐改進現有應用”
這是下午3點的本場演講之後馬上就是
這會是更加深入探討了
應用的最佳現代實現技術
“優化按需加載資源”的使用是在週四
“通過SiriKit擴展應用”是在週四
“CloudKit的新特性” 週四
“CloudKit最佳實踐”
如果想把應用移到雲端這些工程師
會細枝末節地告訴你怎麼去做
感謝大家的寶貴時間感激大家的參與